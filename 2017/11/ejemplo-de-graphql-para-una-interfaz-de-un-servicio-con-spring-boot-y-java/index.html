<!doctype html><html lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=picodotdev><meta name=keywords content="java,programacion,software,hardware,tapestry,software libre,gnu,linux,gnu/linux,unix,arch,arch linux,html,css,javascript"><meta name=description content="Con anterioridad las aplicaciones que lo necesitaban ofrecían una interfaz como un servicio mediante web services, sin embargo, esta tecnología era complicada por usar XML y no de fácil utilización en clientes JavaScript. La evolución que a día de hoy sigue siendo mayoritaria son las interfaces REST que emplean la semántica de los verbos del protocolo HTTP para realizar operaciones de búsqueda, creación, modificación y eliminación y normalmente empleando JSON como formato para intercambiar los datos. &hellip;"><base href=https://picodotdev.github.io/blog-bitix/><title>Ejemplo de GraphQL para una interfaz de un servicio con Spring Boot y Java</title><link rel=author type=text/plain href=humans.txt><link rel="shortcut icon" href=assets/favicon.ico><link rel=apple-touch-icon-precomposed sizes=144x144 href=assets/apple-touch-icon-144-precomposed.png><link rel=canonical href=https://picodotdev.github.io/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/><link href=index.xml rel=alternate type=application/rss+xml title="Blog Bitix"><link rel=stylesheet type=text/css href="//fonts.googleapis.com/css?family=PT+Serif:400,700italic,700,400italic"><link rel=stylesheet type=text/css href=assets/libs/bootstrap-4.0.0/css/bootstrap.min.css><link rel=stylesheet type=text/css href=assets/libs/Gallery-2.30.0/css/blueimp-gallery.min.css><link rel=stylesheet type=text/css href=assets/css/syntax.css><link rel=stylesheet type=text/css href=assets/css/main.css><script src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js async></script><script type=text/javascript>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:'ca-pub-3533636310991304',enable_page_level_ads:true});</script><script type=text/javascript async>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-12874075-4','picodotdev.github.io');ga('send','pageview');</script><script type=text/javascript src=assets/libs/require.js></script><script type=text/javascript src=assets/js/main.js></script><script type=text/javascript src=assets/js/theme.js async></script><script type=text/javascript src="//platform-api.sharethis.com/js/sharethis.js#property=5920c4ce1bd0670011e06acd&product=inline-share-buttons" async></script><script type=text/javascript src=assets/js/app.js async></script></head><body><div class=container><div class=row><div class=col><header><div class=row><div class="col-12 col-lg-4"></div><div class="col-12 col-lg-4"><h2 class=title><a href=https://picodotdev.github.io/blog-bitix/>Blog Bitix</a></h2><div class=links><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class="col-12 col-lg-4 text-center"><form name=query class="form-inline search" onsubmit="return false;"><div class=input-group><input type=text name=q class=form-control placeholder="Buscar en Blog Bitix">
<span class=input-group-btn><button class="btn btn-secondary" type=submit>Buscar</button></span></div></form><form name=search action=https://duckduckgo.com/ method=get class=hidden data-site=https://picodotdev.github.io/blog-bitix/><input type=hidden name=q></form></div></div><div class=row><div class=col-12><nav class="nav nav-pills nav-fill"><a href=/blog-bitix/tags/java/ class="nav-item nav-link">Java</a>
<a href=/blog-bitix/tags/gnu-linux/ class="nav-item nav-link">GNU/Linux</a>
<a href=/blog-bitix/tags/javascript/ class="nav-item nav-link">JavaScript</a>
<a href=/blog-bitix/tags/tapestry/ class="nav-item nav-link">Tapestry</a>
<a href=/blog-bitix/archive/ class="nav-item nav-link">Archivo y hemeroteca</a>
<a href=/blog-bitix/pages/links/ class="nav-item nav-link">Enlaces</a>
<a href=/blog-bitix/pages/about/ class="nav-item nav-link">Acerca de...</a></nav></div></div></header></div></div><div class=row><div class="col-12 col-lg-8"><div class=row><div class=col-12><article itemscope itemtype=http://schema.org/BlogPosting><meta itemprop=inLanguage content=es><meta itemprop=keywords content="blog-stack, java, planeta-codigo, programacion"><h1 itemprop=name>Ejemplo de GraphQL para una interfaz de un servicio con Spring Boot y Java</h1><p class=information>Escrito por <span itemscope itemtype=http://schema.org/Person><span itemprop=name>picodotdev</span></span> el <time itemprop=datePublished datetime=2017-11-01>01/11/2017</time>, actualizado el <time itemprop=dateModified datetime=2017-12-02>02/12/2017</time>.<br><a href=tags/blog-stack/>blog-stack</a> <a href=tags/java/>java</a> <a href=tags/planeta-codigo/>planeta-codigo</a> <a href=tags/programacion/>programacion</a><br><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/ itemprop=url>Enlace permanente</a>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/#comments>Comentarios</a></p><p class=summary itemprop=about>GraphQL es una alternativa a una interfaz REST con las ventajas de poder realizar varias consultas en una misma petición y devolviendo únicamente los datos que requiera el cliente. Es una especificación y hay una implementación para los lenguajes de programación más populares entre ellos Java. Este artículo es una introducción con un ejemplo completo que muestra cómo se hacen consultas y modificaciones en los datos.</p><ins class=adsbygoogle style=display:inline-block;width:728px;height:90px data-ad-client=ca-pub-3533636310991304 data-ad-slot=5966819782 data-type=leaderboard></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><div class=content itemprop=articleBody><meta itemprop=wordCount content=3098><div class=logotypes style=float:right><img src=assets/images/logotipos/graphql.svg class=right width=200 alt=GraphQL title=GraphQL></div><p>Con anterioridad las aplicaciones que lo necesitaban ofrecían una interfaz como un servicio mediante <em>web services</em>, sin embargo, esta tecnología era complicada por usar XML y no de fácil utilización en clientes JavaScript. La evolución que a día de hoy sigue siendo mayoritaria son las interfaces <a href=https://es.wikipedia.org/wiki/Representational_State_Transfer>REST</a> que emplean la semántica de los verbos del protocolo HTTP para realizar operaciones de búsqueda, creación, modificación y eliminación y normalmente empleando JSON como formato para intercambiar los datos. Sin embargo, REST no está exento de algunos problemas como la necesidad de realizar varias peticiones a cada uno de los recursos que ofrece si se necesitan datos de varios de ellos, otro es que los datos ofrecidos por los servicios REST está prefijados en tiempo de desarrollo no adaptándose a lo que necesita el cliente. En cierta medida estas dos cosas se pueden implementar en la interfaz REST con algunos parámetros pero requiere codificarlo explícitamente.</p><p>Más recientemente ha aparecido otra forma de implementar una interfaz de un servicio con <a href=http://graphql.org/>GraphQL</a> considerándose una <a href=https://www.howtographql.com/basics/1-graphql-is-the-better-rest/>alternativa mejor a REST</a> que solventa los dos problemas de las interfaces REST anteriores. REST ofrece en varios <em>endpoints</em> los recursos que pueden ser accedidos mediante los verbos HTTP (<em>GET</em>, <em>PUT</em>, <em>POST</em>, <em>DELETE</em>), en GraphQL por el contrario hay un único <em>endpoint</em>, los puntos de entrada al grafo y los tipos que se relacionan entre si que son consultados para obtener los datos con el lenguaje de consulta que ofrece GraphQL.</p><ul><li><a href=https://www.howtographql.com/basics/0-introduction/>Basics Tutorial - Introduction</a></li><li><a href=https://www.howtographql.com/basics/1-graphql-is-the-better-rest/>GraphQL is the better REST</a></li><li><a href=https://www.howtographql.com/basics/2-core-concepts/>Core Concepts</a></li><li><a href=https://www.howtographql.com/basics/3-big-picture/>Big Picture (Architecture)</a></li></ul><p>En GraphQL se define un <a href=https://graphql.org/learn/schema/>esquema</a> con la definición de los tipos en la API, se diferencia la obtención de los datos que es realizada por las <a href=https://graphql.org/learn/queries/><em>queries</em></a> y de las modificaciones que es realizada por los <a href=https://graphql.org/learn/queries/#mutations><em>mutators</em></a>, el esquema se puede definir en un archivo de texto como en este ejemplo o de forma programática con código que es necesario para algunas personalizaciones. Otras tareas que pueden ser necesarias en una API son <a href=https://www.howtographql.com/graphql-java/5-authentication/>autenticación</a> que es posible capturando los datos del contexto provenientes en los datos o como cabeceras de la petición posiblemente en forma de <em>token</em> de <a href=https://oauth.net/>OAuth</a> y la autorización en la lógica del servicio en base al sujeto autenticado. Se puede <a href=https://graphql.org/learn/schema/#scalar-types>usar datos propios con <em>scalar</em></a> para los cuales se ha de proporcionar una clase que realice la transformación implementando una clase GraphQLScalarType. Posee <a href=https://graphql.org/learn/introspection/>funcionalidades de introspección</a> y también <a href=https://www.howtographql.com/graphql-java/9-filtering/>filtrado</a>, <a href=https://www.howtographql.com/graphql-java/10-pagination/>paginación</a>, <a href=https://www.howtographql.com/graphql-java/7-error-handling/>gestión de errores</a> y <a href=https://graphql.org/learn/caching/>cacheo</a> aunque esto último es menos efectivo en GraphQL al depender de los datos a devolver que solicite el cliente.</p><p>Para usar GraphQL hay que definir un <em>schema</em> que incluye los tipos, sus propiedades y tipos. También se pueden usar <a href=https://graphql.org/learn/caching/>fragmentos</a> para reutilizar partes de la definición de los tipos. Cada <em>type</em> representa una entidad que definen las propiedades que posee ya sean datos escalares o referencias a otras entidades formando de esta manera grafos de objetos, los tipos de las variables que poseen una exclamación al final quiere decir que son opcionales, por defecto todos los datos son distinto de nulo. Las listas se definen con corchetes y el tipo entre ellos. Este es el IDL del esquema del ejemplo.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Plaintext data-lang=Plaintext>type Book {
    id: Long
    title: String
    author: Author
}

type Author {
    id: Long
    name: String
}

type Query {
    books: [Book]!
    authors: [Author]!
    author(id: Long): Author!
}

type Mutation {
    addBook(title: String, author: Long): Book
}

schema {
    query: Query
    mutation: Mutation
}
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/library.graphqls target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/library.graphqls target=_blank>library.graphqls</a></div></div><p>Una definido el esquema hay que desarrollar los <em>resolvers</em> que son encargados de obtener los datos seguramente de una base de datos externa ya sea una base de datos SQL o NoSQL en este caso utilizando una clase que implementa el patrón repositorio y que abstrae del sistema de persistencia donde se almacenan los datos.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>io.github.picodotdev.blogbitix.graphql</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>com.coxautodev.graphql.tools.GraphQLQueryResolver</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>java.util.Collection</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Query</span> <span class=kd>implements</span> <span class=n>GraphQLQueryResolver</span> <span class=o>{</span>
    
    <span class=kd>private</span> <span class=n>LibraryRepository</span> <span class=n>libraryRepository</span><span class=o>;</span>

    <span class=kd>public</span> <span class=nf>Query</span><span class=o>(</span><span class=n>LibraryRepository</span> <span class=n>libraryRepository</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>libraryRepository</span> <span class=o>=</span> <span class=n>libraryRepository</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Collection</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;</span> <span class=nf>books</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>libraryRepository</span><span class=o>.</span><span class=na>findBooks</span><span class=o>();</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Collection</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=nf>authors</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>libraryRepository</span><span class=o>.</span><span class=na>getAuthors</span><span class=o>();</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Author</span> <span class=nf>author</span><span class=o>(</span><span class=n>Long</span> <span class=n>id</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>libraryRepository</span><span class=o>.</span><span class=na>findAuthorById</span><span class=o>(</span><span class=n>id</span><span class=o>).</span><span class=na>orElse</span><span class=o>(</span><span class=kc>null</span><span class=o>);</span>
    <span class=o>}</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/Query.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/Query.java target=_blank>Query.java</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>io.github.picodotdev.blogbitix.graphql</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>graphql.schema.DataFetchingEnvironment</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.beans.factory.annotation.Autowired</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>java.util.*</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>LibraryRepository</span> <span class=o>{</span>

    <span class=kd>private</span> <span class=kt>long</span> <span class=n>sequence</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>Collection</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;</span> <span class=n>books</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>Collection</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>authors</span><span class=o>;</span>

    <span class=kd>public</span> <span class=nf>LibraryRepository</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>sequence</span> <span class=o>=</span> <span class=n>0l</span><span class=o>;</span>
        <span class=k>this</span><span class=o>.</span><span class=na>books</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
        <span class=k>this</span><span class=o>.</span><span class=na>authors</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>

        <span class=n>Author</span> <span class=n>a1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>(</span><span class=n>nextId</span><span class=o>(),</span> <span class=s>&#34;Philip K. Dick&#34;</span><span class=o>);</span>
        <span class=n>Author</span> <span class=n>a2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>(</span><span class=n>nextId</span><span class=o>(),</span> <span class=s>&#34;George R. R. Martin&#34;</span><span class=o>);</span>
        <span class=n>Author</span> <span class=n>a3</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>(</span><span class=n>nextId</span><span class=o>(),</span> <span class=s>&#34;Umberto Eco&#34;</span><span class=o>);</span>
        <span class=n>Author</span> <span class=n>a4</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>(</span><span class=n>nextId</span><span class=o>(),</span> <span class=s>&#34;Andreas Eschbach&#34;</span><span class=o>);</span>
        <span class=n>Author</span> <span class=n>a5</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>(</span><span class=n>nextId</span><span class=o>(),</span> <span class=s>&#34;Ernest Cline&#34;</span><span class=o>);</span>
        <span class=n>Author</span> <span class=n>a6</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Author</span><span class=o>(</span><span class=n>nextId</span><span class=o>(),</span> <span class=s>&#34;Anónimo&#34;</span><span class=o>);</span>

        <span class=k>this</span><span class=o>.</span><span class=na>authors</span><span class=o>.</span><span class=na>addAll</span><span class=o>(</span><span class=n>List</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>a1</span><span class=o>,</span> <span class=n>a2</span><span class=o>,</span> <span class=n>a3</span><span class=o>,</span> <span class=n>a4</span><span class=o>,</span> <span class=n>a5</span><span class=o>,</span> <span class=n>a6</span><span class=o>));</span>

        <span class=k>this</span><span class=o>.</span><span class=na>books</span><span class=o>.</span><span class=na>addAll</span><span class=o>(</span>
            <span class=n>List</span><span class=o>.</span><span class=na>of</span><span class=o>(</span>
                <span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=n>nextId</span><span class=o>(),</span> <span class=s>&#34;Ojo en el cielo&#34;</span><span class=o>,</span> <span class=n>a1</span><span class=o>),</span>
                <span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=n>nextId</span><span class=o>(),</span> <span class=s>&#34;Muerte de la luz&#34;</span><span class=o>,</span> <span class=n>a2</span><span class=o>),</span>
                <span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=n>nextId</span><span class=o>(),</span> <span class=s>&#34;El nombre de la rosa&#34;</span><span class=o>,</span> <span class=n>a3</span><span class=o>),</span>
                <span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=n>nextId</span><span class=o>(),</span> <span class=s>&#34;Los tejedores de cabellos&#34;</span><span class=o>,</span> <span class=n>a4</span><span class=o>),</span>
                <span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=n>nextId</span><span class=o>(),</span> <span class=s>&#34;Ready Player One&#34;</span><span class=o>,</span> <span class=n>a5</span><span class=o>)</span>
            <span class=o>)</span>
        <span class=o>);</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Collection</span><span class=o>&lt;</span><span class=n>Book</span><span class=o>&gt;</span> <span class=nf>findBooks</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>books</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Collection</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=nf>getAuthors</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>authors</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=nf>findAuthorById</span><span class=o>(</span><span class=n>Long</span> <span class=n>id</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>authors</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>filter</span><span class=o>(</span><span class=n>a</span> <span class=o>-&gt;</span> <span class=n>a</span><span class=o>.</span><span class=na>getId</span><span class=o>().</span><span class=na>equals</span><span class=o>(</span><span class=n>id</span><span class=o>)).</span><span class=na>findFirst</span><span class=o>();</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Book</span> <span class=nf>addBook</span><span class=o>(</span><span class=n>String</span> <span class=n>title</span><span class=o>,</span> <span class=n>Long</span> <span class=n>idAuthor</span><span class=o>,</span> <span class=n>AuthContext</span> <span class=n>context</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>PermissionException</span><span class=o>,</span> <span class=n>ValidationException</span> <span class=o>{</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>context</span><span class=o>.</span><span class=na>getUser</span><span class=o>()</span> <span class=o>==</span> <span class=kc>null</span> <span class=o>||</span> <span class=o>!</span><span class=n>context</span><span class=o>.</span><span class=na>getUser</span><span class=o>().</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;admin&#34;</span><span class=o>))</span> <span class=o>{</span>
            <span class=k>throw</span> <span class=k>new</span> <span class=n>PermissionException</span><span class=o>(</span><span class=s>&#34;Invalid permissions&#34;</span><span class=o>);</span>
        <span class=o>}</span>
        <span class=n>Optional</span><span class=o>&lt;</span><span class=n>Author</span><span class=o>&gt;</span> <span class=n>author</span> <span class=o>=</span> <span class=n>findAuthorById</span><span class=o>(</span><span class=n>idAuthor</span><span class=o>);</span>
        <span class=k>if</span> <span class=o>(!</span><span class=n>author</span><span class=o>.</span><span class=na>isPresent</span><span class=o>())</span> <span class=o>{</span>
            <span class=k>throw</span> <span class=k>new</span> <span class=n>ValidationException</span><span class=o>(</span><span class=s>&#34;Invalid author&#34;</span><span class=o>);</span>
        <span class=o>}</span>

        <span class=n>Book</span> <span class=n>book</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Book</span><span class=o>(</span><span class=n>nextId</span><span class=o>(),</span> <span class=n>title</span><span class=o>,</span> <span class=n>author</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
        <span class=n>books</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>book</span><span class=o>);</span>
        <span class=k>return</span> <span class=n>book</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>private</span> <span class=kt>long</span> <span class=nf>nextId</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=o>++</span><span class=n>sequence</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/LibraryRepository.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/LibraryRepository.java target=_blank>LibraryRepository.java</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>io.github.picodotdev.blogbitix.graphql</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Book</span> <span class=o>{</span>
    
    <span class=kd>private</span> <span class=n>Long</span> <span class=n>id</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>String</span> <span class=n>title</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>Author</span> <span class=n>author</span><span class=o>;</span>

    <span class=kd>public</span> <span class=nf>Book</span><span class=o>(</span><span class=n>Long</span> <span class=n>id</span><span class=o>,</span> <span class=n>String</span> <span class=n>title</span><span class=o>,</span> <span class=n>Author</span> <span class=n>author</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>id</span><span class=o>;</span>
        <span class=k>this</span><span class=o>.</span><span class=na>title</span> <span class=o>=</span> <span class=n>title</span><span class=o>;</span>
        <span class=k>this</span><span class=o>.</span><span class=na>author</span> <span class=o>=</span> <span class=n>author</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Long</span> <span class=nf>getId</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>id</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setId</span><span class=o>(</span><span class=n>Long</span> <span class=n>id</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>id</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getTitle</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>title</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setTitle</span><span class=o>(</span><span class=n>String</span> <span class=n>title</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>title</span> <span class=o>=</span> <span class=n>title</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Author</span> <span class=nf>getAuthor</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>author</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setAuthor</span><span class=o>(</span><span class=n>Author</span> <span class=n>author</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>author</span> <span class=o>=</span> <span class=n>author</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/Book.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/Book.java target=_blank>Book.java</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>io.github.picodotdev.blogbitix.graphql</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Author</span> <span class=o>{</span>

    <span class=kd>private</span> <span class=n>Long</span> <span class=n>id</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>

    <span class=kd>public</span> <span class=nf>Author</span><span class=o>(</span><span class=n>Long</span> <span class=n>id</span><span class=o>,</span> <span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>id</span><span class=o>;</span>
        <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Long</span> <span class=nf>getId</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>id</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setId</span><span class=o>(</span><span class=n>Long</span> <span class=n>id</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>id</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getName</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>name</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setName</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/Author.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/Author.java target=_blank>Author.java</a></div></div><p>Los <em>mutators</em> son los encargados de procesar las peticiones de modificación.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>io.github.picodotdev.blogbitix.graphql</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>com.coxautodev.graphql.tools.GraphQLMutationResolver</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>com.coxautodev.graphql.tools.GraphQLQueryResolver</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>graphql.schema.DataFetchingEnvironment</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>java.util.Collection</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Mutation</span> <span class=kd>implements</span> <span class=n>GraphQLMutationResolver</span> <span class=o>{</span>

    <span class=kd>private</span> <span class=n>LibraryRepository</span> <span class=n>libraryRepository</span><span class=o>;</span>

    <span class=kd>public</span> <span class=nf>Mutation</span><span class=o>(</span><span class=n>LibraryRepository</span> <span class=n>libraryRepository</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>libraryRepository</span> <span class=o>=</span> <span class=n>libraryRepository</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Book</span> <span class=nf>addBook</span><span class=o>(</span><span class=n>String</span> <span class=n>title</span><span class=o>,</span> <span class=n>Long</span> <span class=n>author</span><span class=o>,</span> <span class=n>DataFetchingEnvironment</span> <span class=n>env</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>libraryRepository</span><span class=o>.</span><span class=na>addBook</span><span class=o>(</span><span class=n>title</span><span class=o>,</span> <span class=n>author</span><span class=o>,</span> <span class=n>env</span><span class=o>.&lt;</span><span class=n>AuthContext</span><span class=o>&gt;</span><span class=n>getContext</span><span class=o>());</span>
    <span class=o>}</span>
<span class=o>}</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/Mutation.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/Mutation.java target=_blank>Mutation.java</a></div></div><p>Usando una aplicación de <a href=https://projects.spring.io/spring-boot/>Spring Boot</a> para ofrecer el servicio hay que realizar la contribución adecuada al contenedor de dependencias, en Java GraphQL se define como un <a href=https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html><em>servlet</em></a> al cual hay que proporcionarle la configuración de los <em>resolvers</em>, <em>mutators</em>, procesador de contexto que en este caso se utiliza para la autenticación y definición del esquema entre otras posibles cosas.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>io.github.picodotdev.blogbitix.graphql</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>com.coxautodev.graphql.tools.SchemaParser</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>graphql.ErrorType</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>graphql.ExceptionWhileDataFetching</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>graphql.GraphQLError</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>graphql.schema.GraphQLSchema</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>graphql.servlet.*</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.apache.commons.io.IOUtils</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.boot.SpringApplication</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.boot.autoconfigure.SpringBootApplication</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.boot.web.servlet.ServletComponentScan</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.boot.web.servlet.ServletRegistrationBean</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.context.annotation.Bean</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>javax.servlet.http.HttpServletRequest</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>javax.servlet.http.HttpServletResponse</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.io.BufferedReader</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.io.InputStream</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.io.InputStreamReader</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.io.Reader</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.nio.charset.Charset</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.util.List</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.util.stream.Collectors</span><span class=o>;</span>

<span class=nd>@SpringBootApplication</span>
<span class=nd>@ServletComponentScan</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>

    <span class=nd>@Bean</span>
    <span class=kd>public</span> <span class=n>LibraryRepository</span> <span class=nf>buildLibraryRepository</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=k>new</span> <span class=n>LibraryRepository</span><span class=o>();</span>
    <span class=o>}</span>

    <span class=nd>@Bean</span>
    <span class=kd>public</span> <span class=n>ServletRegistrationBean</span> <span class=nf>graphQLServletRegistrationBean</span><span class=o>(</span><span class=n>LibraryRepository</span> <span class=n>libraryRepository</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=o>{</span>
        <span class=n>GraphQLSchema</span> <span class=n>schema</span> <span class=o>=</span> <span class=n>SchemaParser</span><span class=o>.</span><span class=na>newParser</span><span class=o>()</span>
                <span class=o>.</span><span class=na>schemaString</span><span class=o>(</span><span class=n>IOUtils</span><span class=o>.</span><span class=na>resourceToString</span><span class=o>(</span><span class=s>&#34;/library.graphqls&#34;</span><span class=o>,</span> <span class=n>Charset</span><span class=o>.</span><span class=na>forName</span><span class=o>(</span><span class=s>&#34;UTF-8&#34;</span><span class=o>)))</span>
                <span class=o>.</span><span class=na>resolvers</span><span class=o>(</span><span class=k>new</span> <span class=n>Query</span><span class=o>(</span><span class=n>libraryRepository</span><span class=o>),</span> <span class=k>new</span> <span class=n>Mutation</span><span class=o>(</span><span class=n>libraryRepository</span><span class=o>))</span>
                <span class=o>.</span><span class=na>build</span><span class=o>()</span>
                <span class=o>.</span><span class=na>makeExecutableSchema</span><span class=o>();</span>

        <span class=n>GraphQLContextBuilder</span> <span class=n>contextBuilder</span> <span class=o>=</span> <span class=k>new</span> <span class=n>GraphQLContextBuilder</span><span class=o>()</span> <span class=o>{</span>
            <span class=nd>@Override</span>
            <span class=kd>public</span> <span class=n>GraphQLContext</span> <span class=nf>build</span><span class=o>(</span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>HttpServletRequest</span><span class=o>&gt;</span> <span class=n>request</span><span class=o>,</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=n>HttpServletResponse</span><span class=o>&gt;</span> <span class=n>response</span><span class=o>)</span> <span class=o>{</span>
                <span class=n>String</span> <span class=n>user</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=na>get</span><span class=o>().</span><span class=na>getHeader</span><span class=o>(</span><span class=s>&#34;User&#34;</span><span class=o>);</span>
                <span class=k>return</span> <span class=k>new</span> <span class=n>AuthContext</span><span class=o>(</span><span class=n>user</span><span class=o>,</span> <span class=n>request</span><span class=o>,</span> <span class=n>response</span><span class=o>);</span>
            <span class=o>}</span>
        <span class=o>};</span>

        <span class=k>return</span> <span class=k>new</span> <span class=n>ServletRegistrationBean</span><span class=o>(</span><span class=k>new</span> <span class=n>SimpleGraphQLServlet</span><span class=o>(</span><span class=n>schema</span><span class=o>,</span> <span class=k>new</span> <span class=n>DefaultExecutionStrategyProvider</span><span class=o>(),</span> <span class=kc>null</span><span class=o>,</span> <span class=kc>null</span><span class=o>,</span> <span class=kc>null</span><span class=o>,</span> <span class=kc>null</span><span class=o>,</span> <span class=n>contextBuilder</span><span class=o>,</span> <span class=kc>null</span><span class=o>),</span> <span class=s>&#34;/library&#34;</span><span class=o>);</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>SpringApplication</span><span class=o>.</span><span class=na>run</span><span class=o>(</span><span class=n>Main</span><span class=o>.</span><span class=na>class</span><span class=o>,</span> <span class=n>args</span><span class=o>);</span>
    <span class=o>}</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/Main.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/Main.java target=_blank>Main.java</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>io.github.picodotdev.blogbitix.graphql</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>graphql.servlet.GraphQLContext</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>javax.servlet.http.HttpServletRequest</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>javax.servlet.http.HttpServletResponse</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.util.Optional</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>AuthContext</span> <span class=kd>extends</span> <span class=n>GraphQLContext</span> <span class=o>{</span>

    <span class=kd>private</span> <span class=n>String</span> <span class=n>user</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=n>HttpServletRequest</span><span class=o>&gt;</span> <span class=n>request</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=n>HttpServletResponse</span><span class=o>&gt;</span> <span class=n>response</span><span class=o>;</span>

    <span class=kd>public</span> <span class=nf>AuthContext</span><span class=o>(</span><span class=n>String</span> <span class=n>user</span><span class=o>,</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=n>HttpServletRequest</span><span class=o>&gt;</span> <span class=n>request</span><span class=o>,</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=n>HttpServletResponse</span><span class=o>&gt;</span> <span class=n>response</span><span class=o>)</span> <span class=o>{</span>
        <span class=kd>super</span><span class=o>(</span><span class=n>request</span><span class=o>,</span> <span class=n>response</span><span class=o>);</span>
        <span class=k>this</span><span class=o>.</span><span class=na>user</span> <span class=o>=</span> <span class=n>user</span><span class=o>;</span>
        <span class=k>this</span><span class=o>.</span><span class=na>request</span> <span class=o>=</span> <span class=n>request</span><span class=o>;</span>
        <span class=k>this</span><span class=o>.</span><span class=na>response</span> <span class=o>=</span> <span class=n>response</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getUser</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>user</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setUser</span><span class=o>(</span><span class=n>String</span> <span class=n>user</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>user</span> <span class=o>=</span> <span class=n>user</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=n>HttpServletRequest</span><span class=o>&gt;</span> <span class=nf>getRequest</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>request</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setRequest</span><span class=o>(</span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>HttpServletRequest</span><span class=o>&gt;</span> <span class=n>request</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>request</span> <span class=o>=</span> <span class=n>request</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Optional</span><span class=o>&lt;</span><span class=n>HttpServletResponse</span><span class=o>&gt;</span> <span class=nf>getResponse</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=n>response</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setResponse</span><span class=o>(</span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>HttpServletResponse</span><span class=o>&gt;</span> <span class=n>response</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>response</span> <span class=o>=</span> <span class=n>response</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/AuthContext.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/AuthContext.java target=_blank>AuthContext.java</a></div></div><p>El lenguaje de consulta GraphQL permite consultar el grafo de objetos y recuperar los datos deseados. En el siguiente ejemplo se obtienen los libros, los autores y los libros con los datos de sus autores de una clase que implementa el patrón <em>repository</em>. En el ejemplo los datos del repositorio están definidos en la propia clase de forma estática pero como su función es abstraer de donde se obtienen los datos el cambio sería sencillo para que los obtuviese de una base de datos SQL o NoSQL ya que los cambios estarían encapsulados principalmente en esa clase. Los datos son devueltos en formato JSON.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash>$ curl <span class=s2>&#34;http://localhost:8080/library?query=\{books\{title\}\}&#34;</span>
<span class=o>{</span>
  <span class=s2>&#34;data&#34;</span>: <span class=o>{</span>
    <span class=s2>&#34;books&#34;</span>: <span class=o>[</span>
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;Ojo en el cielo&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;Muerte de la luz&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;El nombre de la rosa&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;Los tejedores de cabellos&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;Ready Player One&#34;</span>
      <span class=o>}</span>
    <span class=o>]</span>
  <span class=o>}</span>
<span class=o>}</span>

$ curl <span class=s2>&#34;http://localhost:8080/library?query=\{authors\{name\}\}&#34;</span>
<span class=o>{</span>
  <span class=s2>&#34;data&#34;</span>: <span class=o>{</span>
    <span class=s2>&#34;authors&#34;</span>: <span class=o>[</span>
      <span class=o>{</span>
        <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Philip K. Dick&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;George R. R. Martin&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Umberto Eco&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Andreas Eschbach&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Ernest Cline&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Anónimo&#34;</span>
      <span class=o>}</span>
    <span class=o>]</span>
  <span class=o>}</span>
<span class=o>}</span>

$ curl <span class=s2>&#34;http://localhost:8080/library?query=\{books\{title+author\{name\}\}\}&#34;</span>
<span class=o>{</span>
  <span class=s2>&#34;data&#34;</span>: <span class=o>{</span>
    <span class=s2>&#34;books&#34;</span>: <span class=o>[</span>
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;Ojo en el cielo&#34;</span>,
        <span class=s2>&#34;author&#34;</span>: <span class=o>{</span>
          <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Philip K. Dick&#34;</span>
        <span class=o>}</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;Muerte de la luz&#34;</span>,
        <span class=s2>&#34;author&#34;</span>: <span class=o>{</span>
          <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;George R. R. Martin&#34;</span>
        <span class=o>}</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;El nombre de la rosa&#34;</span>,
        <span class=s2>&#34;author&#34;</span>: <span class=o>{</span>
          <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Umberto Eco&#34;</span>
        <span class=o>}</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;Los tejedores de cabellos&#34;</span>,
        <span class=s2>&#34;author&#34;</span>: <span class=o>{</span>
          <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Andreas Eschbach&#34;</span>
        <span class=o>}</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;Ready Player One&#34;</span>,
        <span class=s2>&#34;author&#34;</span>: <span class=o>{</span>
          <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Ernest Cline&#34;</span>
        <span class=o>}</span>
      <span class=o>}</span>
    <span class=o>]</span>
  <span class=o>}</span>
<span class=o>}</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/curl-1.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/curl-1.sh target=_blank>curl-1.sh</a></div></div><p>Una de las ventajas de GraphQL sobre REST es que es posible realizar una única petición lo que en REST podrían ser varias. Por ejemplo, la siguiente consulta obtiene en una única consulta todos los libros, todos los autores y el autor con identificativo 1 de la biblioteca, esto mejora el rendimiento ya que en REST se hubiesen requerido varias peticiones una para obtener libros, otra para los autores y otra para el autor 1. La otra ventaja sobre REST es que se devuelven únicamente los datos que el cliente solicita y no una lista prefijada por el desarrollador de la interfaz.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash>$ curl <span class=s2>&#34;http://localhost:8080/library?query=\{books\{title\}authors\{name\}author(id:1)\{name\}\}&#34;</span>
<span class=o>{</span>
  <span class=s2>&#34;data&#34;</span>: <span class=o>{</span>
    <span class=s2>&#34;books&#34;</span>: <span class=o>[</span>
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;Ojo en el cielo&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;Muerte de la luz&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;El nombre de la rosa&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;Los tejedores de cabellos&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;Ready Player One&#34;</span>
      <span class=o>}</span>
    <span class=o>]</span>,
    <span class=s2>&#34;authors&#34;</span>: <span class=o>[</span>
      <span class=o>{</span>
        <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Philip K. Dick&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;George R. R. Martin&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Umberto Eco&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Andreas Eschbach&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Ernest Cline&#34;</span>
      <span class=o>}</span>,
      <span class=o>{</span>
        <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Anónimo&#34;</span>
      <span class=o>}</span>
    <span class=o>]</span>,
    <span class=s2>&#34;author&#34;</span>: <span class=o>{</span>
      <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;Philip K. Dick&#34;</span>
    <span class=o>}</span>
  <span class=o>}</span>
<span class=o>}</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/curl-2.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/curl-2.sh target=_blank>curl-2.sh</a></div></div><p>Las consultas puede hacerse mediante una petición <em>GET</em> o <em>POST</em> de HTTP.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash>$ curl -XPOST -H <span class=s2>&#34;Content-Type: application/json&#34;</span> -d <span class=s1>&#39;{&#34;query&#34;: &#34;query Books{books{title}}&#34;}&#39;</span> http://localhost:8080/library
$ curl -XPOST -H <span class=s2>&#34;Content-Type: application/json&#34;</span> -d <span class=s1>&#39;{&#34;query&#34;: &#34;query Authors{authors{name}}&#34;}&#39;</span> http://localhost:8080/library
$ curl -XPOST -H <span class=s2>&#34;Content-Type: application/json&#34;</span> -d <span class=s1>&#39;{&#34;query&#34;: &#34;query BooksWithAuthors{books{title author{name}}}&#34;}&#39;</span> http://localhost:8080/library</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/curl-3.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/curl-3.sh target=_blank>curl-3.sh</a></div></div><p>Las peticiones de modificación se envían mediante <em>POST</em>. Este es el caso para añadir un libro a la biblioteca y los casos de que el autor del libro no sea válido o que el usuario que añade el libro no tenga permisos. En el ejemplo los errores no son descriptivos de lo que realmente ha sucedido, habría que hacer el <a href=https://picodotdev.github.io/blog-bitix/2017/11/devolver-mensajes-de-error-descriptivos-en-graphql/>tratamiento de errores adecuado para que los mensajes fuesen más descriptivos</a>.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash>$ curl -XPOST -H <span class=s2>&#34;Content-Type: application/json&#34;</span> -H <span class=s2>&#34;User: admin&#34;</span> -d <span class=s1>&#39;{&#34;query&#34;: &#34;mutation addBook($title: String, $author: Long){addBook(title: $title, author: $author){title}}&#34;, &#34;variables&#34;: { &#34;title&#34;: &#34;El lazarillo de Tormes&#34;, &#34;author&#34;: 6}}&#39;</span> http://localhost:8080/library
<span class=o>{</span>
  <span class=s2>&#34;data&#34;</span>: <span class=o>{</span>
    <span class=s2>&#34;addBook&#34;</span>: <span class=o>{</span>
      <span class=s2>&#34;title&#34;</span>: <span class=s2>&#34;El lazarillo de Tormes&#34;</span>
    <span class=o>}</span>
  <span class=o>}</span>
<span class=o>}</span>

$ curl -XPOST -H <span class=s2>&#34;Content-Type: application/json&#34;</span> -H <span class=s2>&#34;User: admin&#34;</span> -d <span class=s1>&#39;{&#34;query&#34;: &#34;mutation addBook($title: String, $author: Long){addBook(title: $title, author: $author){title}}&#34;, &#34;variables&#34;: { &#34;title&#34;: &#34;El lazarillo de Tormes&#34;, &#34;author&#34;: 99}}&#39;</span> http://localhost:8080/library
<span class=o>{</span>
  <span class=s2>&#34;data&#34;</span>: <span class=o>{</span>
    <span class=s2>&#34;addBook&#34;</span>: null
  <span class=o>}</span>,
  <span class=s2>&#34;errors&#34;</span>: <span class=o>[</span>
    <span class=o>{</span>
      <span class=s2>&#34;message&#34;</span>: <span class=s2>&#34;Internal Server Error(s) while executing query&#34;</span>,
      <span class=s2>&#34;extensions&#34;</span>: null,
      <span class=s2>&#34;path&#34;</span>: null
    <span class=o>}</span>
  <span class=o>]</span>
<span class=o>}</span>

io.github.picodotdev.blogbitix.graphql.ValidationException: Invalid author
    at io.github.picodotdev.blogbitix.graphql.LibraryRepository.addBook<span class=o>(</span>LibraryRepository.java:57<span class=o>)</span> ~<span class=o>[</span>main/:na<span class=o>]</span>
    at io.github.picodotdev.blogbitix.graphql.Mutation.addBook<span class=o>(</span>Mutation.java:18<span class=o>)</span> ~<span class=o>[</span>main/:na<span class=o>]</span>
    at io.github.picodotdev.blogbitix.graphql.MutationMethodAccess.invoke<span class=o>(</span>Unknown Source<span class=o>)</span> ~<span class=o>[</span>reflectasm-1.11.3.jar:na<span class=o>]</span>
    at com.coxautodev.graphql.tools.MethodFieldResolverDataFetcher.get<span class=o>(</span>MethodFieldResolver.kt:111<span class=o>)</span> ~<span class=o>[</span>graphql-java-tools-4.1.2.jar:na<span class=o>]</span>
  ...

$ curl -XPOST -H <span class=s2>&#34;Content-Type: application/json&#34;</span> -d <span class=s1>&#39;{&#34;query&#34;: &#34;mutation addBook($title: String, $author: Long){addBook(title: $title, author: $author){title}}&#34;, &#34;variables&#34;: { &#34;title&#34;: &#34;El lazarillo de Tormes&#34;, &#34;author&#34;: 6}}&#39;</span> http://localhost:8080/library
<span class=o>{</span>
  <span class=s2>&#34;data&#34;</span>: <span class=o>{</span>
    <span class=s2>&#34;addBook&#34;</span>: null
  <span class=o>}</span>,
  <span class=s2>&#34;errors&#34;</span>: <span class=o>[</span>
    <span class=o>{</span>
      <span class=s2>&#34;message&#34;</span>: <span class=s2>&#34;Internal Server Error(s) while executing query&#34;</span>,
      <span class=s2>&#34;extensions&#34;</span>: null,
      <span class=s2>&#34;path&#34;</span>: null
    <span class=o>}</span>
  <span class=o>]</span>
<span class=o>}</span>

io.github.picodotdev.blogbitix.graphql.PermissionException: Invalid permissions
    at io.github.picodotdev.blogbitix.graphql.LibraryRepository.addBook<span class=o>(</span>LibraryRepository.java:53<span class=o>)</span> ~<span class=o>[</span>main/:na<span class=o>]</span>
    at io.github.picodotdev.blogbitix.graphql.Mutation.addBook<span class=o>(</span>Mutation.java:18<span class=o>)</span> ~<span class=o>[</span>main/:na<span class=o>]</span>
    at io.github.picodotdev.blogbitix.graphql.MutationMethodAccess.invoke<span class=o>(</span>Unknown Source<span class=o>)</span> ~<span class=o>[</span>reflectasm-1.11.3.jar:na<span class=o>]</span>
    at com.coxautodev.graphql.tools.MethodFieldResolverDataFetcher.get<span class=o>(</span>MethodFieldResolver.kt:111<span class=o>)</span> ~<span class=o>[</span>graphql-java-tools-4.1.2.jar:na<span class=o>]</span>
  ...</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/curl-4.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/curl-4.sh target=_blank>curl-4.sh</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>io.github.picodotdev.blogbitix.graphql</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>PermissionException</span> <span class=kd>extends</span> <span class=n>Exception</span> <span class=o>{</span>

    <span class=kd>public</span> <span class=nf>PermissionException</span><span class=o>(</span><span class=n>String</span> <span class=n>message</span><span class=o>)</span> <span class=o>{</span>
        <span class=kd>super</span><span class=o>(</span><span class=n>message</span><span class=o>);</span>
    <span class=o>}</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/PermissionException.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/PermissionException.java target=_blank>PermissionException.java</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>io.github.picodotdev.blogbitix.graphql</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>ValidationException</span> <span class=kd>extends</span> <span class=n>Exception</span> <span class=o>{</span>

    <span class=kd>public</span> <span class=nf>ValidationException</span><span class=o>(</span><span class=n>String</span> <span class=n>message</span><span class=o>)</span> <span class=o>{</span>
        <span class=kd>super</span><span class=o>(</span><span class=n>message</span><span class=o>);</span>
    <span class=o>}</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/ValidationException.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/ValidationException.java target=_blank>ValidationException.java</a></div></div><p>La forma explicada en las guías de GraphQL para Java es que el <em>mutator</em> reciba los datos y este delegue la funcionalidad en una clase que implemente el patrón <em>repository</em> que abstrae del sistema de almacenamiento (base de datos SQL, NoSQL o cualquier otro), además, este patrón <em>repository</em> o clase de lógica de negocio se recomienda que implemente la funcionalidad necesaria para aplicar la autorización. En el ejemplo aunque de forma sencilla solo en usuario <em>admin</em> tiene permitido añadir libros, en un proyecto es posible realizar la autenticación usando <a href=http://www.keycloak.org/>Keycloak</a> como sistema de OAuth, usar el <em>token</em> de OAuth para implementar la autorización y un <em>framework</em> de seguridad como <a href=http://shiro.apache.org/>Apache Shiro</a> para aplicar los permisos a las funcionalidades.</p><p>Los artículos <a href=https://picodotdev.github.io/blog-bitix/2016/09/autenticacion-con-oauth-y-keycloak-en-un-servicio-rest-con-jax-rs-y-spring-boot/>Autenticación con OAuth y Keycloak en un servicio REST con JAX-RS y Spring Boot</a> y <a href=https://picodotdev.github.io/blog-bitix/2016/10/integrar-autenticacion-oauth-con-keycloak-shiro-apache-tapestry-y-spring-boot/>Integrar autenticación OAuth con Keycloak, Shiro, Apache Tapestry y Spring Boot</a> pueden servir como base para añadir autenticación OAuth a un servicio GraphQL con Keycloak.</p><p>Finalmente, el archivo de construcción de <a href=https://gradle.org/>Gradle</a> del ejemplo con las dependencias necesarias. <a href=https://github.com/graphql-java/graphql-java>graphql-java</a> contiene la implementación para Java de GraphQL, <a href=https://github.com/graphql-java/graphql-java-servlet>graphql-java-servlet</a> la implementación de GraphQL mediante un <em>servlet</em> y <a href=https://github.com/graphql-java/graphql-java-tools>graphql-java-tools</a> son varias utilidades que facilitan en gran medida el desarrollo de un servicio para GraphQL como la construcción del esquema mediante su definición IDL o crear <em>resolvers</em> fácilmente.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Groovy data-lang=Groovy><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Groovy data-lang=Groovy><span class=n>buildscript</span> <span class=o>{</span>
    <span class=n>ext</span> <span class=o>{</span>
        <span class=n>springBootVersion</span> <span class=o>=</span> <span class=s1>&#39;1.5.9.RELEASE&#39;</span>
    <span class=o>}</span>
    <span class=n>repositories</span> <span class=o>{</span>
        <span class=n>mavenCentral</span><span class=o>()</span>
    <span class=o>}</span>
    <span class=n>dependencies</span> <span class=o>{</span>
        <span class=n>classpath</span><span class=o>(</span><span class=s2>&#34;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&#34;</span><span class=o>)</span>
    <span class=o>}</span>
<span class=o>}</span>

<span class=n>apply</span> <span class=nl>plugin:</span> <span class=s1>&#39;idea&#39;</span>
<span class=n>apply</span> <span class=nl>plugin:</span> <span class=s1>&#39;java&#39;</span>
<span class=n>apply</span> <span class=nl>plugin:</span> <span class=s1>&#39;application&#39;</span>
<span class=n>apply</span> <span class=nl>plugin:</span> <span class=s1>&#39;org.springframework.boot&#39;</span>

<span class=n>repositories</span> <span class=o>{</span>
    <span class=n>jcenter</span><span class=o>()</span>
    <span class=n>mavenCentral</span><span class=o>()</span>
<span class=o>}</span>

<span class=n>dependencies</span> <span class=o>{</span>
    <span class=n>compile</span><span class=o>(</span><span class=s1>&#39;org.springframework.boot:spring-boot-starter&#39;</span><span class=o>)</span>
    <span class=n>compile</span> <span class=s2>&#34;org.springframework.boot:spring-boot-starter-web&#34;</span>
    <span class=n>compile</span> <span class=s2>&#34;com.graphql-java:graphql-java:8.0&#34;</span>
    <span class=n>compile</span> <span class=s2>&#34;com.graphql-java:graphql-java-servlet:5.0.0&#34;</span>
    <span class=n>compile</span> <span class=s2>&#34;com.graphql-java:graphql-java-tools:5.1.0&#34;</span>
    <span class=n>compile</span> <span class=s1>&#39;org.reactivestreams:reactive-streams:1.0.0&#39;</span>
    <span class=n>compile</span> <span class=s2>&#34;org.apache.commons:commons-lang3:3.7&#34;</span>
    <span class=n>compile</span> <span class=s2>&#34;commons-io:commons-io:2.6&#34;</span>
<span class=o>}</span>

<span class=n>mainClassName</span> <span class=o>=</span> <span class=s1>&#39;io.github.picodotdev.blogbitix.graphql.Main&#39;</span>

<span class=n>run</span> <span class=o>{</span>
    <span class=n>systemProperty</span> <span class=s2>&#34;tomcat.util.http.parser.HttpParser.requestTargetAllow&#34;</span><span class=o>,</span> <span class=s2>&#34;|{}&#34;</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/build.gradle target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/code/build.gradle target=_blank>build.gradle</a></div></div><p>El <a href=https://github.com/picodotdev/blog-ejemplos/tree/master/GraphQL>código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en <a href=https://github.com/>GitHub</a> y probarlo en tu equipo ejecutando el comando <code>./gradlew run</code>. Requiere Java 9&#43; o Docker.</p><div class=reference>Referencia:<br><ul><li><a href=http://graphql.org/>GraphQL</a></li><li><a href=https://graphql-java.readthedocs.io/en/v5/>Welcome to graphql-java</a></li><li><a href=https://github.com/graphql-java/graphql-java>GraphQL Java implementation</a></li><li><a href=https://www.howtographql.com/graphql-java/2-queries/>Queries</a></li><li><a href=https://github.com/graphql-java/graphql-java-tools>A schema-first tool for graphql-java inspired by graphql-tools for JS</a></li><li><a href=http://www.graph.cool>GraphQL Backend Development Framework</a></li><li><a href=https://www.genbetadev.com/desarrollo-aplicaciones-moviles/por-que-deberiamos-abandonar-rest-y-empezar-a-usar-graphql-en-nuestras-apis>¿Por qué deberíamos abandonar REST y empezar a usar GraphQL en nuestras APIs?</a></li><li><a href=https://www.paradigmadigital.com/dev/graphql-todos-uno-uno-todos/>GraphQL: ¡todos para uno y uno para todos!</a></li><li><a href=https://www.adictosaltrabajo.com/tutoriales/introduccion-a-graphql/>Introducción a GraphQL</a></li></ul></div></div></article></div></div><div class="row serie"><div class=col-md-12><h3>Este artículo forma parte de la serie <strong>graphql</strong>:</h3><ol class=serie-articles><li><a href=https://picodotdev.github.io/blog-bitix/2017/11/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/>Ejemplo de GraphQL para una interfaz de un servicio con Spring Boot y Java</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/11/devolver-mensajes-de-error-descriptivos-en-graphql/>Devolver mensajes de error descriptivos en GraphQL</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/11/usar-un-resolver-para-recuperar-propiedades-en-graphql/>Usar un resolver para recuperar propiedades en GraphQL</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/11/consultas-con-parametros-para-filtrar-datos-en-graphql/>Consultas con parámetros para filtrar datos en GraphQL</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/11/paginacion-usando-cursores-en-graphql-y-java/>Paginación usando cursores en GraphQL y Java</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/12/definir-nuevos-tipos-de-datos-escalares-en-graphql/>Definir nuevos tipos de datos escalares en GraphQL</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/05/recuperar-datos-eficientemente-en-graphql-usando-batching/>Recuperar datos eficientemente en GraphQL usando batching</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/08/el-editor-explorador-e-ide-graphiql-para-una-api-con-graphql/>El editor, explorador e IDE GraphiQL para una API con GraphQL</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/08/usando-directivas-en-graphql/>Usando directivas en GraphQL</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/08/los-fragmentos-en-graphql/>Los fragmentos en GraphQL</a></li></ol></div></div><div class=row><div class=col-md-12><div class=sharethis-inline-share-buttons></div></div></div><div class=row><div class=col-12><ins class=adsbygoogle style=display:inline-block;width:728px;height:90px data-ad-client=ca-pub-3533636310991304 data-ad-slot=5966819782 data-type=leaderboard></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><a id=comments></a><div class=row><div class=col-md-12><div id=disqus_thread></div></div></div><script type=text/javascript async>var disqus_shortname='blog-bitix';var disqus_identifier='https:\/\/picodotdev.github.io\/blog-bitix\/2017\/11\/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java\/';var disqus_url='https:\/\/picodotdev.github.io\/blog-bitix\/2017\/11\/ejemplo-de-graphql-para-una-interfaz-de-un-servicio-con-spring-boot-y-java\/';var disqus_script='embed.js';(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.disqus.com/'+disqus_script;(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);}());</script></div><div class="col-12 col-lg-4"><div class=row><div class="col-md-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:300px;height:600px data-ad-client=ca-pub-3533636310991304 data-ad-slot=9559414587 data-type=large-skycraper></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class=row><div class="col-md-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:336px;height:280px data-ad-client=ca-pub-3533636310991304 data-ad-slot=2873752587 data-type=large-rectangle></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class="row text-center banner"><div class=col-12><a href=https://picodotdev.github.io/blog-bitix/2015/12/yo-apoyo-al-software-libre-tu-tambien/><img src=//static.fsf.org/nosvn/images/badges/badges_es/i-support-fs_red-bg-es.png alt="Yo apoyo al software libre"></a></div></div><div class=row><div class=col-md-12><hr></div></div><div class=row><div class=col-md-12><ul class="list-unstyled recents"><li><span class="glyphicon glyphicon-hand-right"></span><a href=archive/>Más artículos recientes en el archivo</a></li></ul></div></div></div></div><div class=row><div class=col-12><hr></div></div><footer><div class=row><div class="col-12 col-sm-4"><p><strong>Blog Bitix</strong></p><p>Blog dedicado a la distribución GNU/Linux que uso habitualmente, Arch Linux, a mis andanzas alrededor del software libre, la programación y a otros temas relacionados con la tecnología y la informática.</p><p>Publicando de uno a tres artículos únicos a la semana desde el año 2010.</p></div><div class="col-12 col-sm-4 text-center menu"><ul class=list-unstyled><li><a href=/blog-bitix/tags/java/>Java</a></li><li><a href=/blog-bitix/tags/gnu-linux/>GNU/Linux</a></li><li><a href=/blog-bitix/tags/javascript/>JavaScript</a></li><li><a href=/blog-bitix/tags/tapestry/>Tapestry</a></li><li><a href=/blog-bitix/archive/>Archivo y hemeroteca</a></li><li><a href=/blog-bitix/pages/links/>Enlaces</a></li><li><a href=/blog-bitix/pages/advertising/>Publicidad</a></li><li><a href=/blog-bitix/pages/donate/>Donaciones</a></li><li><a href=/blog-bitix/pages/about/>Acerca de...</a></li></ul></div><div class="col-12 col-sm-4 text-center links"><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class=row><div class=col-12>Copyleft <span class=copyleft>&copy;</span> 2019 - <a href=https://creativecommons.org/licenses/by-sa/4.0/ rel=nofollow rel=license><img alt="Licencia de Creative Commons" title="Licencia de Creative Commons" style=border-width:0 src=https://licensebuttons.net/l/by-sa/4.0/80x15.png class=licencia></a><br><a href=https://twitter.com/blogstackinfo rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/blog-stack.png alt="Blog Stack" title="Blog Stack"></a>
<a href=https://www.planetacodigo.com/ rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/planeta-codigo.png alt="Planeta código" title="Planeta código"></a><br><span xmlns:dct=http://purl.org/dc/terms/ property=dct:title><a href=https://picodotdev.github.io/blog-bitix/ rel=nofollow>Blog Bitix</a></span> by <a xmlns:cc=https://creativecommons.org/ns# href=https://picodotdev.github.io/blog-bitix/ property=cc:attributionName rel=cc:attributionurl>pico.dev</a> is licensed under a <a rel=license href=https://creativecommons.org/licenses/by-sa/4.0/>Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional License</a>.<br><span class=credit>Powered by <a href=https://gohugo.io/ rel=nofollow title="A fast and modern static website engine">Hugo</a> and <a href=https://pages.github.com/ title="Websites for you and your projects">GitHub Pages</a>.</span>
<span class=credit>Background patterns from <a href=https://www.toptal.com/designers/subtlepatterns/ rel=nofollow>Subtle Patterns</a>.</span></div></div></footer></div><div class=blueimp-gallery-container><div id=blueimp-gallery class="blueimp-gallery blueimp-gallery-controls" data-use-bootstrap-modal=false><div class=slides></div><h3 class=title></h3><a class=prev>‹</a>
<a class=next>›</a>
<a class=close>×</a>
<a class=play-pause></a><ol class=indicator></ol><div class="modal fade"><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close aria-hidden=true>&times;</button><h4 class=modal-title></h4></div><div class="modal-body next"></div><div class=modal-footer><button type=button class="btn btn-default pull-left prev">
<i class="glyphicon glyphicon-chevron-left"></i>Anterior</button>
<button type=button class="btn btn-primary next">
Siguiente
<i class="glyphicon glyphicon-chevron-right"></i></button></div></div></div></div></div></div><script type=text/javascript>window.cookieconsent_options={"message":"Esta bitácora te informa de la obviedad de que utiliza «cookies», propias y de servicios como Google Analytics y Google AdSense entre otros.","dismiss":"Aceptar","learnMore":"Más información","link":null,"theme":"dark-bottom"};</script><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js async></script></body></html>
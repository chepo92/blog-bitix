<!doctype html><html lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=picodotdev><meta name=keywords content="java,programacion,software,hardware,tapestry,software libre,gnu,linux,gnu/linux,unix,arch,arch linux,html,css,javascript"><meta name=description content="La última versión mayor de Java fue publicada en el año 2014, hace ya mucho tiempo para la época actual donde las cosas avanzan a un ritmo muy rápido. Java 8 introdujo en el lenguaje notables cambios como las expresiones lambda dotándolo de capacidades funcionales y mayor expresividad en menos líneas de código junto con referencias a métodos e interfaces funcionales que permite crear implementaciones anónimas de interfaces con una lambda, se añaden los streams como nueva forma de iterar sobre las colecciones, interfaces con métodos por defecto o estáticos que aumentan la compatibilidad hacia atrás que siempre se le ha dado gran importancia en la plataforma o una nueva API para fechas que solventa las deficiencias de la anterior. &hellip;"><base href=https://picodotdev.github.io/blog-bitix/><title>Novedades de Java 9, más allá de la modularidad</title><link rel=author type=text/plain href=humans.txt><link rel="shortcut icon" href=assets/favicon.ico><link rel=apple-touch-icon-precomposed sizes=144x144 href=assets/apple-touch-icon-144-precomposed.png><link rel=canonical href=https://picodotdev.github.io/blog-bitix/2017/09/novedades-de-java-9-mas-alla-de-la-modularidad/><link href=index.xml rel=alternate type=application/rss+xml title="Blog Bitix"><link rel=stylesheet type=text/css href="//fonts.googleapis.com/css?family=PT+Serif:400,700italic,700,400italic"><link rel=stylesheet type=text/css href=assets/libs/bootstrap-4.0.0/css/bootstrap.min.css><link rel=stylesheet type=text/css href=assets/libs/Gallery-2.30.0/css/blueimp-gallery.min.css><link rel=stylesheet type=text/css href=assets/css/syntax.css><link rel=stylesheet type=text/css href=assets/css/main.css><script src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js async></script><script type=text/javascript>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:'ca-pub-3533636310991304',enable_page_level_ads:true});</script><script type=text/javascript async>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-12874075-4','picodotdev.github.io');ga('send','pageview');</script><script type=text/javascript src=assets/libs/require.js></script><script type=text/javascript src=assets/js/main.js></script><script type=text/javascript src=assets/js/theme.js async></script><script type=text/javascript src="//platform-api.sharethis.com/js/sharethis.js#property=5920c4ce1bd0670011e06acd&product=inline-share-buttons" async></script><script type=text/javascript src=assets/js/app.js async></script></head><body><div class=container><div class=row><div class=col><header><div class=row><div class="col-12 col-lg-4"></div><div class="col-12 col-lg-4"><h2 class=title><a href=https://picodotdev.github.io/blog-bitix/>Blog Bitix</a></h2><div class=links><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class="col-12 col-lg-4 text-center"><form name=query class="form-inline search" onsubmit="return false;"><div class=input-group><input type=text name=q class=form-control placeholder="Buscar en Blog Bitix">
<span class=input-group-btn><button class="btn btn-secondary" type=submit>Buscar</button></span></div></form><form name=search action=https://duckduckgo.com/ method=get class=hidden data-site=https://picodotdev.github.io/blog-bitix/><input type=hidden name=q></form></div></div><div class=row><div class=col-12><nav class="nav nav-pills nav-fill"><a href=/blog-bitix/tags/java/ class="nav-item nav-link">Java</a>
<a href=/blog-bitix/tags/gnu-linux/ class="nav-item nav-link">GNU/Linux</a>
<a href=/blog-bitix/tags/javascript/ class="nav-item nav-link">JavaScript</a>
<a href=/blog-bitix/tags/tapestry/ class="nav-item nav-link">Tapestry</a>
<a href=/blog-bitix/archive/ class="nav-item nav-link">Archivo y hemeroteca</a>
<a href=/blog-bitix/pages/links/ class="nav-item nav-link">Enlaces</a>
<a href=/blog-bitix/pages/about/ class="nav-item nav-link">Acerca de...</a></nav></div></div></header></div></div><div class=row><div class="col-12 col-lg-8"><div class=row><div class=col-12><article itemscope itemtype=http://schema.org/BlogPosting><meta itemprop=inLanguage content=es><meta itemprop=keywords content="blog-stack, java, planeta-codigo, programacion"><h1 itemprop=name>Novedades de Java 9, más allá de la modularidad</h1><p class=information>Escrito por <span itemscope itemtype=http://schema.org/Person><span itemprop=name>picodotdev</span></span> el <time itemprop=datePublished datetime=2017-09-24>24/09/2017</time>, actualizado el <time itemprop=dateModified datetime=2017-10-07>07/10/2017</time>.<br><a href=tags/blog-stack/>blog-stack</a> <a href=tags/java/>java</a> <a href=tags/planeta-codigo/>planeta-codigo</a> <a href=tags/programacion/>programacion</a><br><a href=/blog-bitix/2017/09/novedades-de-java-9-mas-alla-de-la-modularidad/ itemprop=url>Enlace permanente</a>
<a href=/blog-bitix/2017/09/novedades-de-java-9-mas-alla-de-la-modularidad/#comments>Comentarios</a></p><p class=summary itemprop=about>La modularidad introducida en Java 9 no es la única novedad incorporada en esta nueva versión. Aunque haya llegado a eclipsar al resto hay otra buena colección de mejoras que sin duda facilitarán la programación con uno de los lenguajes más empleados por los programadores aún después de más de 20 años.</p><ins class=adsbygoogle style=display:inline-block;width:728px;height:90px data-ad-client=ca-pub-3533636310991304 data-ad-slot=5966819782 data-type=leaderboard></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><div class=content itemprop=articleBody><meta itemprop=wordCount content=2067><div class=logotypes style=float:right><img src=assets/images/logotipos/java.svg class=right width=200 alt=Java title=Java></div><p>La última versión mayor de Java fue publicada en el año 2014, hace ya mucho tiempo para la época actual donde las cosas avanzan a un ritmo muy rápido. <a href=https://picodotdev.github.io/blog-bitix/2014/03/novedades-y-nuevas-caracteristicas-de-java-8/>Java 8 introdujo en el lenguaje notables cambios</a> como las expresiones <em>lambda</em> dotándolo de capacidades funcionales y mayor expresividad en menos líneas de código junto con referencias a métodos e interfaces funcionales que permite crear implementaciones anónimas de interfaces con una <em>lambda</em>, se añaden los <em>streams</em> como nueva forma de iterar sobre las colecciones, interfaces con métodos por defecto o estáticos que aumentan la compatibilidad hacia atrás que siempre se le ha dado gran importancia en la plataforma o una nueva API para fechas que solventa las deficiencias de la anterior. Grandes cambios en el lenguaje tan importantes como los que supusieron Java 5.</p><p>Después de algunos aplazamientos principalmente por implementar la modularización de la forma correcta sin que en un futuro suponga un problema ha sido publicada en septiembre de 2017 la versión de Java 9. La característica más llamativa es <a href=https://picodotdev.github.io/blog-bitix/2017/09/novedades-y-nuevas-caracteristicas-de-java-9-los-modulos/>la modularización de la plataforma con Java 9</a> que supone grandes mejoras como una mejor encapsulación de los paquetes, interfaces entre módulos bien definidas y dependencias explícitas que proporcionan optimización al usarse sólo los módulos que se necesitan, mayor seguridad al ser menor la superficie de ataque y configuración confiable al comprobar las dependencias al compilar o iniciarse la máquina virtual.</p><p>Pero Java 9 además de los módulos incorpora en la plataforma otros cambios destacables. Esta no es una lista exhaustiva pero si contiene muchas de ellas.</p><ul><li><a href=https://docs.oracle.com/javase/9/index.html>Oracle JDK 9 Documentation</a></li><li><a href=https://docs.oracle.com/javase/9/whatsnew/toc.htm>What’s New in Oracle JDK 9</a></li><li><a href=https://docs.oracle.com/javase/9/javase-docs.htm>Guías descargables con documentación del JDK 9</a></li><li><a href=https://www.oracle.com/java/java9-screencasts.html>Varios <em>screencasts</em> sobre varias de las novedades de Java 9</a></li><li><a href=http://www.javamagazine.mozaicreader.com/SeptOct2017/Twitter>Java Magazine Sep/Oct 2017</a></li></ul><div class=media style=text-align:center><figure><a href=assets/images/posts/2017/264/tabla-novedades-java-9.jpg title="Tabla de novedades de Java 9" data-gallery><img src=assets/images/posts/2017/264/tabla-novedades-java-9-thumb.jpg></a><figcaption>Tabla de novedades de Java 9</figcaption></figure></div><div class=media style=text-align:center><img src=assets/images/posts/2017/264/duke-java-9.png width=300 alt="Duke Java 9" title="Duke Java 9"></div><h3 id=métodos-factoría-para-colecciones>Métodos factoría para colecciones</h3><p>Aún Java no incorpora en el lenguaje una forma de definir como literales elementos tan comunes como listas, conjuntos o mapas. Como alternativa se proporcionan métodos factoría estáticos para crear este tipo de estructuras de datos usando métodos por defecto en sus respectivas interfaces. Además, estos métodos crean colecciones inmutables.</p><p>Aparte de definir este tipo de colecciones de una forma mucho más sencilla que hasta Java 8, las colecciones además son significativamente más eficientes. En el caso de Java 8 un <em>Set</em> con dos elementos de capacidad 3 requiere un objeto <em>wrapper</em> para la colección inmodificable, 1 <em>HashSet</em>, 1 <em>HashMap</em>, 1 Object[] de longitud 3, 2 dos nodos uno para cada elemento requiriendo en total unos 152 bytes. En el caso de Set creado con Java 9 requiere solo 20 bytes que comparados con los 152 es una mejora significativa más al tener en cuenta que este tipo de estructuras de datos son utilizadas de forma numerosa en cualquier programa. Aún estando hablando de bytes multiplicado por cada uso en algunos casos la reducción de memoria puede ser apreciable.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=c1>// Java 8
</span><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>unmodifiableList</span><span class=o>(</span><span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=s>&#34;a&#34;</span><span class=o>,</span> <span class=s>&#34;b&#34;</span><span class=o>,</span> <span class=s>&#34;c&#34;</span><span class=o>));</span>

<span class=n>Set</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>set</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>unmodifiableSet</span><span class=o>(</span><span class=k>new</span> <span class=n>HashSet</span><span class=o>&lt;&gt;(</span><span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=s>&#34;a&#34;</span><span class=o>,</span> <span class=s>&#34;b&#34;</span><span class=o>,</span> <span class=s>&#34;c&#34;</span><span class=o>)));</span>

<span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Integer</span><span class=o>&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
<span class=n>map</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;a&#34;</span><span class=o>,</span> <span class=n>1</span><span class=o>);</span>
<span class=n>map</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;b&#34;</span><span class=o>,</span> <span class=n>2</span><span class=o>);</span>
<span class=n>map</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;c&#34;</span><span class=o>,</span> <span class=n>3</span><span class=o>);</span>
<span class=n>map</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>unmodifiableMap</span><span class=o>(</span><span class=n>map</span><span class=o>);</span>

<span class=c1>// Java 9
</span><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>List</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=s>&#34;a&#34;</span><span class=o>,</span> <span class=s>&#34;b&#34;</span><span class=o>,</span> <span class=s>&#34;c&#34;</span><span class=o>);</span>
 
<span class=n>Set</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>set</span> <span class=o>=</span> <span class=n>Set</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=s>&#34;a&#34;</span><span class=o>,</span> <span class=s>&#34;b&#34;</span><span class=o>,</span> <span class=s>&#34;c&#34;</span><span class=o>);</span>
 
<span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Integer</span><span class=o>&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=n>Map</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=s>&#34;a&#34;</span><span class=o>,</span> <span class=n>1</span><span class=o>);</span>
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/09/novedades-de-java-9-mas-alla-de-la-modularidad/code/Collections.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/09/novedades-de-java-9-mas-alla-de-la-modularidad/code/Collections.java target=_blank>Collections.java</a></div></div><div class="media media-video" style=text-align:center><iframe width=640 height=360 src="//players.brightcove.net/1460825906/VkKNQZg6x_default/index.html?videoId=5582422289001" allowfullscreen frameborder=0></iframe></div><h3 id=mejoras-en-la-clase-optional>Mejoras en la clase <em>Optional</em></h3><p>Los métodos <a href=https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#or-java.util.function.Supplier->or()</a> y <a href=https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#ifPresentOrElse-java.util.function.Consumer-java.lang.Runnable->ifPresentOrElse()</a> así como <a href=https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#stream-->stream()</a> mejoran la experiencia de uso en esta clase que contiene o no un objeto. El método <em>or()</em> en caso de no contener el <em>Optional</em> un objeto permite proporcionar un <em>Optional</em> alternativo. Los métodos <em>ifPresent()</em> y <em>ifPresentOrElse()</em> permiten realizar una acción con el objeto del opcional si está presente u otra acción con un valor vacío si no está presente. El método <em>stream()</em> convierte el <em>Optional</em> en un <em>stream</em> de cero o un elemento.</p><h3 id=mejoras-en-la-api-de-streams>Mejoras en la API de <em>streams</em></h3><p>Los nuevos métodos de los <em>streams</em> <a href=https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#dropWhile-java.util.function.Predicate->dropWhile()</a>, <a href=https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#takeWhile-java.util.function.Predicate->takeWhile()</a> permiten descartar o tomar elementos del <em>stream</em> mientras se comprueba una condición. El método <a href=https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#ofNullable-T->ofNullable()</a> devuelve un <em>stream</em> de un elemento o vacío dependiendo de si el objeto es <em>null</em> o no. Los métodos <a href=https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#iterate-T-java.util.function.Predicate-java.util.function.UnaryOperator->iterate()</a> permiten generar un secuencia de valores similar a un bucle <em>for</em>.</p><h3 id=repl-con-jshell>REPL con jshell</h3><p>Otra de las características destacables es la incorporación de <a href=https://picodotdev.github.io/blog-bitix/2017/09/jshell-la-herramienta-repl-incorporada-en-java-9/>la herramienta JShell</a> para evaluar código siguiendo el patrón <em>Read-Evaluate-Print-Loop</em> o REPL para hacer pruebas de código sin la necesidad de un IDE, una herramienta de construcción o toda la infraestructura de un proyecto. Esta herramienta es el comando <em>jshell</em>.</p><p>Se pueden introducir expresiones que son evaluadas y comandos precedidos por el caracter <em>/</em>. Soporta asistencia de código con la tecla tabulador.</p><ul><li><a href=https://docs.oracle.com/javase/9/jshell/introduction-jshell.htm#JSHEL-GUID-630F27C8-1195-4989-9F6B-2C51D46F52C8>Guía de usuario de jshell</a></li></ul><div class=media style=text-align:center><figure><a href=assets/images/posts/2017/264/jshell.png title=jshell data-gallery><img src=assets/images/posts/2017/264/jshell-thumb.png></a><figcaption>jshell</figcaption></figure></div><div class="media media-video" style=text-align:center><iframe width=640 height=360 src="//players.brightcove.net/1460825906/VkKNQZg6x_default/index.html?videoId=5582429016001" allowfullscreen frameborder=0></iframe></div><h3 id=jlink-para-generar-runtimes-mínimos>jlink para generar <em>runtimes</em> mínimos</h3><p>Java 8 proporciona varios <em>runtimes</em> reducidos con los <em>compact profiles</em> que contienen algunas clases menos de las que incluye el JDK completo. Sin embargo, estos <em>runtimes</em> están preconfigurados y las aplicaciones deben optar por el que ofrezca todas las clases que necesita.</p><p>En Java 9 se proporciona <a href=http://openjdk.java.net/jeps/282>jlink</a> que un sustituto más capaz que los <em>compact profiles</em>. Permite generar <em>runtimes</em> aprovechando la nueva modularidad del JDK con únicamente los módulos que necesite la aplicación.</p><p>Esto es especialmente útil para los contenedores de <a href=https://www.docker.com/>Docker</a> y los entornos <em>cloud</em> ya que permite generar imágenes de contenedores con un tamaño significativamente menor. Por ejemplo, una imagen de Docker basada en la distribución <a href=https://www.alpinelinux.org/>Alpine Linux</a> con el JDK completo ocupa unos 360 MiB, con <em>jlink</em> si una aplicación solo necesita del módulo <em>java.base</em> se puede generar un <em>runtime</em> con únicamente ese módulo, con este <em>runtime</em> adaptado la imagen del contenedor tiene un tamaño mucho menor, en este caso de únicamente de unos 40 MiB.</p><div class="media media-video" style=text-align:center><iframe width=640 height=360 src="//players.brightcove.net/1460825906/VkKNQZg6x_default/index.html?videoId=5582437011001" allowfullscreen frameborder=0></iframe></div><h3 id=concurrencia>Concurrencia</h3><p>Se añade un <em>framework</em> con un conjunto de clases para programación reactiva de publicación-subscripción con las clases <a href=https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/Flow.html>Flow</a>, <a href=https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/Flow.Processor.html>Flow.Processor</a>, <a href=https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/Flow.Subscriber.html>Flow.Subscriber</a>, <a href=https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/Flow.Processor.html>Flow.Publisher</a> y <a href=https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/Flow.Processor.html>Flow.Subscription</a>. La clase <em>Subsription</em> posee dos métodos: <a href=https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/Flow.Subscription.html#cancel-->cancel()</a> y <a href=https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/Flow.Subscription.html#request-long->request()</a> para dejar de recibir mensajes y solicitar recibir <em>n</em> mensajes en la siguientes llamadas de <a href=https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/Flow.Subscriber.html#onNext-T->onNext​()</a>.</p><p>El método <a href=https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/CompletableFuture.html#copy-->copy()</a> de la clase <a href=https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/CompletableFuture.html>CompletableFuture</a> permite obtener un copia completándose con el mismo valor cuando la operación se completa normalmente.</p><h3 id=variable-handles>Variable Handles</h3><p>Una de las justificaciones de la modularidad es el uso que hasta ahora se le ha dado a la famosa clase interna del JDK <em>sun.misc.Unsafe</em>. Para proporcionar parte de la funcionalidad de esta clase en una API pública se introduce la clase <a href=https://docs.oracle.com/javase/9/docs/api/java/lang/invoke/VarHandle.html>VarHandle</a> para referenciar a variables estáticas y no estáticas así como a <em>arrays</em>. Estas instancias se obtienen mediante la clase <a href=https://docs.oracle.com/javase/9/docs/api/java/lang/invoke/MethodHandles.Lookup.html>MethodHandle.Lookup</a>. Una vez obtenida una instancia de <em>VarHandle</em> se pueden realizar operaciones de bajo nivel sobre la variable que referencia como operaciones atómicas comparar y establecer pero sin la sobrecarga de rendimiento con las clases equivalentes del paquete <a href=https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/atomic/package-summary.html>java.util.concurrent.atomic</a>.</p><p>Para la mayoría de los programadores esto no les afectará directamente pero sí será una mejora para los desarrolladores de librerías importantes muy populares que si usan la clase <em>Unsafe</em> y deberían aprovechar estas nuevas capacidades para dejar de usar la clase interna del JDK en la medida de lo posible.</p><h3 id=actualizaciones-en-la-api-para-procesos>Actualizaciones en la API para procesos</h3><p>Ahora es posible obtener el identificador del proceso o <em>pid</em> con el método <a href=https://docs.oracle.com/javase/9/docs/api/java/lang/Process.html#pid-->pid()</a> y los procesos hijos y descendientes con los métodos <a href=https://docs.oracle.com/javase/9/docs/api/java/lang/Process.html#children-->children​()</a> y <a href=https://docs.oracle.com/javase/9/docs/api/java/lang/Process.html#descendants-->descendants​()</a> respectivamente.</p><h3 id=stackwalker>StackWalker</h3><p>La clase <a href=https://docs.oracle.com/javase/9/docs/api/java/lang/StackWalker.html>StackWalker</a> permite obtener un <em>stream</em> secuencial de <a href=https://docs.oracle.com/javase/9/docs/api/java/lang/StackWalker.StackFrame.html>StackWalker.StackFrames</a> del <em>thread</em> actual para procesar la pila de llamadas o <em>stacktrace</em>.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=n>StackWalker</span><span class=o>.</span><span class=na>getInstance</span><span class=o>().</span><span class=na>walk</span><span class=o>(</span><span class=n>s</span> <span class=o>-&gt;</span> <span class=n>s</span><span class=o>.</span><span class=na>limit</span><span class=o>(</span><span class=n>5</span><span class=o>).</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>()));</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/09/novedades-de-java-9-mas-alla-de-la-modularidad/code/StackWalker.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/09/novedades-de-java-9-mas-alla-de-la-modularidad/code/StackWalker.java target=_blank>StackWalker.java</a></div></div><h3 id=strings-compactos>Strings compactos</h3><p>Internamente los la clase <a href=https://docs.oracle.com/javase/9/docs/api/java/lang/String.html>String</a> contiene un array de <em>char</em>, cada <em>char</em> se representa en formato con la codificación UTF-8 ocupando 16 bits o 2 bytes por cada caracter. Para cadenas en aquellos lenguajes como inglés los caracteres pueden ser representados usando un único <em>byte</em>.</p><p>Una buena parte de la memoria ocupada en la JVM por cualquier aplicación es debido a las cadenas de modo que tiene sentido compactar aquellas cadenas en las que sea posible representándolas con un único <em>byte</em> por caracter.</p><p>Lo mejor de todo es que esta optimización será transparente para los programadores y para las aplicaciones proporcionando una reducción en el uso de la memoria y aumento del rendimiento, también en el recolector de basura.</p><ul><li><a href=https://www.javagists.com/compact-strings-java-9>Compact Strings In Java 9</a></li></ul><h3 id=recolector-de-basura-g1-por-defecto>Recolector de basura G1 por defecto</h3><p>Se cambia el recolector de basura por defecto al llamado <em>G1</em> optimizado para una balance adecuado entre alto rendimiento y baja latencia. En los siguientes artículos se explica de forma más detallada. Al igual que los <em>string</em> compactos para la mayoría de los programadores será un cambio transparente que no tenga repercusión en la forma de programar las aplicaciones.</p><ul><li><a href=https://www.oracle.com/technetwork/tutorials/tutorials-1876574.html>Getting Started with the G1 Garbage Collector</a></li><li><a href=https://www.infoq.com/articles/Make-G1-Default-Garbage-Collector-in-Java-9>Case for Defaulting to G1 Garbage Collector in Java 9</a></li></ul><div class="media media-video" style=text-align:center><iframe width=640 height=360 src="//players.brightcove.net/1460825906/VkKNQZg6x_default/index.html?videoId=5582428191001" allowfullscreen frameborder=0></iframe></div><h3 id=identificador-para-variables>Identificador para variables _</h3><p>El identificador <em>_</em> queda reservado para en un futuro usarlo en parámetros a los que no se les dé un uso y no sean relevantes como por ejemplo en las <em>lambdas</em>. También se evaluará en el <a href=http://openjdk.java.net/projects/amber/>proyecto Amber</a> usar este identificador para tipos diamante parciales como <em>Foo&lt;String, _&gt;</em> o en referencias a métodos <em>foo.&lt;String, _&gt;bar()</em>.</p><ul><li><a href=http://blog.takipi.com/project-amber-the-future-of-java-exposed/>Project Amber: The Future of Java Exposed</a></li></ul><h3 id=métodos-privados-en-interfaces>Métodos privados en interfaces</h3><p>Ahora se pueden crear métodos privados en interfaces como utilidad a las implementaciones de los métodos por defecto.</p><h3 id=mejor-try-with-resource>Mejor <em>try-with-resource</em></h3><p>Ahora las variables finales o efectivamente finales pueden ser colocadas en los bloques <em>try-with-resource</em> simplificando algunos usos.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=c1>// A final resource
</span><span class=c1></span><span class=kd>final</span> <span class=n>Resource</span> <span class=n>resource1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Resource</span><span class=o>(</span><span class=s>&#34;resource1&#34;</span><span class=o>);</span>
<span class=c1>// An effectively final resource
</span><span class=c1></span><span class=n>Resource</span> <span class=n>resource2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Resource</span><span class=o>(</span><span class=s>&#34;resource2&#34;</span><span class=o>);</span>

<span class=c1>// Java 7, 8
</span><span class=c1></span><span class=k>try</span> <span class=o>(</span><span class=n>Resource</span> <span class=n>r1</span> <span class=o>=</span> <span class=n>resource1</span><span class=o>;</span>
     <span class=n>Resource</span> <span class=n>r2</span> <span class=o>=</span> <span class=n>resource2</span><span class=o>)</span> <span class=o>{</span>
    <span class=o>...</span>
<span class=o>}</span>

<span class=c1>// New and improved try-with-resources statement in Java SE 9
</span><span class=c1></span><span class=k>try</span> <span class=o>(</span><span class=n>resource1</span><span class=o>;</span>
     <span class=n>resource2</span><span class=o>)</span> <span class=o>{</span>
    <span class=o>...</span>
<span class=o>}</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/09/novedades-de-java-9-mas-alla-de-la-modularidad/code/TryWithResources.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/09/novedades-de-java-9-mas-alla-de-la-modularidad/code/TryWithResources.java target=_blank>TryWithResources.java</a></div></div><h3 id=javadoc>Javadoc</h3><p>Ahora la documentación Javadoc se genera con marcado de HTML 5 e incluye un cuadro de búsqueda para encontrar más fácilmente tipos y métodos.</p><div class=media style=text-align:center><figure><a href=assets/images/posts/2017/264/javadoc.png title=Javadoc data-gallery><img src=assets/images/posts/2017/264/javadoc-thumb.png></a><figcaption>Javadoc</figcaption></figure></div><h3 id=archivos-jar-multiversión>Archivos Jar multiversión</h3><p>Los desarrolladores de librerías para dar soporte a varias versiones de Java debían optar entre generar un artefacto para cada versión o un único archivo <em>jar</em> limitándose a usar la mínima versión soportada y sin aprovechar las nuevas capacidades de siguientes versiones. Esto es un impedimento para el uso de nuevas versiones.</p><p>Con Java 9 se puede generar un único archivo <em>jar</em> con algunas clases para una o varias versiones de Java. Por ejemplo, en un archivo <em>jar</em> con las clases <em>A</em>, <em>B</em>, <em>C</em> y <em>D</em> compatibles con Java 6 el desarrollador ahora puede decidir que para la versión 9 la clase <em>A</em> y <em>B</em> sean unas optimizadas para esta versión. Esto se consigue con una estructura específica de directorios en el archivo <em>jar</em>, ubicándose la clase optimizada para Java 9 <em>A</em> en <em>META-INF/versions/9/A.class</em> y para Java 10 en <em>META-INF/versions/10/A.class</em>.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Plaintext data-lang=Plaintext>jar root
  - A.class
  - B.class
  - C.class
  - D.class
  - META-INF
     - versions
        - 9
           - A.class
           - B.class
        - 10
           - A.class</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/09/novedades-de-java-9-mas-alla-de-la-modularidad/code/Multirelease.out target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/09/novedades-de-java-9-mas-alla-de-la-modularidad/code/Multirelease.out target=_blank>Multirelease.out</a></div></div><ul><li><a href=http://openjdk.java.net/jeps/238>JEP 238: Multi-Release JAR Files</a></li></ul><h3 id=nuevo-modelo-de-publicación>Nuevo modelo de publicación</h3><p>A partir de la publicación de Java 9 se cambia el modelo de publicación de nuevas versiones optando por una basada en calendario en vez de una por características a incluir. El caso de versiones que han de incluir las características previstas ocasiona el problema que si una se retrasa provoca un retraso en la versión. Con el modelo basado en fechas fijas preestablecidas la versión se liberará con aquellas características que estén listas en la fecha planificada de publicación sin ser retrasadas por aquellas que no.</p><p>Se ha optado por producir una nueva versión cada seis meses con el <a href=http://openjdk.java.net/>OpenJDK</a> y <a href=https://www.gnu.org/licenses/gpl.html>licencia GPL</a> para satisfacer las necesidades de los desarrolladores y una versión con soporte de largo plazo cada tres años para satisfacer las necesidades de tiempo de soporte prolongado de las empresas, <em>Oracle JDK</em>.</p><div class="media media-video" style=text-align:center><iframe width=640 height=360 src="//players.brightcove.net/1460825906/VkKNQZg6x_default/index.html?videoId=5582439790001" allowfullscreen frameborder=0></iframe></div><p>Para finalizar un par de libros, <a href=http://amzn.to/2g0qu6t>Java 9 Revealed</a> y <a href=http://amzn.to/2fY3wwT>Java 9 Modularity Revealed</a> que explican detalladamente las novedades de la modularidad, las novedades incluídas en este artículo y algunas otras más.</p><div class=media-amazon style=text-align:center><iframe style=width:120px;height:240px marginwidth=0 marginheight=0 scrolling=no frameborder=0 src="//rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=blobit-21&o=30&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=1484225910&linkId=9c7874501bb32fa3318e285022e0207a"></iframe>
<iframe style=width:120px;height:240px marginwidth=0 marginheight=0 scrolling=no frameborder=0 src="//rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=blobit-21&o=30&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=1484227123&linkId=59d96101c25f9c16c4427b8ee9daef1a"></iframe></div><p>Y unos buenos vídeos sobre las nuevas características de Java 9, uno en español y otro en inglés.</p><div class="media media-video" style=text-align:center><iframe width=640 height=360 src=https://www.youtube.com/embed/CkmB86pCV6A frameborder=0 allowfullscreen></iframe>
<iframe width=640 height=360 src=https://www.youtube.com/embed/9EiLRD95zDg frameborder=0 allowfullscreen></iframe></div><div class=reference>Referencia:<br><ul><li><a href=https://zeroturnaround.com/rebellabs/the-best-java-9-language-and-api-improvements/>The best Java 9 Language and API improvements</a></li><li><a href=https://jaxenter.com/new-features-in-java-9-137344.html>New Java 9 features at a glance</a></li><li><a href=http://amzn.to/2ylsidI>Modern Java Recipes</a></li><li><a href=https://dzone.com/articles/try-with-resources-enhancement-in-java-9>Try-With-Resource Enhancements in Java 9</a></li><li><a href=http://www.javamagazine.mozaicreader.com/JulyAug2017/Twitter>Revista Java Magazine Jul/Aug 2017</a></li><li><a href=https://dzone.com/articles/java-9-and-intellij-idea>Java 9 and IntelliJ IDEA</a></li><li><a href=https://www.autentia.com/2017/09/13/java-9-mas-alla-de-la-modularidad/>Java 9 más allá de la modularidad</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/09/jshell-la-herramienta-repl-incorporada-en-java-9/>JShell la herramienta REPL incorporada en Java 9</a></li></ul></div></div></article></div></div><div class="row serie"><div class=col-md-12><h3>Este artículo forma parte de la serie <strong>java-platform</strong>:</h3><ol class=serie-articles><li><a href=https://picodotdev.github.io/blog-bitix/2014/03/novedades-y-nuevas-caracteristicas-de-java-8/>Novedades y nuevas características de Java 8</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2016/03/introduccion-y-nuevas-caracteristicas-de-java-ee-7/>Introducción y nuevas características de Java EE 7</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2016/04/aplicacion-de-ejemplo-usando-varias-especificaciones-de-java-ee-7/>Aplicación de ejemplo usando varias especificaciones de Java EE 7</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/09/novedades-y-nuevas-caracteristicas-de-java-9-los-modulos/>Novedades y nuevas características de Java 9, los módulos</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/09/novedades-de-java-9-mas-alla-de-la-modularidad/>Novedades de Java 9, más allá de la modularidad</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/03/novedades-de-java-10/>Novedades de Java 10</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/09/novedades-y-nuevas-caracteristicas-de-java-11/>Novedades y nuevas características de Java 11</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/11/novedades-de-java-ee-8/>Novedades de Java EE 8</a></li></ol></div></div><div class=row><div class=col-md-12><div class=sharethis-inline-share-buttons></div></div></div><div class=row><div class=col-12><ins class=adsbygoogle style=display:inline-block;width:728px;height:90px data-ad-client=ca-pub-3533636310991304 data-ad-slot=5966819782 data-type=leaderboard></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><a id=comments></a><div class=row><div class=col-md-12><div id=disqus_thread></div></div></div><script type=text/javascript async>var disqus_shortname='blog-bitix';var disqus_identifier='https:\/\/picodotdev.github.io\/blog-bitix\/2017\/09\/novedades-de-java-9-mas-alla-de-la-modularidad\/';var disqus_url='https:\/\/picodotdev.github.io\/blog-bitix\/2017\/09\/novedades-de-java-9-mas-alla-de-la-modularidad\/';var disqus_script='embed.js';(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.disqus.com/'+disqus_script;(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);}());</script></div><div class="col-12 col-lg-4"><div class=row><div class="col-md-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:300px;height:600px data-ad-client=ca-pub-3533636310991304 data-ad-slot=9559414587 data-type=large-skycraper></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class=row><div class="col-md-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:336px;height:280px data-ad-client=ca-pub-3533636310991304 data-ad-slot=2873752587 data-type=large-rectangle></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class="row text-center banner"><div class=col-12><a href=https://picodotdev.github.io/blog-bitix/2015/12/yo-apoyo-al-software-libre-tu-tambien/><img src=//static.fsf.org/nosvn/images/badges/badges_es/i-support-fs_red-bg-es.png alt="Yo apoyo al software libre"></a></div></div><div class=row><div class=col-md-12><hr></div></div><div class=row><div class=col-md-12><ul class="list-unstyled recents"><li><span class="glyphicon glyphicon-hand-right"></span><a href=archive/>Más artículos recientes en el archivo</a></li></ul></div></div></div></div><div class=row><div class=col-12><hr></div></div><footer><div class=row><div class="col-12 col-sm-4"><p><strong>Blog Bitix</strong></p><p>Blog dedicado a la distribución GNU/Linux que uso habitualmente, Arch Linux, a mis andanzas alrededor del software libre, la programación y a otros temas relacionados con la tecnología y la informática.</p><p>Publicando de uno a tres artículos únicos a la semana desde el año 2010.</p></div><div class="col-12 col-sm-4 text-center menu"><ul class=list-unstyled><li><a href=/blog-bitix/tags/java/>Java</a></li><li><a href=/blog-bitix/tags/gnu-linux/>GNU/Linux</a></li><li><a href=/blog-bitix/tags/javascript/>JavaScript</a></li><li><a href=/blog-bitix/tags/tapestry/>Tapestry</a></li><li><a href=/blog-bitix/archive/>Archivo y hemeroteca</a></li><li><a href=/blog-bitix/pages/links/>Enlaces</a></li><li><a href=/blog-bitix/pages/advertising/>Publicidad</a></li><li><a href=/blog-bitix/pages/donate/>Donaciones</a></li><li><a href=/blog-bitix/pages/about/>Acerca de...</a></li></ul></div><div class="col-12 col-sm-4 text-center links"><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class=row><div class=col-12>Copyleft <span class=copyleft>&copy;</span> 2019 - <a href=https://creativecommons.org/licenses/by-sa/4.0/ rel=nofollow rel=license><img alt="Licencia de Creative Commons" title="Licencia de Creative Commons" style=border-width:0 src=https://licensebuttons.net/l/by-sa/4.0/80x15.png class=licencia></a><br><a href=https://twitter.com/blogstackinfo rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/blog-stack.png alt="Blog Stack" title="Blog Stack"></a>
<a href=https://www.planetacodigo.com/ rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/planeta-codigo.png alt="Planeta código" title="Planeta código"></a><br><span xmlns:dct=http://purl.org/dc/terms/ property=dct:title><a href=https://picodotdev.github.io/blog-bitix/ rel=nofollow>Blog Bitix</a></span> by <a xmlns:cc=https://creativecommons.org/ns# href=https://picodotdev.github.io/blog-bitix/ property=cc:attributionName rel=cc:attributionurl>pico.dev</a> is licensed under a <a rel=license href=https://creativecommons.org/licenses/by-sa/4.0/>Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional License</a>.<br><span class=credit>Powered by <a href=https://gohugo.io/ rel=nofollow title="A fast and modern static website engine">Hugo</a> and <a href=https://pages.github.com/ title="Websites for you and your projects">GitHub Pages</a>.</span>
<span class=credit>Background patterns from <a href=https://www.toptal.com/designers/subtlepatterns/ rel=nofollow>Subtle Patterns</a>.</span></div></div></footer></div><div class=blueimp-gallery-container><div id=blueimp-gallery class="blueimp-gallery blueimp-gallery-controls" data-use-bootstrap-modal=false><div class=slides></div><h3 class=title></h3><a class=prev>‹</a>
<a class=next>›</a>
<a class=close>×</a>
<a class=play-pause></a><ol class=indicator></ol><div class="modal fade"><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close aria-hidden=true>&times;</button><h4 class=modal-title></h4></div><div class="modal-body next"></div><div class=modal-footer><button type=button class="btn btn-default pull-left prev">
<i class="glyphicon glyphicon-chevron-left"></i>Anterior</button>
<button type=button class="btn btn-primary next">
Siguiente
<i class="glyphicon glyphicon-chevron-right"></i></button></div></div></div></div></div></div><script type=text/javascript>window.cookieconsent_options={"message":"Esta bitácora te informa de la obviedad de que utiliza «cookies», propias y de servicios como Google Analytics y Google AdSense entre otros.","dismiss":"Aceptar","learnMore":"Más información","link":null,"theme":"dark-bottom"};</script><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js async></script></body></html>
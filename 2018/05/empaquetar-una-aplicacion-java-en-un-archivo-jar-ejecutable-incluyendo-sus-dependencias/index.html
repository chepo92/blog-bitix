<!doctype html><html lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="picodotdev"><meta name=keywords content="java,programacion,software,hardware,tapestry,software libre,gnu,linux,gnu/linux,unix,arch,arch linux,html,css,javascript"><meta name=description content="Las aplicaciones Java se distribuyen en uno o varios archivos jar. Si queremos facilitar la distribución de la aplicación con un único archivo jar existe la posibilidad de reempaquetar el jar de la aplicación y sus dependencias en tiempo de ejecución en un nuevo archivo jar que lo contenga todo, a este nuevo jar se le conoce como uberjar o fatjar. &mldr;"><base href=https://picodotdev.github.io/blog-bitix/><title>Empaquetar una aplicación Java en un archivo jar ejecutable incluyendo sus dependencias</title><link rel=author type=text/plain href=humans.txt><link rel="shortcut icon" href=assets/favicon.ico><link rel=apple-touch-icon-precomposed sizes=144x144 href=assets/apple-touch-icon-144-precomposed.png><link rel=canonical href=https://picodotdev.github.io/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/><link href=index.xml rel=alternate type=application/rss+xml title="Blog Bitix"><link rel=stylesheet type=text/css href=assets/css/font.css><link rel=stylesheet type=text/css href=assets/libs/bootstrap-4.3.1/css/bootstrap.min.css><link rel=stylesheet type=text/css href=assets/libs/Gallery-2.33.0/css/blueimp-gallery.min.css><link rel=stylesheet type=text/css href=assets/css/syntax.css><link rel=stylesheet type=text/css href=assets/css/main.css><script type=text/javascript src=assets/js/require-config.js data-main=js/main defer></script><script type=text/javascript src=assets/libs/require.js data-main=js/main defer></script><script src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js defer></script><script type=text/javascript defer>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:'ca-pub-3533636310991304',enable_page_level_ads:true});</script><script type=text/javascript defer>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-12874075-4','picodotdev.github.io');ga('send','pageview');</script><script type=text/javascript src="//platform-api.sharethis.com/js/sharethis.js#property=5920c4ce1bd0670011e06acd&product=inline-share-buttons" defer></script><script type=text/javascript src=assets/js/app.js defer></script></head><body><div class=container><div class=row><div class=col-12><header><div class=row><div class="col-12 col-lg-4"></div><div class="col-12 col-lg-4"><h2 class=title><a href=https://picodotdev.github.io/blog-bitix/>Blog Bitix</a></h2><div class=links><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class="col-12 col-lg-4 text-center"><form name=query class="form-inline search" onsubmit="return false;"><div class=input-group><input type=text name=q class=form-control placeholder="Buscar en Blog Bitix">
<span class=input-group-btn><button class="btn btn-secondary" type=submit>Buscar</button></span></div></form><form name=search action=https://duckduckgo.com/ method=get class=hidden data-site=https://picodotdev.github.io/blog-bitix/><input type=hidden name=q></form></div></div><div class=row><div class=col-12><nav class="nav nav-pills nav-fill"><a href=/blog-bitix/tags/java/ class="nav-item nav-link">Java</a>
<a href=/blog-bitix/tags/gnu-linux/ class="nav-item nav-link">GNU/Linux</a>
<a href=/blog-bitix/tags/javascript/ class="nav-item nav-link">JavaScript</a>
<a href=/blog-bitix/tags/tapestry/ class="nav-item nav-link">Tapestry</a>
<a href=/blog-bitix/archive/ class="nav-item nav-link">Archivo y hemeroteca</a>
<a href=/blog-bitix/pages/links/ class="nav-item nav-link">Enlaces</a>
<a href=/blog-bitix/pages/about/ class="nav-item nav-link">Acerca de...</a></nav></div></div></header></div></div><div class=row><div class="col-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:970px;height:250px data-ad-client=ca-pub-3533636310991304 data-ad-slot=2975854584 data-type=billboard></ins></div></div><div class=row><div class=col-12><div class="adblock-sidebar adblock-sidebar-right"><div class=adblock-sidebar-container><ins class="adsbygoogle adblock-sidebar-vertical" style=display:block data-ad-client=ca-pub-3533636310991304 data-ad-slot=9933840986 data-ad-format="vertical, rectangle" data-type=auto></ins></div></div><article itemprop=mainEntity itemscope itemtype=http://schema.org/BlogPosting><meta itemprop=inLanguage content="es"><meta itemprop=keywords content="java, planeta-codigo, programacion"><h1 itemprop=name>Empaquetar una aplicación Java en un archivo jar ejecutable incluyendo sus dependencias</h1><p class=information>Escrito por
<span itemprop=author itemscope itemtype=http://schema.org/Person><span itemprop=name>picodotdev</span></span> el <time itemprop=datePublished datetime=2018-05-26>26/05/2018</time>, actualizado el <time itemprop=dateModified datetime=2019-10-10>10/10/2019</time>.<br><a href=tags/java/>java</a> <a href=tags/planeta-codigo/>planeta-codigo</a> <a href=tags/programacion/>programacion</a><br><a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/ itemprop=url>Enlace permanente</a>
<a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/#comments>Comentarios</a></p><p class=summary itemprop=about>Las aplicaciones Java se distribuyen en uno o varios archivos <em>jar</em>. Si queremos facilitar la distribución de la aplicación con un único archivo <em>jar</em> existe la posibilidad de reempaquetar el <em>jar</em> de la aplicación y sus dependencias en tiempo de ejecución en un nuevo archivo <em>jar</em> que lo contenga todo, a este nuevo <em>jar</em> se le conoce como <em>uberjar</em> o <em>fatjar</em>.</p><div><ins class=adsbygoogle style=display:inline-block;width:728px;height:90px data-ad-client=ca-pub-3533636310991304 data-ad-slot=5966819782 data-type=leaderboard></ins></div><div class=content itemprop=articleBody><meta itemprop=wordCount content="1216"><div class=logotypes style=float:right><img src=assets/images/logotipos/java.svg class=right width=200 alt=Java title=Java></div><p>La forma de distribuir el código compilado a <em>bytecode</em> en Java es a través de archivos de extensión <em>jar</em>. Los archivos <em>jar</em> no son más que archivos comprimidos den formato <em>zip</em>. Si se les cambia de extensión y se descomprimen se extrae su contenido seguramente con una buena cantidad de archivos de extensión <em>class</em> que es la extensión para los archivos Java compilados a <em>bytecode</em> y que la máquina virtual interpreta para su ejecución. Las librerías que use la aplicación también se deben distribuir junto a esta para que funcione, por lo que la aplicación se distribuirá en forma de una colección de archivos <em>jar</em>.</p><p>Una aplicación distribuida en forma de múltiples archivos archivos <em>jar</em> se ejecuta con una línea de comandos como la siguiente en la que el parámetro <em>-cp</em> indica las ubicaciones donde se buscarán librerías <em>jar</em> y archivos <em>class</em> si se distribuyen de forma individual, el segundo parámetro indica la clase que contiene el método <em>main</em> que inicia la aplicación. Previamente hay que generar el artefacto del proyecto con <a href=https://gradle.org/>Gradle</a>.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ ./gradlew assemble
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/gradlew-assemble.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/gradlew-assemble.sh target=_blank>gradlew-assemble.sh</a></div></div><p>En este caso se trata de una aplicación que emite un arte en formato <em>ascii</em> en la terminal donde para cada linea se usa un color diferente mediante la librería <a href=https://github.com/fusesource/jansi>Jansi</a> que la aplicación tiene como dependencia.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ java -cp build/classes/java/main/:<span class=s2>&#34;build/dependencies/jansi-1.17.1.jar&#34;</span> io.github.picodotdev.blogbitix.uberjar.Main
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/java-cp.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/java-cp.sh target=_blank>java-cp.sh</a></div></div><div class=media style=text-align:center><figure><a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/images/java-classpath_huc5e97e866c8f221ce837f09f2c7241ed_30113_2560x1440_fit_box_2.png title="Aplicación de ejemplo ejecutada con classpath" data-gallery><img src=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/images/java-classpath_huc5e97e866c8f221ce837f09f2c7241ed_30113_650x450_fit_box_2.png width=650></a><figcaption>Aplicación de ejemplo ejecutada con classpath</figcaption></figure></div><p>Cuando la aplicación está contenida en un archivo <em>jar</em> y se ejecuta con la opción <em>-jar</em> se ignora el parámetro <em>-cp</em> y no se indica la clase <em>main</em> del punto de entrada de la aplicación. En el caso de las aplicaciones distribuidas en un archivo <em>jar</em> tanto la clase <em>main</em> como las dependencias se indican en un archivo de manifiesto incluido en el propio archivo <em>jar</em>. El archivo se ubica en <em>META-INF/MANIFEST.MF</em> dentro del <em>jar</em>, es un archivo de texto donde se indican varias propiedades en forma de atributo y valor, una en cada linea. Un ejemplo de archivo de manifiesto sería el siguiente:</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-plaintext data-lang=plaintext>Manifest-Version: 1.0
Created-By: picodotdev
Main-Class: io.github.picodotdev.blogbitix.uberjar.Main
Class-Path: jansi-1.17.1.jar</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/MANIFEST.MF target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/MANIFEST.MF target=_blank>MANIFEST.MF</a></div></div><p>La propiedad <em>Manifest-Version</em> y <em>Created-By</em> son informativas de la versión del archivo de manifiesto y el autor de la librería <em>jar</em>. La propiedad <em>Main-Class</em> indica la clase <em>main</em> de la librería o aplicación y la propiedad <em>Class-Path</em> es una lista separada por espacios de librerías adicionales. Las propiedades <em>Main-Class</em> y <em>Class-Path</em> son los parámetros que indicamos como parámetros en el comando <em>java</em> anterior. Con el archivo <em>jar</em>, su manifiesto y las librerías la aplicación Java se inicia de forma un poco más sencilla que antes al no tener que indicar ni la clase <em>main</em> ni el <em>classpath</em>.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ java -jar build/libs/JavaUberjar.jar
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/java-jar.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/java-jar.sh target=_blank>java-jar.sh</a></div></div><p>Como en este caso, si Java no se encuentra la dependencia de Jansi y se produce la siguiente excepción que indica que no se ha encontrado una clase necesaria.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-plaintext data-lang=plaintext>Exception in thread &#34;main&#34; java.lang.NoClassDefFoundError: org/fusesource/jansi/AnsiConsole
    at io.github.picodotdev.blogbitix.uberjar.Main.main(Main.java:9)
Caused by: java.lang.ClassNotFoundException: org.fusesource.jansi.AnsiConsole
    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:338)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
    ... 1 more</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/Exception.out target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/Exception.out target=_blank>Exception.out</a></div></div><p>Sin embargo, para distribuir la aplicación aún hay que distribuir varios archivos <em>jar</em>, el de la aplicación y los <em>jar</em> de las librerías que necesite la aplicación. En este caso solo es un <em>jar</em> adicional ya que la aplicación solo tiene una dependencia y esta transitivamente no tiene ninguna otra pero en una aplicación más compleja el número de dependencias puede llegar a la centena.</p><p>Para hacer la distribución más sencilla hay una posibilidad que usan algunos programadores de Java que es reempaquetar todas las clases del <em>jar</em> de la aplicación y de las librerías en un nuevo <em>jar</em>, a esta opción de reempaquetar las clases se le conoce como <em>uberjar</em> o <em>fatjar</em>. En la herramienta de construcción Gradle existe un <em>plugin</em> para realizar esta tarea de creación del <em>uberjar</em> pero también se puede hacer definiendo una tarea sin necesidad del <em>plugin</em>. El archivo de Gradle adaptado para producir un <em>uberjar</em> de forma automatizada es el siguiente. La tarea importante en el caso del ejemplo es <em>uberJar</em>.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Groovy data-lang=Groovy><span class=n>plugins</span> <span class=o>{</span>
    <span class=n>id</span> <span class=s1>&#39;java&#39;</span>
    <span class=n>id</span> <span class=s1>&#39;application&#39;</span>
<span class=o>}</span>

<span class=n>mainClassName</span> <span class=o>=</span> <span class=s1>&#39;io.github.picodotdev.blogbitix.uberjar.Main&#39;</span>

<span class=n>repositories</span> <span class=o>{</span>
    <span class=n>jcenter</span><span class=o>(</span><span class=o>)</span>
<span class=o>}</span>

<span class=n>dependencies</span> <span class=o>{</span>
    <span class=n>compile</span> <span class=s1>&#39;org.fusesource.jansi:jansi:1.17.1&#39;</span>

<span class=o>}</span>

<span class=n>jar</span> <span class=o>{</span>
    <span class=n>manifest</span> <span class=o>{</span>
        <span class=n>attributes</span> <span class=s1>&#39;Main-Class&#39;</span><span class=o>:</span> <span class=n>mainClassName</span>
        <span class=n>attributes</span> <span class=s1>&#39;Class-Path&#39;</span><span class=o>:</span> <span class=n>configurations</span><span class=o>.</span><span class=na>compile</span><span class=o>.</span><span class=na>collect</span> <span class=o>{</span> <span class=n>it</span><span class=o>.</span><span class=na>name</span> <span class=o>}</span><span class=o>.</span><span class=na>join</span><span class=o>(</span><span class=s1>&#39; &#39;</span><span class=o>)</span>
    <span class=o>}</span>
<span class=o>}</span>

<span class=n>task</span> <span class=nf>copyDependencies</span><span class=o>(</span><span class=nl>type:</span> <span class=n>Copy</span><span class=o>)</span> <span class=o>{</span>
    <span class=n>group</span> <span class=o>=</span> <span class=s1>&#39;Custom&#39;</span>
    <span class=n>description</span> <span class=o>=</span> <span class=s1>&#39;Copies runtime dependencies&#39;</span>
    <span class=n>from</span> <span class=n>configurations</span><span class=o>.</span><span class=na>runtime</span>
    <span class=n>into</span> <span class=s2>&#34;$buildDir/dependencies&#34;</span>
<span class=o>}</span>

<span class=n>task</span> <span class=nf>uberJar</span><span class=o>(</span><span class=nl>type:</span> <span class=n>Jar</span><span class=o>)</span> <span class=o>{</span>
    <span class=n>manifest</span> <span class=o>{</span>
        <span class=n>attributes</span> <span class=s1>&#39;Main-Class&#39;</span><span class=o>:</span> <span class=n>mainClassName</span>
    <span class=o>}</span>
    <span class=n>classifier</span> <span class=s1>&#39;uberjar&#39;</span>
    <span class=n>from</span> <span class=o>{</span> <span class=n>configurations</span><span class=o>.</span><span class=na>compile</span><span class=o>.</span><span class=na>collect</span> <span class=o>{</span> <span class=n>it</span><span class=o>.</span><span class=na>isDirectory</span><span class=o>(</span><span class=o>)</span> <span class=o>?</span> <span class=n>it</span> <span class=o>:</span> <span class=n>zipTree</span><span class=o>(</span><span class=n>it</span><span class=o>)</span> <span class=o>}</span> <span class=o>}</span>
    <span class=n>with</span> <span class=n>jar</span>
<span class=o>}</span>

<span class=n>task</span> <span class=nf>sourcesJar</span><span class=o>(</span><span class=nl>type:</span> <span class=n>Jar</span><span class=o>)</span> <span class=o>{</span>
    <span class=n>group</span> <span class=o>=</span> <span class=s1>&#39;Custom&#39;</span>
    <span class=n>description</span> <span class=o>=</span> <span class=s1>&#39;Builds sources jar&#39;</span>
    <span class=n>classifier</span> <span class=s1>&#39;sources&#39;</span>
    <span class=n>from</span> <span class=n>sourceSets</span><span class=o>.</span><span class=na>main</span><span class=o>.</span><span class=na>allSource</span>
<span class=o>}</span>

<span class=n>task</span> <span class=nf>javadocJar</span><span class=o>(</span><span class=nl>type:</span> <span class=n>Jar</span><span class=o>,</span> <span class=nl>dependsOn:</span> <span class=n>javadoc</span><span class=o>)</span> <span class=o>{</span>
    <span class=n>group</span> <span class=o>=</span> <span class=s1>&#39;Custom&#39;</span>
    <span class=n>description</span> <span class=o>=</span> <span class=s1>&#39;Builds javadoc jar&#39;</span>
    <span class=n>classifier</span> <span class=s1>&#39;javadocdoc&#39;</span>
    <span class=n>from</span> <span class=n>javadoc</span><span class=o>.</span><span class=na>destinationDir</span>
<span class=o>}</span>

<span class=n>artifacts</span> <span class=o>{</span>
    <span class=n>archives</span> <span class=n>uberJar</span>
    <span class=n>archives</span> <span class=n>sourcesJar</span>
    <span class=n>archives</span> <span class=n>javadocJar</span>
<span class=o>}</span>

<span class=n>distributions</span> <span class=o>{</span>
    <span class=n>main</span> <span class=o>{</span>
        <span class=n>baseName</span> <span class=o>=</span> <span class=s2>&#34;$archivesBaseName-bin&#34;</span>
    <span class=o>}</span>
    <span class=n>docs</span> <span class=o>{</span>
        <span class=n>baseName</span> <span class=o>=</span> <span class=s2>&#34;$archivesBaseName-docs&#34;</span>
        <span class=n>contents</span> <span class=o>{</span>
            <span class=n>from</span><span class=o>(</span><span class=n>libsDirName</span><span class=o>)</span> <span class=o>{</span>
                <span class=n>include</span> <span class=n>sourcesJar</span><span class=o>.</span><span class=na>archiveName</span>
                <span class=n>include</span> <span class=n>javadocJar</span><span class=o>.</span><span class=na>archiveName</span>
            <span class=o>}</span>
        <span class=o>}</span>
    <span class=o>}</span>
<span class=o>}</span>

<span class=n>jar</span><span class=o>.</span><span class=na>dependsOn</span> <span class=n>copyDependencies</span>
<span class=n>distZip</span><span class=o>.</span><span class=na>dependsOn</span> <span class=n>sourcesJar</span><span class=o>,</span> <span class=n>javadocJar</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/build.gradle target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/build.gradle target=_blank>build.gradle</a></div></div><p>Con el siguiente comando la ejecución de la aplicación empaquetada como <em>uberjar</em> produce el mismo resultado. Con el <em>uberjar</em> en el archivo de manifiesto no es necesario incluir el atributo <em>Class-Path</em> ya que todas las clases necesarias tanto de la aplicación como de las dependencias ha sido empaquetadas en el <em>jar</em>.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ ./gradlew assemble
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/gradlew-assemble.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/gradlew-assemble.sh target=_blank>gradlew-assemble.sh</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ java -jar build/libs/JavaUberjar-uberjar.jar
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/java-jar-uberjar.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/code/java-jar-uberjar.sh target=_blank>java-jar-uberjar.sh</a></div></div><div class=media style=text-align:center><figure><a href=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/images/java-jar-uberjar_hua368d34e22c6b491003ab57badfbc0e7_27343_2560x1440_fit_box_2.png title="Aplicación de ejemplo ejecutada con uberjar" data-gallery><img src=/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/images/java-jar-uberjar_hua368d34e22c6b491003ab57badfbc0e7_27343_650x450_fit_box_2.png width=650></a><figcaption>Aplicación de ejemplo ejecutada con uberjar</figcaption></figure></div><p>Hay un <a href=https://imperceptiblethoughts.com/shadow/><em>plugin</em> de Gradle para generar <em>uberjars</em></a> que ofrece varias opciones para filtrar los archivos que se incluyen en el <em>fatjar</em>, fusionar los archivos de servicios que permiten extender funcionalidades y otras tareas para realizar generar el distribuible con <em>distShadowZip</em> y <em>distShadowTar</em>. <a href=https://projects.spring.io/spring-boot/>Spring Boot</a> ofrece algo similar con la tarea <em>bootRepackage</em> pero si no se trata de una aplicación que use Spring Boot lo anterior sirve para cualquier otra aplicación Java como sería el caso de una <a href=https://picodotdev.github.io/blog-bitix/2015/10/introduccion-a-javafx-aplicaciones-de-escritorio-en-java/>aplicación de escritorio que utiliza JavaFX</a>.</p><p>Que la aplicación sea un único <em>jar</em> tiene la ventaja que el distribuible es más sencillo y facilita desplegarlo en un entorno de producción, en el caso de usar <a href=https://www.docker.com/>Docker</a> también es más adecuado un único archivo.</p><p>Entre la documentación hay unas muy buenas <a href=https://docs.oracle.com/javase/tutorial/index.html>guías prácticas sobre Java</a>, una de ellas sobre el <a href=https://docs.oracle.com/javase/tutorial/deployment/jar/index.html>empaqueado de apliaciones en archivos <em>jar</em></a>. La información que se encuentra en estas guías y tutoriales es muy valiosa para cualquier programador que use el lenguaje Java.</p><p>El <a href=https://github.com/picodotdev/blog-ejemplos/tree/master/JavaUberjar>código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en <a href=https://github.com/>GitHub</a> y probarlo en tu equipo ejecutando el comando <code>./gradlew assemble && java -jar build/libs/JavaUberjar-uberjar.jar</code>.</p><div class=reference>Referencia:<br><ul><li><a href=https://www.baeldung.com/gradle-fat-jar>Creating a Fat Jar in Gradle</a></li><li><a href=https://imperceptiblethoughts.com/shadow/>Shadow Plugin User Guide & Examples</a></li><li><a href=http://www.mkyong.com/gradle/gradle-create-a-jar-file-with-dependencies/>Gradle – Create a Jar file with dependencies</a></li><li><a href=https://www.javacodegeeks.com/2012/11/packing-your-java-application-as-one-or-fat-jar.html>Packing your Java application as one (or fat) JAR</a></li></ul></div></div></article><div class="row related"><div class=col-md-12>Artículos relacionados:<ul><li><a href=/blog-bitix/2018/05/recuperar-datos-eficientemente-en-graphql-usando-batching/>Recuperar datos eficientemente en GraphQL usando batching</a></li><li><a href=/blog-bitix/2018/05/gestion-de-errores-con-either-o-try-en-vez-de-con-codigo-de-error-null-optional-checked-exception-o-unchecked-exception/>Gestión de errores con Either o Try en vez de con código de error, null, Optional, checked exception o unchecked exception</a></li><li><a href=/blog-bitix/2018/05/plantillas-con-etiquetas-no-balanceadas-en-apache-tapestry/>Plantillas con etiquetas no balanceadas en Apache Tapestry</a></li><li><a href=/blog-bitix/2018/04/la-clase-optional-de-java-para-evitar-la-excepcion-nullpointerexception/>La clase Optional de Java para evitar la excepción NullPointerException</a></li><li><a href=/blog-bitix/2018/04/la-sentencia-try-with-resources-de-java/>La sentencia try-with-resources de Java</a></li></ul></div></div><div class=row><div class=col-md-12><div class=sharethis-inline-share-buttons></div></div></div><div class=row><div class="col-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:970px;height:250px data-ad-client=ca-pub-3533636310991304 data-ad-slot=2975854584 data-type=billboard></ins></div></div><a id=comments></a><div class=row><div class=col-md-12><div id=disqus_thread></div></div></div><script type=text/javascript async>var disqus_shortname='blog-bitix';var disqus_identifier='blog-bitix-324';var disqus_url='https:\/\/picodotdev.github.io\/blog-bitix\/2018\/05\/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias\/';var disqus_script='embed.js';(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.disqus.com/'+disqus_script;(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);}());</script></div></div><div class=row><div class=col-12><hr></div></div><footer><div class=row><div class="col-12 col-sm-4"><p><strong>Blog Bitix</strong></p><p>Blog dedicado a la distribución GNU/Linux que uso habitualmente, Arch Linux, a mis andanzas alrededor del software libre, la programación y a otros temas relacionados con la tecnología y la informática.</p><p>Publicando de uno a tres artículos únicos a la semana desde el año 2010.</p></div><div class="col-12 col-sm-4 text-center menu"><ul class=list-unstyled><li><a href=/blog-bitix/tags/java/>Java</a></li><li><a href=/blog-bitix/tags/gnu-linux/>GNU/Linux</a></li><li><a href=/blog-bitix/tags/javascript/>JavaScript</a></li><li><a href=/blog-bitix/tags/tapestry/>Tapestry</a></li><li><a href=/blog-bitix/archive/>Archivo y hemeroteca</a></li><li><a href=/blog-bitix/pages/links/>Enlaces</a></li><li><a href=/blog-bitix/pages/advertising/>Publicidad</a></li><li><a href=/blog-bitix/pages/donate/>Donaciones</a></li><li><a href=/blog-bitix/pages/about/>Acerca de...</a></li></ul></div><div class="col-12 col-sm-4 text-center links"><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class=row><div class=col-12>Copyleft <span class=copyleft>&copy;</span> 2019 - <a href=https://creativecommons.org/licenses/by-sa/4.0/ rel=nofollow rel=license><img alt="Licencia de Creative Commons" title="Licencia de Creative Commons" style=border-width:0 src=https://licensebuttons.net/l/by-sa/4.0/80x15.png class=licencia></a><br><a href=https://twitter.com/blogstackinfo rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/blog-stack.png alt="Blog Stack" title="Blog Stack"></a>
<a href=https://www.planetacodigo.com/ rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/planeta-codigo.png alt="Planeta código" title="Planeta código"></a><br><span xmlns:dct=http://purl.org/dc/terms/ property="dct:title"><a href=https://picodotdev.github.io/blog-bitix/ rel=nofollow>Blog Bitix</a></span> by <a xmlns:cc=https://creativecommons.org/ns# href=https://picodotdev.github.io/blog-bitix/ property="cc:attributionName" rel=cc:attributionurl>pico.dev</a> is licensed under a <a rel=license href=https://creativecommons.org/licenses/by-sa/4.0/>Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional License</a>.<br><span class=credit>Powered by <a href=https://gohugo.io/ rel=nofollow title="A fast and modern static website engine">Hugo</a> and <a href=https://pages.github.com/ title="Websites for you and your projects">GitHub Pages</a>.</span>
<span class=credit>Background patterns from <a href=https://www.toptal.com/designers/subtlepatterns/ rel=nofollow>Subtle Patterns</a>.</span></div></div></footer></div><div class=blueimp-gallery-container><div id=blueimp-gallery class="blueimp-gallery blueimp-gallery-controls" data-use-bootstrap-modal=false><div class=slides></div><h3 class=title></h3><a class=prev>‹</a>
<a class=next>›</a>
<a class=close>×</a>
<a class=play-pause></a><ol class=indicator></ol><div class="modal fade"><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close aria-hidden=true>&#215;</button><h4 class=modal-title></h4></div><div class="modal-body next"></div><div class=modal-footer><button type=button class="btn btn-default pull-left prev">
<i class="glyphicon glyphicon-chevron-left"></i>Anterior</button>
<button type=button class="btn btn-primary next">
Siguiente
<i class="glyphicon glyphicon-chevron-right"></i></button></div></div></div></div></div></div><script type=text/javascript>window.cookieconsent_options={"message":"Esta bitácora te informa de la obviedad de que utiliza «cookies», propias y de servicios como Google Analytics y Google AdSense entre otros.","dismiss":"Aceptar","learnMore":"Más información","link":null,"theme":"dark-bottom"};</script><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js async></script></body></html>
<!doctype html><html lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=picodotdev><meta name=keywords content="java,programacion,software,hardware,tapestry,software libre,gnu,linux,gnu/linux,unix,arch,arch linux,html,css,javascript"><meta name=description content="Uno de los motivos por los que compré el kit de iniciación a la electrónica para la Raspberry Pi, además de cacharrear un poco, era en concreto controlar el display LCD de 16 columnas y 2 filas. En el kit el display viene con un adaptador con el bus de comunicación I2C. El display se puede usar sin este bus pero requiere utilizar muchos más pines GPIO de datos de los limitados 17 que ofrece la Raspberry Pi 1 y los 26 de las Raspberry Pi B&#43;, 2 y 3. &hellip;"><base href=https://picodotdev.github.io/blog-bitix/><title>Controlar un display LCD 1602 para mostrar texto con la Raspberry Pi y Java</title><link rel=author type=text/plain href=humans.txt><link rel="shortcut icon" href=assets/favicon.ico><link rel=apple-touch-icon-precomposed sizes=144x144 href=assets/apple-touch-icon-144-precomposed.png><link rel=canonical href=https://picodotdev.github.io/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/><link href=index.xml rel=alternate type=application/rss+xml title="Blog Bitix"><link rel=stylesheet type=text/css href="//fonts.googleapis.com/css?family=PT+Serif:400,400i,700"><link rel=stylesheet type=text/css href=assets/libs/bootstrap-4.3.1/css/bootstrap.min.css><link rel=stylesheet type=text/css href=assets/libs/Gallery-2.33.0/css/blueimp-gallery.min.css><link rel=stylesheet type=text/css href=assets/css/syntax.css><link rel=stylesheet type=text/css href=assets/css/main.css><script type=text/javascript src=assets/js/require-config.js data-main=js/main defer></script><script type=text/javascript src=assets/libs/require.js data-main=js/main defer></script><script src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js defer></script><script type=text/javascript defer>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:'ca-pub-3533636310991304',enable_page_level_ads:true});</script><script type=text/javascript defer>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-12874075-4','picodotdev.github.io');ga('send','pageview');</script><script type=text/javascript src="//platform-api.sharethis.com/js/sharethis.js#property=5920c4ce1bd0670011e06acd&product=inline-share-buttons" defer></script><script type=text/javascript src=assets/js/app.js defer></script></head><body><div class=container><div class=row><div class=col-12><header><div class=row><div class="col-12 col-lg-4"></div><div class="col-12 col-lg-4"><h2 class=title><a href=https://picodotdev.github.io/blog-bitix/>Blog Bitix</a></h2><div class=links><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class="col-12 col-lg-4 text-center"><form name=query class="form-inline search" onsubmit="return false;"><div class=input-group><input type=text name=q class=form-control placeholder="Buscar en Blog Bitix">
<span class=input-group-btn><button class="btn btn-secondary" type=submit>Buscar</button></span></div></form><form name=search action=https://duckduckgo.com/ method=get class=hidden data-site=https://picodotdev.github.io/blog-bitix/><input type=hidden name=q></form></div></div><div class=row><div class=col-12><nav class="nav nav-pills nav-fill"><a href=/blog-bitix/tags/java/ class="nav-item nav-link">Java</a>
<a href=/blog-bitix/tags/gnu-linux/ class="nav-item nav-link">GNU/Linux</a>
<a href=/blog-bitix/tags/javascript/ class="nav-item nav-link">JavaScript</a>
<a href=/blog-bitix/tags/tapestry/ class="nav-item nav-link">Tapestry</a>
<a href=/blog-bitix/archive/ class="nav-item nav-link">Archivo y hemeroteca</a>
<a href=/blog-bitix/pages/links/ class="nav-item nav-link">Enlaces</a>
<a href=/blog-bitix/pages/about/ class="nav-item nav-link">Acerca de...</a></nav></div></div></header></div></div><div class=row><div class="col-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:970px;height:250px data-ad-client=ca-pub-3533636310991304 data-ad-slot=2975854584 data-type=billboard></ins></div></div><div class=row><div class=col-12><div class="adblock-sidebar adblock-sidebar-right"><ins class="adsbygoogle adblock-sidebar-skycraper" style=display:block data-ad-client=ca-pub-3533636310991304 data-ad-slot=9933840986 data-ad-format=auto data-type=auto></ins></div><article itemprop=mainEntity itemscope itemtype=http://schema.org/BlogPosting><meta itemprop=inLanguage content=es><meta itemprop=keywords content="blog-stack, gnu-linux, java, planeta-codigo, planeta-linux, programacion"><h1 itemprop=name>Controlar un display LCD 1602 para mostrar texto con la Raspberry Pi y Java</h1><p class=information>Escrito por
<span itemprop=author itemscope itemtype=http://schema.org/Person><span itemprop=name>picodotdev</span></span> el <time itemprop=datePublished datetime=2017-03-18>18/03/2017</time>, actualizado el <time itemprop=dateModified datetime=2017-03-19>19/03/2017</time>.<br><a href=tags/blog-stack/>blog-stack</a> <a href=tags/gnu-linux/>gnu-linux</a> <a href=tags/java/>java</a> <a href=tags/planeta-codigo/>planeta-codigo</a> <a href=tags/planeta-linux/>planeta-linux</a> <a href=tags/programacion/>programacion</a><br><a href=/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/ itemprop=url>Enlace permanente</a>
<a href=/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/#comments>Comentarios</a></p><div class=content itemprop=articleBody><meta itemprop=wordCount content=1343><div class=logotypes style=float:right><img src=assets/images/logotipos/raspberrypi.svg class=right width=200 alt="Raspberry Pi" title="Raspberry Pi"></div><div class=logotypes style=float:right;clear:right><img src=assets/images/logotipos/java.svg class=right width=200 alt=Java title=Java></div><p>Uno de los motivos por los que compré el <a href=https://picodotdev.github.io/blog-bitix/2017/02/desempaquetado-del-kit-de-iniciacion-a-la-electronica-para-la-raspberry-pi/>kit de iniciación a la electrónica para la Raspberry Pi</a>, además de cacharrear un poco, era en concreto controlar el <em>display</em> LCD de 16 columnas y 2 filas. En el <em>kit</em> el <em>display</em> viene con un adaptador con el bus de comunicación I2C. El <em>display</em> se puede usar sin este bus pero requiere utilizar muchos más <em>pines</em> GPIO de datos de los limitados 17 que ofrece la Raspberry Pi 1 y los 26 de las Raspberry Pi B+, 2 y 3. Controlar el <em>display</em> con I2C requiere únicamente 2 pines, por contra sin usar I2C requiere un número significativamente mayor 4 u 8 pines.</p><p>El <em>display</em> 1602 con su adaptador para el bus I2C que viene con el <em>kit</em> ya incorporado en la parte trasera es el siguiente.</p><div class=media style=text-align:center><figure><a href=assets/images/posts/2017/215/display-lcd-1602.jpg title="Display LCD 16 columnas y 2 filas" data-gallery><img src=assets/images/posts/2017/215/display-lcd-1602-thumb.jpg></a>
<a href=assets/images/posts/2017/215/adaptador-bus-i2c-1602.jpg title="Adaptador bus I2C para display 1602" data-gallery><img src=assets/images/posts/2017/215/adaptador-bus-i2c-1602-thumb.jpg></a><figcaption>Display LCD 1602 y adaptador bus I2C</figcaption></figure></div><p>El esquema de conexionado para controlar el <em>display</em> requiere usar los <em>pines</em> de la Raspberry Pi <em>SDA</em> y <em>SDL</em> además de un <em>pin</em> para proporcionar un voltaje de 5V y otro <em>pin</em> para la tierra. El <em>pin</em> <em>SDA</em> es el número 2 según la numeración de <em>pines</em> de la Raspberry Pi y el <em>SDL</em> es el 5. El <em>pin</em> <em>SDA</em> es utilizado en el bus I2C para transmitir los datos y el <em>SDL</em> para la señal de reloj o sincronización. Utilizando la placa de extensión wiringPi de 26 <em>pines</em> los <em>pines</em> <em>SDA</em> y <em>SDL</em> se encuentran identificados por su nombre y el de la placa de extensión de 40 <em>pines</em> que viene con el <em>kit</em> de iniciación también, deberemos identificar estos <em>pines</em> y realizar las conexiones adecuadamente.</p><div class=media style=text-align:center><figure><a href=assets/images/posts/2017/215/breadboard-cableado.jpg title="Cableado en la breadboard" data-gallery><img src=assets/images/posts/2017/215/breadboard-cableado-thumb.jpg></a>
<a href=assets/images/posts/2017/215/esquema-cableado.png title="Esquema del cableado" data-gallery><img src=assets/images/posts/2017/215/esquema-cableado-thumb.png></a><figcaption>Cableado en la breadboard</figcaption></figure></div><p>Hay que emplear varios cables macho-macho y hembra-hembra para conectar a los <em>pines</em> del adaptador I2C del <em>display</em> a los <em>pines</em> del voltaje de 5V, tierra, <em>SDA</em> y <em>SDL</em> de la placa de pruebas sin soldadura.</p><div class=media style=text-align:center><figure><a href=assets/images/posts/2017/215/cables-macho-macho-hembra-hembra.jpg title="Unión cables macho-macho y hembra-hembra" data-gallery><img src=assets/images/posts/2017/215/cables-macho-macho-hembra-hembra-thumb.jpg></a><figcaption>Unión cables macho-hembra</figcaption></figure></div><p>El siguiente paso será activar el bus I2C en la Raspberry Pi que por defecto está desactivado. Esto requiere añadir unos parámetros en la configuración de arranque y cargar unos módulos del kernel que finalmente crearán un dispositivo tal que en <em>/dev/i2c-0</em> o <em>/dev/i2c-0</em>. Si instalamos el paquete <em>i2c-tools</em> podremos detectar el <em>display</em> en el bus I2C, en la captura de pantalla en la dirección 27 que hay que usar al construir la instancia del controlador del <em>display</em>. Estos cambios en la configuración de inicio requieren reiniciar la Raspberry Pi. En un sistema con la distribución <a href=https://archlinuxarm.org/>Arch Linux ARM</a> los cambios son los siguientes.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Plaintext data-lang=Plaintext># /boot/config.txt
device_tree_param=i2c_arm=on

# sudo vim /boot/cmdline.txt
bcm2708.vc_i2c_override=1

$ sudo systemctl reboot

$ sudo modprobe i2c-bcm2708
$ sudo modprobe i2c-dev

$ sudo pacman -S i2c-tools
$ sudo i2cdetect -y 0</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/code/configuration.txt target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/code/configuration.txt target=_blank>configuration.txt</a></div></div><div class=media style=text-align:center><figure><a href=assets/images/posts/2017/215/i2cdetect.png title="Detectción del display 1602 en el bus I2C" data-gallery><img src=assets/images/posts/2017/215/i2cdetect-thumb.png></a><figcaption>Detectción del display 1602 en el bus I2C</figcaption></figure></div><p>Según la <a href=https://www.sparkfun.com/datasheets/LCD/HD44780.pdf>especificación del <em>display</em> 1602</a> este componente soporta varios comandos para controlarlo, algunos son para limpiar el texto, cambiar la dirección de escritura, añadir caracteres personalizados y emitir texto en la línea o posición del <em>display</em> que queramos. No es simple el controlar el <em>display</em> a bajo nivel ya que hay que trabajar en momentos con binario y usar bytes, por ello para el ejemplo usaré la librería <a href=http://rtd.diozero.com/en/latest/>diozero</a> que ya trae una implementación de controlador con funciones de alto nivel <em>I2CLcd</em> que en versiones más recientes de la librería ha sido renombrada a <a href=http://static.javadoc.io/com.diozero/diozero-core/0.9/com/diozero/HD44780Lcd.html>HD44780Lcd</a> mucho más cómoda que enviar <em>bytes</em> a bajo nivel al bus I2C, el <a href=https://github.com/mattjlewis/diozero/blob/master/diozero-core/src/main/java/com/diozero/HD44780Lcd.java>código fuente de la clase HD44780Lcd</a> está disponible y podemos verlo si hay curiosidad.</p><p>En mi caso con la Raspberry Pi 1 he tenido que utilizar la versión 0.9 de la librería diozero porque la 0.8 me generaba un <em>stacktrace</em> de una excepción <em>java.lang.UnsupportedOperationException</em>. Obtener esta versión de la librería como aún era de desarrollo y no estaba publicada en <a href=https://search.maven.org/>Maven Central</a> la he descargado de un <a href=https://drive.google.com/drive/u/0/folders/0B2Kd_bs3CEYaZ3NiRkd4OXhYd3c>google drive que ha creado el autor</a> y usado en <a href=https://gradle.org/>Gradle</a> como una dependencia del sistema de ficheros. Como librería subyacente de diozero para controlar los <em>pines</em> GPIO he usado <a href=http://abyz.co.uk/rpi/pigpio/>pigpio</a>.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Plaintext data-lang=Plaintext>Caused by: java.lang.UnsupportedOperationException
    at java.util.AbstractList.add(AbstractList.java:148)
    at java.util.AbstractList.add(AbstractList.java:108)
    at com.diozero.internal.board.raspberrypi.RaspberryPiBoardInfoProvider$PiBRev1BoardInfo.&lt;clinit&gt;(RaspberryPiBoardInfoProvider.java:281)
    ... 14 more</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/code/java.lang.UnsupportedOperationException target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/code/java.lang.UnsupportedOperationException target=_blank>java.lang.UnsupportedOperationException</a></div></div><p>En el ejemplo mostraré un texto en cada una de las lineas del <em>display</em> y usaré una de las funciones del para mostrar caracteres personalizados con los que es posible crear <em>emojis</em> o caracteres nuevos. El controlador de diozero ya contiene una buena colección de caracteres personalizados que definen el patrón de 5x8 puntos que siguen, los nombres de estos caracteres personalizados están en la clase interna <em>Characters</em> de <a href=http://static.javadoc.io/com.diozero/diozero-core/0.9/com/diozero/HD44780Lcd.html>HD44780Lcd</a> aunque también podemos definir nuevos. El ejemplo es el siguiente donde se muestra el uso de los métodos <a href=http://static.javadoc.io/com.diozero/diozero-core/0.9/com/diozero/HD44780Lcd.html#setText-int-java.lang.String->setText</a> y <a href=http://static.javadoc.io/com.diozero/diozero-core/0.9/com/diozero/HD44780Lcd.html#setCharacter-int-int-char->setCharacter</a>, también el constructor donde hay que indicar la dirección asignada al dispositivo en el bus I2C que siendo la 27 corresponde con el valor definido en una constante. Pero también hay otros métodos como <a href=http://static.javadoc.io/com.diozero/diozero-core/0.9/com/diozero/HD44780Lcd.html#clear-->clear</a>, <a href=http://static.javadoc.io/com.diozero/diozero-core/0.9/com/diozero/HD44780Lcd.html#cursorOff-->cursorOff</a> y <a href=http://static.javadoc.io/com.diozero/diozero-core/0.9/com/diozero/HD44780Lcd.html#cursorOn-->cursorOn</a> para apagar y encender el cursor, <a href=http://static.javadoc.io/com.diozero/diozero-core/0.9/com/diozero/HD44780Lcd.html#displayOff-->displayOff</a>
<a href=http://static.javadoc.io/com.diozero/diozero-core/0.9/com/diozero/HD44780Lcd.html#displayOn-->displayOn</a> para apgar y encender el <em>display</em> y <a href=http://static.javadoc.io/com.diozero/diozero-core/0.9/com/diozero/HD44780Lcd.html#createChar-int-byte:A->createChar</a> para crear nuevos caracteres definidos como una <em>array</em> de 8 posiciones donde cada <em>byte</em> indica los pixeles encendidos de cada fila del caracter de 5x8 y con <a href=http://static.javadoc.io/com.diozero/diozero-core/0.9/com/diozero/HD44780Lcd.html#setCharacter-int-int-char->setCharacter</a> para emitir uno de los 8 posibles que se pueden usar al mismo tiempo. Además de estos también hay otros pocos métodos más relacionados con el cursor.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>io.github.picodotdev.blogbitix.javaraspberrypi</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>com.diozero.I2CLcd</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>com.diozero.api.I2CConstants</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>java.nio.ByteOrder</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.time.LocalDateTime</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.time.ZoneId</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.time.format.DateTimeFormatter</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Lcd</span> <span class=o>{</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=o>{</span>
        <span class=k>try</span> <span class=o>(</span><span class=n>I2CLcd</span> <span class=n>lcd</span> <span class=o>=</span> <span class=k>new</span> <span class=n>I2CLcd</span><span class=o>(</span><span class=n>I2CConstants</span><span class=o>.</span><span class=na>BUS_0</span><span class=o>,</span> <span class=n>I2CLcd</span><span class=o>.</span><span class=na>DEFAULT_DEVICE_ADDRESS</span><span class=o>,</span> <span class=n>ByteOrder</span><span class=o>.</span><span class=na>LITTLE_ENDIAN</span><span class=o>,</span> <span class=n>16</span><span class=o>,</span> <span class=n>2</span><span class=o>))</span> <span class=o>{</span>
            <span class=n>lcd</span><span class=o>.</span><span class=na>setText</span><span class=o>(</span><span class=n>0</span><span class=o>,</span> <span class=s>&#34;Hello World!&#34;</span><span class=o>);</span>
            <span class=n>lcd</span><span class=o>.</span><span class=na>createChar</span><span class=o>(</span><span class=n>0</span><span class=o>,</span> <span class=n>I2CLcd</span><span class=o>.</span><span class=na>Characters</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=s>&#34;heart&#34;</span><span class=o>));</span>
            <span class=n>lcd</span><span class=o>.</span><span class=na>createChar</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>I2CLcd</span><span class=o>.</span><span class=na>Characters</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=s>&#34;smilie&#34;</span><span class=o>));</span>
            <span class=n>lcd</span><span class=o>.</span><span class=na>createChar</span><span class=o>(</span><span class=n>2</span><span class=o>,</span> <span class=n>I2CLcd</span><span class=o>.</span><span class=na>Characters</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=s>&#34;space_invader&#34;</span><span class=o>));</span>
            <span class=n>lcd</span><span class=o>.</span><span class=na>setCharacter</span><span class=o>(</span><span class=n>13</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span> <span class=o>(</span><span class=kt>char</span><span class=o>)</span> <span class=n>0</span><span class=o>);</span>
            <span class=n>lcd</span><span class=o>.</span><span class=na>setCharacter</span><span class=o>(</span><span class=n>14</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span> <span class=o>(</span><span class=kt>char</span><span class=o>)</span> <span class=n>1</span><span class=o>);</span>
            <span class=n>lcd</span><span class=o>.</span><span class=na>setCharacter</span><span class=o>(</span><span class=n>15</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span> <span class=o>(</span><span class=kt>char</span><span class=o>)</span> <span class=n>2</span><span class=o>);</span>

            <span class=n>Thread</span> <span class=n>messager</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Thread</span><span class=o>(()</span> <span class=o>-&gt;</span> <span class=o>{</span>
                <span class=k>try</span> <span class=o>{</span>
                    <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>5</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
                        <span class=n>lcd</span><span class=o>.</span><span class=na>setText</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=s>&#34; powered by Java&#34;</span><span class=o>);</span>
                        <span class=n>Thread</span><span class=o>.</span><span class=na>sleep</span><span class=o>(</span><span class=n>3000</span><span class=o>);</span>
                        <span class=n>lcd</span><span class=o>.</span><span class=na>setText</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>LocalDateTime</span><span class=o>.</span><span class=na>now</span><span class=o>(</span><span class=n>ZoneId</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=s>&#34;Europe/Madrid&#34;</span><span class=o>)).</span><span class=na>format</span><span class=o>(</span><span class=n>DateTimeFormatter</span><span class=o>.</span><span class=na>ofPattern</span><span class=o>(</span><span class=s>&#34;yyyy-MM-dd HH:mm&#34;</span><span class=o>)));</span>
                        <span class=n>Thread</span><span class=o>.</span><span class=na>sleep</span><span class=o>(</span><span class=n>3000</span><span class=o>);</span>
                    <span class=o>}</span>
                <span class=o>}</span> <span class=k>catch</span><span class=o>(</span><span class=n>InterruptedException</span> <span class=n>e</span><span class=o>){</span>
                    <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
                <span class=o>}</span>
            <span class=o>});</span>

            <span class=n>messager</span><span class=o>.</span><span class=na>start</span><span class=o>();</span>
            <span class=n>messager</span><span class=o>.</span><span class=na>join</span><span class=o>();</span>
        <span class=o>}</span>
    <span class=o>}</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/code/Lcd.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/code/Lcd.java target=_blank>Lcd.java</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Groovy data-lang=Groovy><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Groovy data-lang=Groovy><span class=n>apply</span> <span class=nl>plugin:</span> <span class=s1>&#39;java&#39;</span>
<span class=n>apply</span> <span class=nl>plugin:</span> <span class=s1>&#39;idea&#39;</span>

<span class=n>sourceCompatibility</span> <span class=o>=</span> <span class=mf>1.8</span>
<span class=n>targetCompatibility</span> <span class=o>=</span> <span class=mf>1.8</span>

<span class=n>repositories</span> <span class=o>{</span>
    <span class=n>mavenCentral</span><span class=o>()</span>
<span class=o>}</span>

<span class=n>dependencies</span> <span class=o>{</span>
    <span class=n>compile</span> <span class=nf>files</span><span class=o>(</span><span class=s1>&#39;misc/libs/diozero-core-0.9-SNAPSHOT.jar&#39;</span><span class=o>,</span> <span class=s1>&#39;misc/libs/diozero-provider-pigpio-0.9-SNAPSHOT.jar&#39;</span><span class=o>,</span> <span class=s1>&#39;misc/libs/pigpioj-java-1.0.1.jar&#39;</span><span class=o>,</span> <span class=s1>&#39;misc/libs/commons-math3-3.6.1.jar&#39;</span><span class=o>,</span> <span class=s1>&#39;misc/libs/tinylog-1.1.jar&#39;</span><span class=o>)</span>
<span class=o>}</span>

<span class=o>...</span>

<span class=n>task</span> <span class=nf>copyDependencies</span><span class=o>(</span><span class=nl>type:</span> <span class=n>Copy</span><span class=o>)</span> <span class=o>{</span>
    <span class=n>into</span> <span class=s2>&#34;$buildDir/libs&#34;</span>
    <span class=n>from</span> <span class=n>configurations</span><span class=o>.</span><span class=na>runtime</span>
<span class=o>}</span>

<span class=n>jar</span> <span class=o>{</span> <span class=n>dependsOn</span> <span class=n>copyDependencies</span> <span class=o>}</span>

<span class=n>task</span> <span class=nf>upload</span><span class=o>(</span><span class=nl>type:</span> <span class=n>Exec</span><span class=o>,</span> <span class=nl>dependsOn:</span> <span class=o>[</span><span class=s1>&#39;jar&#39;</span><span class=o>])</span> <span class=o>{</span>
    <span class=n>commandLine</span> <span class=s1>&#39;rsync&#39;</span><span class=o>,</span> <span class=s1>&#39;-arPL&#39;</span><span class=o>,</span> <span class=s1>&#39;--delete&#39;</span><span class=o>,</span> <span class=s1>&#39;-e&#39;</span><span class=o>,</span> <span class=s1>&#39;ssh&#39;</span><span class=o>,</span> <span class=s1>&#39;build/libs/&#39;</span><span class=o>,</span> <span class=s1>&#39;raspberrypi@192.168.1.101:/home/raspberrypi/scripts/javaraspberrypi/&#39;</span>
<span class=o>}</span>

<span class=o>...</span>

<span class=n>task</span> <span class=nf>executeLcd</span><span class=o>(</span><span class=nl>type:</span> <span class=n>Exec</span><span class=o>,</span> <span class=nl>dependsOn:</span> <span class=s1>&#39;upload&#39;</span><span class=o>)</span> <span class=o>{</span>
    <span class=n>commandLine</span> <span class=s1>&#39;ansible&#39;</span><span class=o>,</span> <span class=s1>&#39;-i&#39;</span><span class=o>,</span> <span class=s1>&#39;hosts&#39;</span><span class=o>,</span> <span class=s1>&#39;raspberrypi&#39;</span><span class=o>,</span> <span class=s1>&#39;--sudo&#39;</span><span class=o>,</span> <span class=s1>&#39;--ask-sudo-pass&#39;</span><span class=o>,</span> <span class=s1>&#39;-m&#39;</span><span class=o>,</span> <span class=s1>&#39;command&#39;</span><span class=o>,</span> <span class=s1>&#39;-a&#39;</span><span class=o>,</span> <span class=s1>&#39;chdir=/home/raspberrypi/scripts/javaraspberrypi java -classpath &#34;*&#34; io.github.picodotdev.blogbitix.javaraspberrypi.Lcd&#39;</span>
    <span class=n>standardInput</span> <span class=n>System</span><span class=o>.</span><span class=na>in</span>
<span class=o>}</span>

<span class=o>...</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/code/build.gradle target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/code/build.gradle target=_blank>build.gradle</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash>$ ./gradlew upload
$ ssh -t <span class=m>192</span>.168.1.101 <span class=s1>&#39;cd /home/raspberrypi/scripts/javaraspberrypi &amp;&amp; sudo java -classpath &#34;*&#34; io.github.picodotdev.blogbitix.javaraspberrypi.Lcd&#39;</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/code/executeSSH.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/code/executeSSH.sh target=_blank>executeSSH.sh</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash>$ ./gradlew executeLcd
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/code/executeGradle.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/code/executeGradle.sh target=_blank>executeGradle.sh</a></div></div><div class=media style=text-align:center><figure><a href=assets/images/posts/2017/215/mensaje-lcd-1602.jpg title="Mensaje en LCD 1602" data-gallery><img src=assets/images/posts/2017/215/mensaje-lcd-1602-thumb.jpg></a><figcaption>Mensaje en LCD 1602</figcaption></figure></div><div class="media media media-video" style=text-align:center><iframe width=640 height=360 src=https://www.youtube.com/embed/V6msjQNDPuU frameborder=0 allowfullscreen></iframe></div><p>Pudiendo mostrar mensajes en <em>display</em> es posible mostrar cualquier información que un programa sea capaz de capturar como temperatura y humedad del correspondiente sensor en el mismo <em>kit</em>, estado de un pulsador, espacio disponible en el disco del sistema, y memoria libre, <em>uptime</em> del sistema, fecha y hora, &hellip; cualquier cosa que se nos ocurra.</p><p>El ejemplo parece simple, y el programa Java lo es, pero requiere conocer varias cosas que en internet está dispersas como activar el bus I2C o conocer la librería diozero para controlar el <em>display</em> que simplifica enormemente el código y nos evita comunicarnos a más bajo nivel con el <em>display</em>, realizar las conexiones eléctricas también requiere algo de conocimiento. Averiguar todo esto me costó una buena cantidad de tiempo.</p><p>El <a href=https://github.com/picodotdev/blog-ejemplos/tree/master/JavaRaspberryPi>código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en <a href=https://github.com/>GitHub</a> y probarlo en tu equipo ejecutando el comando <code>./gradlew executeLcd</code>.</p></div></article><div class="row serie"><div class=col-md-12><h3>Este artículo forma parte de la serie <strong>electronica</strong>:</h3><ol class=serie-articles><li><a href=https://picodotdev.github.io/blog-bitix/2017/02/desempaquetado-del-kit-de-iniciacion-a-la-electronica-para-la-raspberry-pi/>Desempaquetado del kit de iniciación a la electrónica para la Raspberry Pi</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/03/ejemplo-hello-world-con-java-en-la-raspberry-pi/>Ejemplo Hello World con Java en la Raspberry Pi</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/03/ejemplo-encender-y-apagar-diodo-led-con-la-raspberry-pi-en-java/>Ejemplo encender y apagar diodo LED con la Raspberry Pi en Java</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/03/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java/>Controlar un display LCD 1602 para mostrar texto con la Raspberry Pi y Java</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/03/ejemplo-de-jni-usar-codigo-en-c-desde-java/>Ejemplo de JNI, usar código en C desde Java</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/03/obtener-la-temperatura-y-humedad-con-el-sensor-dht11-la-raspberry-pi-c-y-java/>Obtener la temperatura y humedad con el sensor DHT11, la Raspberry Pi, C y Java</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/04/como-usar-un-diodo-led-un-pulsador-y-un-zumbador-con-la-raspberry-pi-y-java/>Cómo usar un diodo LED, un pulsador y un zumbador con la Raspberry Pi y Java</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/04/ejemplo-sensor-de-golpes-y-detector-de-movimiento-en-la-raspberry-pi-con-java/>Ejemplo sensor de golpes y detector de movimiento en la Raspberry Pi con Java</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/05/controlar-un-servomotor-con-la-raspberry-pi-y-java/>Controlar un servomotor con la Raspberry Pi y Java</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/05/luces-navidenas-con-la-raspberry-pi-y-java/>Luces navideñas con la Raspberry Pi y Java</a></li></ol></div></div><div class=row><div class=col-md-12><div class=sharethis-inline-share-buttons></div></div></div><div class=row><div class="col-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:970px;height:250px data-ad-client=ca-pub-3533636310991304 data-ad-slot=2975854584 data-type=billboard></ins></div></div><a id=comments></a><div class=row><div class=col-md-12><div id=disqus_thread></div></div></div><script type=text/javascript async>var disqus_shortname='blog-bitix';var disqus_identifier='https:\/\/picodotdev.github.io\/blog-bitix\/2017\/03\/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java\/';var disqus_url='https:\/\/picodotdev.github.io\/blog-bitix\/2017\/03\/controlar-un-display-lcd-1602-para-mostrar-texto-con-la-raspberry-pi-y-java\/';var disqus_script='embed.js';(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.disqus.com/'+disqus_script;(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);}());</script></div></div><div class=row><div class=col-12><hr></div></div><footer><div class=row><div class="col-12 col-sm-4"><p><strong>Blog Bitix</strong></p><p>Blog dedicado a la distribución GNU/Linux que uso habitualmente, Arch Linux, a mis andanzas alrededor del software libre, la programación y a otros temas relacionados con la tecnología y la informática.</p><p>Publicando de uno a tres artículos únicos a la semana desde el año 2010.</p></div><div class="col-12 col-sm-4 text-center menu"><ul class=list-unstyled><li><a href=/blog-bitix/tags/java/>Java</a></li><li><a href=/blog-bitix/tags/gnu-linux/>GNU/Linux</a></li><li><a href=/blog-bitix/tags/javascript/>JavaScript</a></li><li><a href=/blog-bitix/tags/tapestry/>Tapestry</a></li><li><a href=/blog-bitix/archive/>Archivo y hemeroteca</a></li><li><a href=/blog-bitix/pages/links/>Enlaces</a></li><li><a href=/blog-bitix/pages/advertising/>Publicidad</a></li><li><a href=/blog-bitix/pages/donate/>Donaciones</a></li><li><a href=/blog-bitix/pages/about/>Acerca de...</a></li></ul></div><div class="col-12 col-sm-4 text-center links"><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class=row><div class=col-12>Copyleft <span class=copyleft>&copy;</span> 2019 - <a href=https://creativecommons.org/licenses/by-sa/4.0/ rel=nofollow rel=license><img alt="Licencia de Creative Commons" title="Licencia de Creative Commons" style=border-width:0 src=https://licensebuttons.net/l/by-sa/4.0/80x15.png class=licencia></a><br><a href=https://twitter.com/blogstackinfo rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/blog-stack.png alt="Blog Stack" title="Blog Stack"></a>
<a href=https://www.planetacodigo.com/ rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/planeta-codigo.png alt="Planeta código" title="Planeta código"></a><br><span xmlns:dct=http://purl.org/dc/terms/ property=dct:title><a href=https://picodotdev.github.io/blog-bitix/ rel=nofollow>Blog Bitix</a></span> by <a xmlns:cc=https://creativecommons.org/ns# href=https://picodotdev.github.io/blog-bitix/ property=cc:attributionName rel=cc:attributionurl>pico.dev</a> is licensed under a <a rel=license href=https://creativecommons.org/licenses/by-sa/4.0/>Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional License</a>.<br><span class=credit>Powered by <a href=https://gohugo.io/ rel=nofollow title="A fast and modern static website engine">Hugo</a> and <a href=https://pages.github.com/ title="Websites for you and your projects">GitHub Pages</a>.</span>
<span class=credit>Background patterns from <a href=https://www.toptal.com/designers/subtlepatterns/ rel=nofollow>Subtle Patterns</a>.</span></div></div></footer></div><div class=blueimp-gallery-container><div id=blueimp-gallery class="blueimp-gallery blueimp-gallery-controls" data-use-bootstrap-modal=false><div class=slides></div><h3 class=title></h3><a class=prev>‹</a>
<a class=next>›</a>
<a class=close>×</a>
<a class=play-pause></a><ol class=indicator></ol><div class="modal fade"><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close aria-hidden=true>&times;</button><h4 class=modal-title></h4></div><div class="modal-body next"></div><div class=modal-footer><button type=button class="btn btn-default pull-left prev">
<i class="glyphicon glyphicon-chevron-left"></i>Anterior</button>
<button type=button class="btn btn-primary next">
Siguiente
<i class="glyphicon glyphicon-chevron-right"></i></button></div></div></div></div></div></div><script type=text/javascript>window.cookieconsent_options={"message":"Esta bitácora te informa de la obviedad de que utiliza «cookies», propias y de servicios como Google Analytics y Google AdSense entre otros.","dismiss":"Aceptar","learnMore":"Más información","link":null,"theme":"dark-bottom"};</script><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js async></script></body></html>
<!doctype html><html lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=picodotdev><meta name=keywords content="java,programacion,software,hardware,tapestry,software libre,gnu,linux,gnu/linux,unix,arch,arch linux,html,css,javascript"><meta name=description content="Aún con el reciente auge de las bases de datos NoSQL las bases de datos relacionales siguen siendo la opción usada mayoritariamente para persistir los datos de una aplicación. El potente lenguaje SQL permite obtener, modificar, insertar y eliminar datos de forma declarativa. Una característica deseada de las bases de datos relacionales es la de mantener con transacciones la integridad referencial y consistencia de los datos en todo momento que las bases de datos NoSQL no ofrecen aunque estas últimas a cambio ofrecen mejores opciones para escalar. &hellip;"><base href=https://picodotdev.github.io/blog-bitix/><title>Introducción a la base de datos relacional PostgreSQL</title><link rel=author type=text/plain href=humans.txt><link rel="shortcut icon" href=assets/favicon.ico><link rel=apple-touch-icon-precomposed sizes=144x144 href=assets/apple-touch-icon-144-precomposed.png><link rel=canonical href=https://picodotdev.github.io/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/><link href=index.xml rel=alternate type=application/rss+xml title="Blog Bitix"><link rel=stylesheet type=text/css href="//fonts.googleapis.com/css?family=PT+Serif:400,700italic,700,400italic"><link rel=stylesheet type=text/css href=assets/libs/bootstrap-4.0.0/css/bootstrap.min.css><link rel=stylesheet type=text/css href=assets/libs/Gallery-2.30.0/css/blueimp-gallery.min.css><link rel=stylesheet type=text/css href=assets/css/syntax.css><link rel=stylesheet type=text/css href=assets/css/main.css><script src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js async></script><script type=text/javascript>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:'ca-pub-3533636310991304',enable_page_level_ads:true});</script><script type=text/javascript async>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-12874075-4','picodotdev.github.io');ga('send','pageview');</script><script type=text/javascript src=assets/libs/require.js></script><script type=text/javascript src=assets/js/main.js></script><script type=text/javascript src=assets/js/theme.js async></script><script type=text/javascript src="//platform-api.sharethis.com/js/sharethis.js#property=5920c4ce1bd0670011e06acd&product=inline-share-buttons" async></script><script type=text/javascript src=assets/js/app.js async></script></head><body><div class=container><div class=row><div class=col><header><div class=row><div class="col-12 col-lg-4"></div><div class="col-12 col-lg-4"><h2 class=title><a href=https://picodotdev.github.io/blog-bitix/>Blog Bitix</a></h2><div class=links><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class="col-12 col-lg-4 text-center"><form name=query class="form-inline search" onsubmit="return false;"><div class=input-group><input type=text name=q class=form-control placeholder="Buscar en Blog Bitix">
<span class=input-group-btn><button class="btn btn-secondary" type=submit>Buscar</button></span></div></form><form name=search action=https://duckduckgo.com/ method=get class=hidden data-site=https://picodotdev.github.io/blog-bitix/><input type=hidden name=q></form></div></div><div class=row><div class=col-12><nav class="nav nav-pills nav-fill"><a href=/blog-bitix/tags/java/ class="nav-item nav-link">Java</a>
<a href=/blog-bitix/tags/gnu-linux/ class="nav-item nav-link">GNU/Linux</a>
<a href=/blog-bitix/tags/javascript/ class="nav-item nav-link">JavaScript</a>
<a href=/blog-bitix/tags/tapestry/ class="nav-item nav-link">Tapestry</a>
<a href=/blog-bitix/archive/ class="nav-item nav-link">Archivo y hemeroteca</a>
<a href=/blog-bitix/pages/links/ class="nav-item nav-link">Enlaces</a>
<a href=/blog-bitix/pages/about/ class="nav-item nav-link">Acerca de...</a></nav></div></div></header></div></div><div class=row><div class="col-12 col-lg-8"><div class=row><div class=col-12><article itemscope itemtype=http://schema.org/BlogPosting><meta itemprop=inLanguage content=es><meta itemprop=keywords content="blog-stack, gnu-linux, planeta-codigo, planeta-linux, programacion"><h1 itemprop=name>Introducción a la base de datos relacional PostgreSQL</h1><p class=information>Escrito por <span itemscope itemtype=http://schema.org/Person><span itemprop=name>picodotdev</span></span> el <time itemprop=datePublished datetime=2017-05-27>27/05/2017</time>, actualizado el <time itemprop=dateModified datetime=2017-05-28>28/05/2017</time>.<br><a href=tags/blog-stack/>blog-stack</a> <a href=tags/gnu-linux/>gnu-linux</a> <a href=tags/planeta-codigo/>planeta-codigo</a> <a href=tags/planeta-linux/>planeta-linux</a> <a href=tags/programacion/>programacion</a><br><a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/ itemprop=url>Enlace permanente</a>
<a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/#comments>Comentarios</a></p><p class=summary itemprop=about>De todas las funcionalidades que tiene SQL muchos desarrolladores solo usamos un pequeño conjunto de las posibilidades del lenguaje. Algunas bases de datos no implementan muchas posibilidades del lenguaje SQL y no son usables en esos sistemas, PostgreSQL es una de las bases de datos relacionales que mejor soporta el estándar ANSI-SQL. Conociendo sus posibilidades podremos implementar funcionalidades de forma más sencilla o con mejor rendimiento.</p><ins class=adsbygoogle style=display:inline-block;width:728px;height:90px data-ad-client=ca-pub-3533636310991304 data-ad-slot=5966819782 data-type=leaderboard></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><div class=content itemprop=articleBody><meta itemprop=wordCount content=3626><div class=logotypes style=float:right><img src=assets/images/logotipos/postgresql.svg class=right width=200 alt=PostgreSQL title=PostgreSQL></div><p>Aún con el reciente auge de las bases de datos NoSQL las bases de datos relacionales siguen siendo la opción usada mayoritariamente para persistir los datos de una aplicación. El potente <a href=https://en.wikipedia.org/wiki/SQL>lenguaje SQL</a> permite obtener, modificar, insertar y eliminar datos de forma declarativa. Una característica deseada de las bases de datos relacionales es la de mantener con transacciones la integridad referencial y consistencia de los datos en todo momento que las bases de datos NoSQL no ofrecen aunque estas últimas a cambio ofrecen mejores opciones para escalar. Por otro lado los datos ya sean en una base de datos relacional o NoSQL seguirán un esquema aunque en este último caso no se exija, las bases de datos relacionales al exigir que los datos sigan un esquema evitará inconsistencias y los tipos de los datos serán los definidos en la tabla de datos en las que se guarden.</p><p>De las bases de datos relacionales más utilizadas que tienen una licencia de software libre están <a href=https://www.mysql.com/>MySQL</a>, <a href=https://mariadb.org/>MariaDB</a> y <a href=https://www.postgresql.org/>PostgreSQL</a>, con licencia privativa y comerciales están <a href=https://www.microsoft.com/en-us/sql-server/sql-server-2016>Microsoft SQL Server</a>, <a href=https://www.oracle.com/database/index.html>Oracle</a> y <a href=https://www.ibm.com/analytics/us/en/technology/db2/>DB2</a> siendo su coste significativo en algunos casos solo alcanzable por grandes organizaciones. PostgreSQL con su licencia de software libre es una de las bases de datos más avanzadas soportando muchas de las opciones definidas en el estándar del lenguaje SQL.</p><p>Muchos desarrolladores conocemos las opciones básicas del lenguaje SQL, las sentencias <em>insert</em>, <em>update</em>, <em>delete</em> y <em>select</em>, sin embargo las últimas versiones del lenguaje SQL añade muchas posibilidades que quizá desconozcamos. PostgreSQL por ejemplo soporta inserciones de múltiples filas en una misma sentencia, actualización o inserción con la sentencia <em>upsert</em>, <em>window functions</em>, <em>common table expressions</em> o consultas recursivas. PostgreSQL además tiene un sistema de tipos avanzado pudiendo definir tipos de datos personalizados y funciones sobre esos tipos asi como herencia que son motivos por los cuales se autodenomina una base de datos <em>object-relational</em>.</p><p>Veamos algunos ejemplos de estas características del lenguaje SQL y que PostgreSQL soporta siendo una de las bases de datos relacionales más <em>ANSI-SQL compliant</em>. Para los casos demostrativos de las sentencias SQL usaré una base de datos de ejemplo con unas pocas tablas y datos sobre ciudades, países, población y lenguajes obtenida de <a href=http://pgfoundry.org/projects/dbsamples/>PgFoundry Sample Databases</a>, hay varias en concreto usaré la base de datos <em>world</em>. En la página de <a href=https://wiki.postgresql.org/wiki/Sample_Databases>bases de datos ejemplo para PostgreSQL</a> hay otras.</p><p>Para una fácil instalación de una instancia de la base de datos PostgreSQL usaré <a href=https://www.docker.com/>Docker</a> con la que una vez terminados los ejemplos se puede eliminar sin dejar ningún rastro. Si aún no has usado Docker puedes leer la <a href=https://picodotdev.github.io/blog-bitix/series/docker/>serie de artículos sobre Docker</a> que he escrito.</p><h3 id=instalación-postgresql-con-docker>Instalación PostgreSQL con Docker</h3><p>Una vez instalado Docker e iniciado su servicio y con el comando <code>docker-compose</code> y el archivo <em>docker-compose.yml</em> que contiene la definición del contenedor lo iniciamos con el comando <code>docker-compose up</code>. El comando <code>docker ps</code> lista los contenedores en ejecución y con el comando <code>docker exec</code> iniciamos un proceso bash en el contenedor indicado con su identificativo.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-YAML data-lang=YAML><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-YAML data-lang=YAML>postgres<span class=p>:</span><span class=w>
</span><span class=w>  </span>image<span class=p>:</span><span class=w> </span>postgres<span class=p>:</span>alpine<span class=w>
</span><span class=w>  </span>ports<span class=p>:</span><span class=w>
</span><span class=w>    </span>-<span class=w> </span><span class=m>5432</span><span class=p>:</span><span class=m>5432</span><span class=w>
</span><span class=w>  </span>environment<span class=p>:</span><span class=w>
</span><span class=w>    </span>-<span class=w> </span>POSTGRES_USER=admin<span class=w>
</span><span class=w>    </span>-<span class=w> </span>POSTGRES_PASSWORD=admin<span class=w>
</span><span class=w></span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/docker-compose.yml target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/docker-compose.yml target=_blank>docker-compose.yml</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash>$ docker-compose up
$ docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES
aaef07b82d44        postgres:alpine     <span class=s2>&#34;docker-entrypoint...&#34;</span>   <span class=m>9</span> minutes ago       Up <span class=m>9</span> minutes        <span class=m>5432</span>/tcp            postgresql_postgres_1
$ docker <span class=nb>exec</span> -it aaef07b82d44 bash
bash-4.3# </code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/docker-compose.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/docker-compose.sh target=_blank>docker-compose.sh</a></div></div><h3 id=comandos-básicos-del-shell-psql>Comandos básicos del <em>shell</em> psql</h3><p>El <em>shell</em> de psql usa varios comandos precedidos por una contrabarra para interpretar algunos comandos muy útiles como listar las bases de datos, cambiar de base de datos de trabajo, listar las tablas de una base de datos, mostrar la definición de una tabla para saber sus campos y tipos o salir del <em>shell</em>. Los siguientes son solo unos pocos de los disponibles.</p><ul><li><em>\l</em>: lista las bases de datos de la instancia de PostgreSQL.</li><li><em>\connect [database]</em>: cambia de base de datos actual de trabajo.</li><li><em>\dt</em>: lista las tablas de la base de datos actual de trabajo.</li><li><em>\d+ [table]</em>: muestra la definición de una tabla de la base de datos actual de trabajo.</li><li><p><em>\q</em>: sale del intérprete de comandos del <em>shell</em> de PostgreSQL.</p></li><li><p><a href=https://www.postgresql.org/docs/current/static/app-psql.html>psql <em>shell</em></a></p></li></ul><h3 id=importación-base-de-datos-de-ejemplo>Importación base de datos de ejemplo</h3><p>Antes de lanzar sentencias SQL hay que crear una base de datos con varias tablas y datos, en este caso usando una base de datos de ejemplo que se descarga con el comando <code>wget</code>, se descomprime, se crea un nuevo esquema y se importan las tablas y datos, finalmente se listas las definiciones de las tablas.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash>bash-4.3# wget http://pgfoundry.org/frs/download.php/527/world-1.0.tar.gz
bash-4.3# tar -zxvf world-1.0.tar.gz

bash-4.3# psql -U admin
<span class=nv>admin</span><span class=o>=</span><span class=c1># create database world;</span>
<span class=nv>admin</span><span class=o>=</span><span class=c1># \q</span>

bash-4.3# psql -U admin world &lt; dbsamples-0.1/world/world.sql

bash-4.3# psql -U admin
<span class=nv>admin</span><span class=o>=</span><span class=c1># \l</span>
                                 List of databases
   Name    <span class=p>|</span>  Owner   <span class=p>|</span> Encoding <span class=p>|</span>  Collate   <span class=p>|</span>   Ctype    <span class=p>|</span>   Access privileges   
-----------+----------+----------+------------+------------+-----------------------
 admin     <span class=p>|</span> postgres <span class=p>|</span> UTF8     <span class=p>|</span> en_US.utf8 <span class=p>|</span> en_US.utf8 <span class=p>|</span> 
 companies <span class=p>|</span> admin    <span class=p>|</span> UTF8     <span class=p>|</span> en_US.utf8 <span class=p>|</span> en_US.utf8 <span class=p>|</span> 
 postgres  <span class=p>|</span> postgres <span class=p>|</span> UTF8     <span class=p>|</span> en_US.utf8 <span class=p>|</span> en_US.utf8 <span class=p>|</span> 
 template0 <span class=p>|</span> postgres <span class=p>|</span> UTF8     <span class=p>|</span> en_US.utf8 <span class=p>|</span> en_US.utf8 <span class=p>|</span> <span class=o>=</span>c/postgres          +
           <span class=p>|</span>          <span class=p>|</span>          <span class=p>|</span>            <span class=p>|</span>            <span class=p>|</span> <span class=nv>postgres</span><span class=o>=</span>CTc/postgres
 template1 <span class=p>|</span> postgres <span class=p>|</span> UTF8     <span class=p>|</span> en_US.utf8 <span class=p>|</span> en_US.utf8 <span class=p>|</span> <span class=o>=</span>c/postgres          +
           <span class=p>|</span>          <span class=p>|</span>          <span class=p>|</span>            <span class=p>|</span>            <span class=p>|</span> <span class=nv>postgres</span><span class=o>=</span>CTc/postgres
 world     <span class=p>|</span> admin    <span class=p>|</span> UTF8     <span class=p>|</span> en_US.utf8 <span class=p>|</span> en_US.utf8 <span class=p>|</span> 
<span class=o>(</span><span class=m>6</span> rows<span class=o>)</span>

<span class=nv>admin</span><span class=o>=</span><span class=c1># \connect world</span>
You are now connected to database <span class=s2>&#34;world&#34;</span> as user <span class=s2>&#34;admin&#34;</span>.
<span class=nv>world</span><span class=o>=</span><span class=c1># \dt</span>
            List of relations
 Schema <span class=p>|</span>      Name       <span class=p>|</span> Type  <span class=p>|</span> Owner 
--------+-----------------+-------+-------
 public <span class=p>|</span> city            <span class=p>|</span> table <span class=p>|</span> admin
 public <span class=p>|</span> country         <span class=p>|</span> table <span class=p>|</span> admin
 public <span class=p>|</span> countrylanguage <span class=p>|</span> table <span class=p>|</span> admin
<span class=o>(</span><span class=m>3</span> rows<span class=o>)</span>
<span class=nv>world</span><span class=o>=</span><span class=c1># \d+ city</span>
                              Table <span class=s2>&#34;public.city&#34;</span>
   Column    <span class=p>|</span>     Type     <span class=p>|</span> Modifiers <span class=p>|</span> Storage  <span class=p>|</span> Stats target <span class=p>|</span> Description 
-------------+--------------+-----------+----------+--------------+-------------
 id          <span class=p>|</span> integer      <span class=p>|</span> not null  <span class=p>|</span> plain    <span class=p>|</span>              <span class=p>|</span> 
 name        <span class=p>|</span> text         <span class=p>|</span> not null  <span class=p>|</span> extended <span class=p>|</span>              <span class=p>|</span> 
 countrycode <span class=p>|</span> character<span class=o>(</span><span class=m>3</span><span class=o>)</span> <span class=p>|</span> not null  <span class=p>|</span> extended <span class=p>|</span>              <span class=p>|</span> 
 district    <span class=p>|</span> text         <span class=p>|</span> not null  <span class=p>|</span> extended <span class=p>|</span>              <span class=p>|</span> 
 population  <span class=p>|</span> integer      <span class=p>|</span> not null  <span class=p>|</span> plain    <span class=p>|</span>              <span class=p>|</span> 
Indexes:
    <span class=s2>&#34;city_pkey&#34;</span> PRIMARY KEY, btree <span class=o>(</span>id<span class=o>)</span>
Referenced by:
    TABLE <span class=s2>&#34;country&#34;</span> CONSTRAINT <span class=s2>&#34;country_capital_fkey&#34;</span> FOREIGN KEY <span class=o>(</span>capital<span class=o>)</span> REFERENCES city<span class=o>(</span>id<span class=o>)</span>

<span class=nv>world</span><span class=o>=</span><span class=c1># \d+ country</span>
                               Table <span class=s2>&#34;public.country&#34;</span>
     Column     <span class=p>|</span>     Type      <span class=p>|</span> Modifiers <span class=p>|</span> Storage  <span class=p>|</span> Stats target <span class=p>|</span> Description 
----------------+---------------+-----------+----------+--------------+-------------
 code           <span class=p>|</span> character<span class=o>(</span><span class=m>3</span><span class=o>)</span>  <span class=p>|</span> not null  <span class=p>|</span> extended <span class=p>|</span>              <span class=p>|</span> 
 name           <span class=p>|</span> text          <span class=p>|</span> not null  <span class=p>|</span> extended <span class=p>|</span>              <span class=p>|</span> 
 continent      <span class=p>|</span> text          <span class=p>|</span> not null  <span class=p>|</span> extended <span class=p>|</span>              <span class=p>|</span> 
 region         <span class=p>|</span> text          <span class=p>|</span> not null  <span class=p>|</span> extended <span class=p>|</span>              <span class=p>|</span> 
 surfacearea    <span class=p>|</span> real          <span class=p>|</span> not null  <span class=p>|</span> plain    <span class=p>|</span>              <span class=p>|</span> 
 indepyear      <span class=p>|</span> smallint      <span class=p>|</span>           <span class=p>|</span> plain    <span class=p>|</span>              <span class=p>|</span> 
 population     <span class=p>|</span> integer       <span class=p>|</span> not null  <span class=p>|</span> plain    <span class=p>|</span>              <span class=p>|</span> 
 lifeexpectancy <span class=p>|</span> real          <span class=p>|</span>           <span class=p>|</span> plain    <span class=p>|</span>              <span class=p>|</span> 
 gnp            <span class=p>|</span> numeric<span class=o>(</span><span class=m>10</span>,2<span class=o>)</span> <span class=p>|</span>           <span class=p>|</span> main     <span class=p>|</span>              <span class=p>|</span> 
 gnpold         <span class=p>|</span> numeric<span class=o>(</span><span class=m>10</span>,2<span class=o>)</span> <span class=p>|</span>           <span class=p>|</span> main     <span class=p>|</span>              <span class=p>|</span> 
 localname      <span class=p>|</span> text          <span class=p>|</span> not null  <span class=p>|</span> extended <span class=p>|</span>              <span class=p>|</span> 
 governmentform <span class=p>|</span> text          <span class=p>|</span> not null  <span class=p>|</span> extended <span class=p>|</span>              <span class=p>|</span> 
 headofstate    <span class=p>|</span> text          <span class=p>|</span>           <span class=p>|</span> extended <span class=p>|</span>              <span class=p>|</span> 
 capital        <span class=p>|</span> integer       <span class=p>|</span>           <span class=p>|</span> plain    <span class=p>|</span>              <span class=p>|</span> 
 code2          <span class=p>|</span> character<span class=o>(</span><span class=m>2</span><span class=o>)</span>  <span class=p>|</span> not null  <span class=p>|</span> extended <span class=p>|</span>              <span class=p>|</span> 
Indexes:
    <span class=s2>&#34;country_pkey&#34;</span> PRIMARY KEY, btree <span class=o>(</span>code<span class=o>)</span>
Check constraints:
    <span class=s2>&#34;country_continent_check&#34;</span> CHECK <span class=o>(</span><span class=nv>continent</span> <span class=o>=</span> <span class=s1>&#39;Asia&#39;</span>::text OR <span class=nv>continent</span> <span class=o>=</span> <span class=s1>&#39;Europe&#39;</span>::text OR <span class=nv>continent</span> <span class=o>=</span> <span class=s1>&#39;North America&#39;</span>::text OR <span class=nv>continent</span> <span class=o>=</span> <span class=s1>&#39;Africa&#39;</span>::text OR <span class=nv>continent</span> <span class=o>=</span> <span class=s1>&#39;Oceania&#39;</span>::text OR <span class=nv>continent</span> <span class=o>=</span> <span class=s1>&#39;Antarctica&#39;</span>::text OR <span class=nv>continent</span> <span class=o>=</span> <span class=s1>&#39;South America&#39;</span>::text<span class=o>)</span>
Foreign-key constraints:
    <span class=s2>&#34;country_capital_fkey&#34;</span> FOREIGN KEY <span class=o>(</span>capital<span class=o>)</span> REFERENCES city<span class=o>(</span>id<span class=o>)</span>
Referenced by:
    TABLE <span class=s2>&#34;countrylanguage&#34;</span> CONSTRAINT <span class=s2>&#34;countrylanguage_countrycode_fkey&#34;</span> FOREIGN KEY <span class=o>(</span>countrycode<span class=o>)</span> REFERENCES country<span class=o>(</span>code<span class=o>)</span>
    
<span class=nv>world</span><span class=o>=</span><span class=c1># \d+ countrylanguage</span>
                         Table <span class=s2>&#34;public.countrylanguage&#34;</span>
   Column    <span class=p>|</span>     Type     <span class=p>|</span> Modifiers <span class=p>|</span> Storage  <span class=p>|</span> Stats target <span class=p>|</span> Description 
-------------+--------------+-----------+----------+--------------+-------------
 countrycode <span class=p>|</span> character<span class=o>(</span><span class=m>3</span><span class=o>)</span> <span class=p>|</span> not null  <span class=p>|</span> extended <span class=p>|</span>              <span class=p>|</span> 
 language    <span class=p>|</span> text         <span class=p>|</span> not null  <span class=p>|</span> extended <span class=p>|</span>              <span class=p>|</span> 
 isofficial  <span class=p>|</span> boolean      <span class=p>|</span> not null  <span class=p>|</span> plain    <span class=p>|</span>              <span class=p>|</span> 
 percentage  <span class=p>|</span> real         <span class=p>|</span> not null  <span class=p>|</span> plain    <span class=p>|</span>              <span class=p>|</span> 
Indexes:
    <span class=s2>&#34;countrylanguage_pkey&#34;</span> PRIMARY KEY, btree <span class=o>(</span>countrycode, language<span class=o>)</span>
Foreign-key constraints:
    <span class=s2>&#34;countrylanguage_countrycode_fkey&#34;</span> FOREIGN KEY <span class=o>(</span>countrycode<span class=o>)</span> REFERENCES country<span class=o>(</span>code<span class=o>)</span>
    </code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/database-world.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/database-world.sh target=_blank>database-world.sh</a></div></div><p>Para probar que la base de datos se ha importado correctamente la siguiente sentencia SQL lista el número de ciudades por país ordenados alfabéticamente o por número de ciudades descendentemente.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-SQL data-lang=SQL><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-SQL data-lang=SQL><span class=n>world</span><span class=o>=#</span> 

<span class=k>select</span> <span class=n>co</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=k>count</span><span class=p>(</span><span class=n>ci</span><span class=p>.</span><span class=n>id</span><span class=p>)</span> <span class=k>as</span> <span class=n>n</span> <span class=k>from</span> <span class=n>country</span> <span class=n>co</span> <span class=k>inner</span> <span class=k>join</span> <span class=n>city</span> <span class=n>ci</span> <span class=k>on</span> <span class=n>ci</span><span class=p>.</span><span class=n>countrycode</span> <span class=o>=</span> <span class=n>co</span><span class=p>.</span><span class=n>code</span> <span class=k>group</span> <span class=k>by</span> <span class=n>co</span><span class=p>.</span><span class=n>code</span> <span class=k>order</span> <span class=k>by</span> <span class=n>co</span><span class=p>.</span><span class=n>name</span><span class=p>;</span>
                 <span class=n>name</span>                  <span class=o>|</span>  <span class=n>n</span>  
<span class=c1>---------------------------------------+-----
</span><span class=c1></span> <span class=n>Afghanistan</span>                           <span class=o>|</span>   <span class=mi>4</span>
 <span class=n>Albania</span>                               <span class=o>|</span>   <span class=mi>1</span>
 <span class=n>Algeria</span>                               <span class=o>|</span>  <span class=mi>18</span>
 <span class=n>American</span> <span class=n>Samoa</span>                        <span class=o>|</span>   <span class=mi>2</span>
 <span class=n>Andorra</span>                               <span class=o>|</span>   <span class=mi>1</span>
 <span class=n>Angola</span>                                <span class=o>|</span>   <span class=mi>5</span>
 <span class=n>Anguilla</span>                              <span class=o>|</span>   <span class=mi>2</span>
 <span class=n>Antigua</span> <span class=k>and</span> <span class=n>Barbuda</span>                   <span class=o>|</span>   <span class=mi>1</span>
 <span class=n>Argentina</span>                             <span class=o>|</span>  <span class=mi>57</span>
 <span class=n>Armenia</span>                               <span class=o>|</span>   <span class=mi>3</span>
 <span class=n>Aruba</span>                                 <span class=o>|</span>   <span class=mi>1</span>
 <span class=n>Australia</span>                             <span class=o>|</span>  <span class=mi>14</span>
 <span class=n>Austria</span>                               <span class=o>|</span>   <span class=mi>6</span>
 <span class=n>Azerbaijan</span>                            <span class=o>|</span>   <span class=mi>4</span>
<span class=c1>--More--
</span><span class=c1></span>
<span class=k>select</span> <span class=n>co</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=k>count</span><span class=p>(</span><span class=n>ci</span><span class=p>.</span><span class=n>id</span><span class=p>)</span> <span class=k>as</span> <span class=n>n</span> <span class=k>from</span> <span class=n>country</span> <span class=n>co</span> <span class=k>inner</span> <span class=k>join</span> <span class=n>city</span> <span class=n>ci</span> <span class=k>on</span> <span class=n>ci</span><span class=p>.</span><span class=n>countrycode</span> <span class=o>=</span> <span class=n>co</span><span class=p>.</span><span class=n>code</span> <span class=k>group</span> <span class=k>by</span> <span class=n>co</span><span class=p>.</span><span class=n>code</span> <span class=k>order</span> <span class=k>by</span> <span class=n>n</span> <span class=k>desc</span><span class=p>;</span>
                 <span class=n>name</span>                  <span class=o>|</span>  <span class=n>n</span>  
<span class=c1>---------------------------------------+-----
</span><span class=c1></span> <span class=n>China</span>                                 <span class=o>|</span> <span class=mi>363</span>
 <span class=n>India</span>                                 <span class=o>|</span> <span class=mi>341</span>
 <span class=n>United</span> <span class=n>States</span>                         <span class=o>|</span> <span class=mi>274</span>
 <span class=n>Brazil</span>                                <span class=o>|</span> <span class=mi>250</span>
 <span class=n>Japan</span>                                 <span class=o>|</span> <span class=mi>248</span>
 <span class=n>Russian</span> <span class=n>Federation</span>                    <span class=o>|</span> <span class=mi>189</span>
 <span class=n>Mexico</span>                                <span class=o>|</span> <span class=mi>173</span>
 <span class=n>Philippines</span>                           <span class=o>|</span> <span class=mi>136</span>
 <span class=n>Germany</span>                               <span class=o>|</span>  <span class=mi>93</span>
 <span class=n>Indonesia</span>                             <span class=o>|</span>  <span class=mi>85</span>
 <span class=n>United</span> <span class=n>Kingdom</span>                        <span class=o>|</span>  <span class=mi>81</span>
 <span class=n>South</span> <span class=n>Korea</span>                           <span class=o>|</span>  <span class=mi>70</span>
 <span class=n>Iran</span>                                  <span class=o>|</span>  <span class=mi>67</span>
 <span class=n>Nigeria</span>                               <span class=o>|</span>  <span class=mi>64</span>
 <span class=n>Turkey</span>                                <span class=o>|</span>  <span class=mi>62</span>
 <span class=n>Pakistan</span>                              <span class=o>|</span>  <span class=mi>59</span>
 <span class=n>Spain</span>                                 <span class=o>|</span>  <span class=mi>59</span>
 <span class=n>Italy</span>                                 <span class=o>|</span>  <span class=mi>58</span>
 <span class=c1>--More--</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/sample-world.sql target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/sample-world.sql target=_blank>sample-world.sql</a></div></div><p>Para algunas sentencias usaré una base de datos un poco más sencilla que con una tabla para almacenar empresas.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash>bash-4.3# psql -U admin

<span class=nv>admin</span><span class=o>=</span><span class=c1># create database companies;</span>

<span class=nv>admin</span><span class=o>=</span><span class=c1># \connect companies</span>
<span class=nv>companies</span><span class=o>=</span>#

create table company<span class=o>(</span>
   ID             BIGSERIAL PRIMARY KEY NOT NULL,
   NAME           CHAR<span class=o>(</span><span class=m>50</span><span class=o>)</span> UNIQUE NOT NULL,
   FOUNDATION     DATE NOT NULL,
   ADDRESS        TEXT,
   EMPLOYEES      INTEGER
<span class=o>)</span><span class=p>;</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/database-companies.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/database-companies.sh target=_blank>database-companies.sh</a></div></div><h3 id=inserción-múltiple>Inserción múltiple</h3><p>Si insertamos muchos datos en una misma tabla podemos insertarlos en una única sentencia en vez de múltiples para un mejor rendimiento, evitando enviar al servidor mútiples sentencias individuales.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-SQL data-lang=SQL><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-SQL data-lang=SQL><span class=n>companies</span><span class=o>=#</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>company</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>foundation</span><span class=p>,</span> <span class=n>address</span><span class=p>,</span> <span class=n>employees</span><span class=p>)</span> <span class=k>VALUES</span>
  <span class=p>(</span><span class=s1>&#39;Oracle&#39;</span><span class=p>,</span> <span class=s1>&#39;1977-06-16&#39;</span><span class=p>,</span> <span class=s1>&#39;Redwood Shores, California, Estados Unidos&#39;</span><span class=p>,</span> <span class=mi>105000</span><span class=p>),</span>
  <span class=p>(</span><span class=s1>&#39;Apple&#39;</span><span class=p>,</span> <span class=s1>&#39;1976-04-01&#39;</span><span class=p>,</span> <span class=s1>&#39;1 Infinite Loop, Cupertino, California, Estados Unidos&#39;</span><span class=p>,</span> <span class=mi>80000</span><span class=p>),</span>
  <span class=p>(</span><span class=s1>&#39;Microsoft&#39;</span><span class=p>,</span> <span class=s1>&#39;1975-04-04&#39;</span><span class=p>,</span> <span class=s1>&#39;Redmond, Washington, Estados Unidos&#39;</span><span class=p>,</span> <span class=mi>120584</span><span class=p>),</span>
  <span class=p>(</span><span class=s1>&#39;RedHat&#39;</span><span class=p>,</span> <span class=s1>&#39;1993-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;Raleigh, Carolina del Norte 100 East Davie Street&#39;</span><span class=p>,</span> <span class=mi>6100</span><span class=p>),</span>
  <span class=p>(</span><span class=s1>&#39;Sun Microsystems&#39;</span><span class=p>,</span> <span class=s1>&#39;1982-02-24&#39;</span><span class=p>,</span> <span class=s1>&#39;4150 Network Circle, Santa Clara, California, Estados Unidos&#39;</span><span class=p>,</span> <span class=mi>35000</span><span class=p>);</span>

<span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>company</span><span class=p>;</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/insert-multiple.sql target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/insert-multiple.sql target=_blank>insert-multiple.sql</a></div></div><ul><li><a href=https://www.postgresql.org/docs/current/static/dml-insert.html>Inserting Data</a></li></ul><h3 id=upsert>UPSERT</h3><p>En algún caso quizá tengamos la necesidad de hacer un <em>insert</em> y si el registro ya existe hacer un <em>update</em>. Usando la expresión <em>ON CONFLICT UPDATE</em> conocida como <em>UPSERT</em> podemos hacer esta operación que nos evitará hacerlo de forma programática en la aplicación.</p><p>En el ejemplo, se hace una <em>insert</em> de la empresa <em>Canonical</em>, en el segundo caso como esta empresa ya está creada y hay una restricción en el nombre para que sea único se realiza un <em>update</em> y se actualiza su número de empleados pero no se inserta un nuevo registro duplicado.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-SQL data-lang=SQL><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-SQL data-lang=SQL><span class=n>companies</span><span class=o>=#</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>company</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>foundation</span><span class=p>,</span> <span class=n>address</span><span class=p>,</span> <span class=n>employees</span><span class=p>)</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;Canonical&#39;</span><span class=p>,</span> <span class=s1>&#39;2004-03-05&#39;</span><span class=p>,</span> <span class=s1>&#39;London, United Kingdom&#39;</span><span class=p>,</span> <span class=s1>&#39;700&#39;</span><span class=p>)</span> <span class=k>ON</span> <span class=n>CONFLICT</span> <span class=p>(</span><span class=n>name</span><span class=p>)</span> <span class=k>DO</span> <span class=k>UPDATE</span>
<span class=k>SET</span> <span class=n>foundation</span> <span class=o>=</span> <span class=n>EXCLUDED</span><span class=p>.</span><span class=n>foundation</span><span class=p>,</span> <span class=n>address</span> <span class=o>=</span> <span class=n>EXCLUDED</span><span class=p>.</span><span class=n>address</span><span class=p>,</span> <span class=n>employees</span> <span class=o>=</span> <span class=n>EXCLUDED</span><span class=p>.</span><span class=n>employees</span><span class=p>;</span>

<span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>company</span><span class=p>;</span>
 <span class=n>id</span> <span class=o>|</span>                        <span class=n>name</span>                        <span class=o>|</span> <span class=n>foundation</span> <span class=o>|</span>        <span class=n>address</span>         <span class=o>|</span> <span class=n>employees</span> 
<span class=c1>----+----------------------------------------------------+------------+------------------------+-----------
</span><span class=c1></span>  <span class=mi>2</span> <span class=o>|</span> <span class=n>Canonical</span>                                          <span class=o>|</span> <span class=mi>2004</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>05</span> <span class=o>|</span> <span class=n>London</span><span class=p>,</span> <span class=n>United</span> <span class=n>Kingdom</span> <span class=o>|</span>       <span class=mi>700</span>
<span class=p>(</span><span class=mi>1</span> <span class=k>row</span><span class=p>)</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>company</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>foundation</span><span class=p>,</span> <span class=n>address</span><span class=p>,</span> <span class=n>employees</span><span class=p>)</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>&#39;Canonical&#39;</span><span class=p>,</span> <span class=s1>&#39;2004-03-05&#39;</span><span class=p>,</span> <span class=s1>&#39;London, United Kingdom&#39;</span><span class=p>,</span> <span class=s1>&#39;750&#39;</span><span class=p>)</span> <span class=k>ON</span> <span class=n>CONFLICT</span> <span class=p>(</span><span class=n>name</span><span class=p>)</span> <span class=k>DO</span> <span class=k>UPDATE</span>
<span class=k>SET</span> <span class=n>foundation</span> <span class=o>=</span> <span class=n>EXCLUDED</span><span class=p>.</span><span class=n>foundation</span><span class=p>,</span> <span class=n>address</span> <span class=o>=</span> <span class=n>EXCLUDED</span><span class=p>.</span><span class=n>address</span><span class=p>,</span> <span class=n>employees</span> <span class=o>=</span> <span class=n>EXCLUDED</span><span class=p>.</span><span class=n>employees</span><span class=p>;</span>

<span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>company</span><span class=p>;</span>
 <span class=n>id</span> <span class=o>|</span>                        <span class=n>name</span>                        <span class=o>|</span> <span class=n>foundation</span> <span class=o>|</span>        <span class=n>address</span>         <span class=o>|</span> <span class=n>employees</span> 
<span class=c1>----+----------------------------------------------------+------------+------------------------+-----------
</span><span class=c1></span>  <span class=mi>2</span> <span class=o>|</span> <span class=n>Canonical</span>                                          <span class=o>|</span> <span class=mi>2004</span><span class=o>-</span><span class=mi>03</span><span class=o>-</span><span class=mi>05</span> <span class=o>|</span> <span class=n>London</span><span class=p>,</span> <span class=n>United</span> <span class=n>Kingdom</span> <span class=o>|</span>       <span class=mi>750</span>
<span class=p>(</span><span class=mi>1</span> <span class=k>row</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/upsert.sql target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/upsert.sql target=_blank>upsert.sql</a></div></div><ul><li><a href=https://wiki.postgresql.org/wiki/UPSERT>UPSERT</a></li></ul><h3 id=common-table-expressions><em>Common table expressions</em></h3><p>Las cláusula <em>WITH</em> que define las <em>common table expressions</em> o <em>CTE</em> proporcionan una forma de escribir sentencias auxiliares para su uso en una sentencia más grande. Cada sentencia auxiliar de una cláusula <em>WITH</em> puede ser un <em>SELECT</em>, <em>INSERT</em>, <em>UPDATE</em> o <em>DELETE</em> y la sentencia primaria asociada a la cláusula <em>WITH</em> también puede ser un <em>SELECT</em>, <em>INSERT</em>, <em>UPDATE</em> o <em>DELETE</em>.</p><ul><li><a href=https://www.postgresql.org/docs/current/static/queries-with.html>WITH Queries (Common Table Expressions)</a></li></ul><h3 id=window-functions>Window functions</h3><p>Las <em>window functions</em> realizan cálculos sobre un conjunto de datos que están relacionados de alguna forma con la fila actual. Al contrario que las funciones de agregación el cálculo de las <em>window functions</em> no causan que las filas se agrupen en una única fila manteniéndose como filas separadas.</p><p>Usando la base de datos <em>world</em> que contienen ciudades y países con sus poblaciones con la siguiente consulta SQL se obtienen las tres ciudades más pobladas de Alemania, España, Francia e Italia con su porcentaje respecto al total del país. En este caso Berlín es la ciudad más poblada de Alemania con aproximadamente el 12% de la población de ese país. En este caso además de usar <em>windows functions</em> se usa una <em>Common Table Expressions</em> con la cláusula <em>WITH</em>.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-SQL data-lang=SQL><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-SQL data-lang=SQL><span class=k>WITH</span> <span class=n>city_rank</span> <span class=k>AS</span> <span class=p>(</span>
  <span class=k>SELECT</span> <span class=k>c</span><span class=p>.</span><span class=o>*</span><span class=p>,</span> <span class=n>rank</span><span class=p>()</span> <span class=n>OVER</span> <span class=n>w</span> <span class=k>AS</span> <span class=n>rank</span><span class=p>,</span> <span class=k>sum</span><span class=p>(</span><span class=n>population</span><span class=p>)</span> <span class=n>OVER</span> <span class=n>w</span> <span class=k>AS</span> <span class=n>country_cities_population</span>
    <span class=k>FROM</span> <span class=n>city</span> <span class=k>c</span>
    <span class=k>WHERE</span> <span class=n>countrycode</span> <span class=k>in</span> <span class=p>(</span><span class=s1>&#39;DEU&#39;</span><span class=p>,</span> <span class=s1>&#39;ESP&#39;</span><span class=p>,</span> <span class=s1>&#39;FRA&#39;</span><span class=p>,</span> <span class=s1>&#39;ITA&#39;</span><span class=p>)</span>
    <span class=n>WINDOW</span> <span class=n>w</span> <span class=k>AS</span> <span class=p>(</span><span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>countrycode</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>population</span> <span class=k>DESC</span> <span class=n>RANGE</span> <span class=k>BETWEEN</span> <span class=n>UNBOUNDED</span> <span class=n>PRECEDING</span> <span class=k>AND</span> <span class=n>UNBOUNDED</span> <span class=n>FOLLOWING</span><span class=p>)</span>
<span class=p>)</span>
<span class=k>SELECT</span> <span class=n>countrycode</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=k>CAST</span><span class=p>(</span><span class=n>population</span> <span class=o>*</span> <span class=mi>100</span> <span class=k>AS</span> <span class=nb>FLOAT</span><span class=p>)</span> <span class=o>/</span> <span class=n>country_cities_population</span> <span class=k>AS</span> <span class=n>percentage</span>
  <span class=k>FROM</span> <span class=n>city_rank</span>
  <span class=k>WHERE</span> <span class=n>rank</span> <span class=o>&lt;=</span> <span class=mi>3</span>
  <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>countrycode</span><span class=p>,</span> <span class=n>percentage</span> <span class=k>DESC</span><span class=p>;</span>
<span class=n>countrycode</span> <span class=o>|</span>       <span class=n>name</span>       <span class=o>|</span>    <span class=n>percentage</span>    
<span class=c1>-------------+------------------+------------------
</span><span class=c1></span> <span class=n>DEU</span>         <span class=o>|</span> <span class=n>Berlin</span>           <span class=o>|</span> <span class=mi>12</span><span class=p>.</span><span class=mi>9038090097256</span>
 <span class=n>DEU</span>         <span class=o>|</span> <span class=n>Hamburg</span>          <span class=o>|</span> <span class=mi>6</span><span class=p>.</span><span class=mi>49534626586983</span>
 <span class=n>DEU</span>         <span class=o>|</span> <span class=n>Munich</span> <span class=p>[</span><span class=n>München</span><span class=p>]</span> <span class=o>|</span> <span class=mi>4</span><span class=p>.</span><span class=mi>55148796461471</span>
 <span class=n>ESP</span>         <span class=o>|</span> <span class=n>Madrid</span>           <span class=o>|</span> <span class=mi>17</span><span class=p>.</span><span class=mi>2716981012094</span>
 <span class=n>ESP</span>         <span class=o>|</span> <span class=n>Barcelona</span>        <span class=o>|</span>  <span class=mi>9</span><span class=p>.</span><span class=mi>0193410129311</span>
 <span class=n>ESP</span>         <span class=o>|</span> <span class=n>Valencia</span>         <span class=o>|</span> <span class=mi>4</span><span class=p>.</span><span class=mi>43580068592419</span>
 <span class=n>FRA</span>         <span class=o>|</span> <span class=n>Paris</span>            <span class=o>|</span> <span class=mi>22</span><span class=p>.</span><span class=mi>9893166678457</span>
 <span class=n>FRA</span>         <span class=o>|</span> <span class=n>Marseille</span>        <span class=o>|</span> <span class=mi>8</span><span class=p>.</span><span class=mi>63681668244903</span>
 <span class=n>FRA</span>         <span class=o>|</span> <span class=n>Lyon</span>             <span class=o>|</span> <span class=mi>4</span><span class=p>.</span><span class=mi>81856551586274</span>
 <span class=n>ITA</span>         <span class=o>|</span> <span class=n>Roma</span>             <span class=o>|</span> <span class=mi>17</span><span class=p>.</span><span class=mi>5222222494716</span>
 <span class=n>ITA</span>         <span class=o>|</span> <span class=n>Milano</span>           <span class=o>|</span> <span class=mi>8</span><span class=p>.</span><span class=mi>62315477961551</span>
 <span class=n>ITA</span>         <span class=o>|</span> <span class=n>Napoli</span>           <span class=o>|</span> <span class=mi>6</span><span class=p>.</span><span class=mi>64557392020253</span>
<span class=p>(</span><span class=mi>12</span> <span class=k>rows</span><span class=p>)</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/window-functions.sql target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/window-functions.sql target=_blank>window-functions.sql</a></div></div><ul><li><a href=https://www.postgresql.org/docs/current/static/tutorial-window.html>Window Functions</a></li><li><a href=https://www.postgresql.org/docs/current/static/sql-expressions.html#SYNTAX-WINDOW-FUNCTIONS>Window Function Calls</a></li><li><a href=https://www.postgresql.org/docs/current/static/functions-window.html>Window Functions Functions</a></li><li><a href=https://www.postgresql.org/docs/current/static/queries-table-expressions.html#QUERIES-WINDOW>Window Function Processing</a></li></ul><h3 id=consultas-recursivas>Consultas recursivas</h3><p>El modificador <em>RECURSIVE</em> cambia la sentencia <em>WITH</em> de una conveniencia sintáctica en una funcionalidad que proporciona algo que no sería posible con el SQL que soporta algunas otras bases de datos. Usando <em>RECURSIVE</em>, una cláusula <em>WITH</em> puede referenciar su propia salida. Con esta cláusula las relaciones jerárquicas pueden implementarse sin usar <a href=https://stackoverflow.com/questions/4048151/what-are-the-options-for-storing-hierarchical-data-in-a-relational-database>otras soluciones más complejas</a>.</p><ul><li><a href=https://www.postgresql.org/docs/current/static/queries-with.html>WITH Queries (Common Table Expressions)</a></li></ul><h3 id=tipo-array-enumerado>Tipo array, enumerado</h3><p>Con la ayuda de los arrays podemos definir una columna con un conjunto de valores que en casos simples nos evitarán crear una tabla con una relación 1 a N. Además, con las funciones asociadas a los arrays podemos definir una columna con un conjunto de valores cuyos valores no se repitan o si la lista es un conjunto limitados de valores con un enumerado.</p><ul><li><a href=https://www.postgresql.org/docs/current/static/arrays.html>Arrays</a></li><li><a href=https://www.postgresql.org/docs/current/static/functions-array.html>Array Functions and Operators</a></li><li><a href=https://www.postgresql.org/docs/current/static/datatype.html>Data Types</a></li><li><a href=https://www.postgresql.org/docs/current/static/datatype-enum.html>Enumerated Types</a></li><li><a href=https://www.postgresql.org/docs/current/static/rangetypes.html>Range Types</a></li></ul><h3 id=tipo-personalizado>Tipo personalizado</h3><p>En PostgresSQL se pueden definir nuevos tipos de datos así como nuevas funciones sobre estos tipos de datos. Una vez definidos las columnas de las tablas pueden hacer uso de ellos. Pueden ser:</p><ul><li>Compuestos: están formados por una lista de nombres de atributos y tipos.</li><li>Enumerados: son una lista de una o más etiquetas.</li><li>Rangos</li><li>Base</li><li>Arrays: las columnas de una tabla se pueden definir como un array multidimensional de longitud variable. Se pueden crear arrays de cualquier de los tipos incorporados por defecto y de los tipos base, enumerados y compuestos.</li></ul><p>Creando tipos de datos personalizados se evita crear en las tablas varios campos de tipos básicos individuales pero relacionados y estos tipos se pueden reutilizar en la definición de varias tablas.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-SQL data-lang=SQL><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-SQL data-lang=SQL><span class=n>companies</span><span class=o>=#</span>

<span class=k>CREATE</span> <span class=k>TYPE</span> <span class=n>company_type</span> <span class=k>AS</span> <span class=n>ENUM</span> <span class=p>(</span><span class=s1>&#39;startup&#39;</span><span class=p>,</span> <span class=s1>&#39;pyme&#39;</span><span class=p>,</span> <span class=s1>&#39;multinational&#39;</span><span class=p>);</span>

<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>company</span> <span class=p>(</span>
   <span class=n>ID</span>             <span class=n>BIGSERIAL</span> <span class=k>PRIMARY</span> <span class=k>KEY</span> <span class=k>NOT</span> <span class=k>NULL</span><span class=p>,</span>
   <span class=n>NAME</span>           <span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span> <span class=k>UNIQUE</span> <span class=k>NOT</span> <span class=k>NULL</span><span class=p>,</span>
   <span class=k>TYPE</span>           <span class=n>COMPANY_TYPE</span> <span class=k>NOT</span> <span class=k>NULL</span><span class=p>,</span>
   <span class=n>FOUNDATION</span>     <span class=nb>DATE</span> <span class=k>NOT</span> <span class=k>NULL</span><span class=p>,</span>
   <span class=n>ADDRESS</span>        <span class=nb>TEXT</span><span class=p>,</span>
   <span class=n>EMPLOYEES</span>      <span class=nb>INTEGER</span> <span class=k>CONSTRAINT</span> <span class=n>employees_positive</span> <span class=k>CHECK</span> <span class=p>(</span><span class=n>EMPLOYEES</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span>
<span class=p>);</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/custom-types.sql target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/custom-types.sql target=_blank>custom-types.sql</a></div></div><ul><li><a href=https://www.postgresql.org/docs/current/static/datatype-money.html>Monetary Types</a></li><li><a href=https://www.postgresql.org/docs/current/static/sql-createtype.html>CREATE TYPE</a></li><li><a href=https://www.postgresql.org/docs/current/static/sql-createfunction.html>CREATE FUNCTION</a></li><li><a href=https://www.postgresql.org/docs/current/static/xfunc-sql.html>Query Language (SQL) Functions</a></li><li><a href=https://www.postgresql.org/docs/current/static/arrays.html>Arrays</a></li></ul><h3 id=índices>Índices</h3><p>Los índices cuando son utilizados son una forma que mejora enormemente el rendimiento de una consulta. Permiten buscar y obtener filas específicas mucho más rápido que sin un usar un índice.</p><ul><li><a href=https://www.postgresql.org/docs/current/static/indexes.html>Indexes</a></li></ul><h3 id=índice-parcial>Índice parcial</h3><p>Un índice parcial es un índice construido sobre un subconjunto de una tabla, el subconjunto es definido por una expresión condicional. El índice contiene entradas solo para las filas de la tabla que satisfacen el predicado.</p><p>La motivación de los índices parciales es evitar indexar valores comunes. Dado que una búsqueda para un valor común no usará el índice de todas maneras no hay necesidad de mantener esas filas en el índice. Esto reduce el tamaño del índice que hará más rápidas aquellas consultas que lo usen así como las actualizaciones de la tabla ya que no será necesario actualizarlo en todos los casos.</p><ul><li><a href=https://www.postgresql.org/docs/current/static/indexes-partial.html>Partial Indexes</a></li></ul><h3 id=índices-multicolumna>Índices multicolumna</h3><p>Un índice puede ser definido sobre más de una columna de una tabla. Son apropiados cuando hay consultas con predicados por las dos columnas del índice.</p><ul><li><a href=https://www.postgresql.org/docs/current/static/indexes-multicolumn.html>Multicolumn Indexes</a></li></ul><h3 id=restricciones-constraints>Restricciones, <em>Constraints</em></h3><p>Los tipos de datos son una forma de limitar los tipos de datos que pueden ser almacenados en una tabla. Para muchas aplicaciones las restricciones que proporcionan son demasiado simples. Por ejemplo, una columna que contenga el precio de un producto debería aceptar solo valores positivos. Pero no hay un tipo de datos que acepte solo números positivos. Otro problema es que quizá deseemos restringir el dato de una columna respecto a otras columnas o filas. Por ejemplo, en una tabla que contenga información de un producto el número del producto debería ser único.</p><p>SQL permite definir restricciones en columnas y tablas proporcionando el control sobre los datos que deseamos. Si se intentan almacenar datos en una columna que viola una restricción se lanza un error.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-SQL data-lang=SQL><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-SQL data-lang=SQL><span class=n>companies</span><span class=o>=#</span>

<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>company</span> <span class=p>(</span>
   <span class=n>ID</span>             <span class=n>BIGSERIAL</span> <span class=k>PRIMARY</span> <span class=k>KEY</span> <span class=k>NOT</span> <span class=k>NULL</span><span class=p>,</span>
   <span class=n>NAME</span>           <span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span> <span class=k>UNIQUE</span> <span class=k>NOT</span> <span class=k>NULL</span><span class=p>,</span>
   <span class=n>FOUNDATION</span>     <span class=nb>DATE</span> <span class=k>NOT</span> <span class=k>NULL</span><span class=p>,</span>
   <span class=n>ADDRESS</span>        <span class=nb>TEXT</span><span class=p>,</span>
   <span class=n>EMPLOYEES</span>      <span class=nb>INTEGER</span> <span class=k>CONSTRAINT</span> <span class=n>employees_positive</span> <span class=k>CHECK</span> <span class=p>(</span><span class=n>EMPLOYEES</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span>
<span class=p>);</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>company</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>foundation</span><span class=p>,</span> <span class=n>address</span><span class=p>,</span> <span class=n>employees</span><span class=p>)</span> <span class=k>VALUES</span>
<span class=p>(</span><span class=s1>&#39;Dummy&#39;</span><span class=p>,</span> <span class=s1>&#39;1970-01-01&#39;</span><span class=p>,</span> <span class=s1>&#39;Unknow&#39;</span><span class=p>,</span> <span class=o>-</span><span class=mi>10</span><span class=p>);</span>
<span class=n>ERROR</span><span class=p>:</span>  <span class=k>new</span> <span class=k>row</span> <span class=k>for</span> <span class=n>relation</span> <span class=s2>&#34;company&#34;</span> <span class=n>violates</span> <span class=k>check</span> <span class=k>constraint</span> <span class=s2>&#34;employees_positive&#34;</span>
<span class=n>DETAIL</span><span class=p>:</span>  <span class=n>Failing</span> <span class=k>row</span> <span class=k>contains</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>Dummy</span><span class=p>,</span> <span class=mi>1970</span><span class=o>-</span><span class=mi>01</span><span class=o>-</span><span class=mi>01</span><span class=p>,</span> <span class=n>Unknow</span><span class=p>,</span> <span class=o>-</span><span class=mi>10</span><span class=p>).</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/constraints.sql target=_blank>view raw</a></span>
<a href=/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/code/constraints.sql target=_blank>constraints.sql</a></div></div><ul><li><a href=https://www.postgresql.org/docs/current/static/ddl-constraints.html>Constraints</a></li></ul><h3 id=tipos-de-tablas>Tipos de tablas</h3><p>Si se especifica en la creación de la tabla <em>TEMPORARY</em> o <em>TEMP</em> esta es creada con una tabla temporal que es eliminada al final de la sesión u opcionalmente al finalizar la transacción actual. Si se especifica <em>UNLOGGED</em> es creada como no trazable haciendo que los datos escritos en la tabla no sean escritos en el <em>write-ahead log</em> que lo hace considerablemente más rápido que las tablas ordinarias. Sin embargo, no son seguras ante fallos.</p><ul><li><a href=https://www.postgresql.org/docs/current/static/sql-createtable.html>CREATE TABLE</a></li></ul><h3 id=pl-pgsql>PL/pgSQL</h3><p>PostgreSQL al igual que otras bases de datos ofrece un lenguaje procedural que puede ser usado para crear procedimientos de funciones o <em>triggers</em>, añadir estructuras de control al lenguaje SQL, realizar cálculos complejos, hereda todos los tipos de usuario, funciones y operadores, puede ser definido como de confianza por el servidor y es fácil de usar. El lenguaje sql es fácil de aprender y es común a las bases de datos relacionales pero cada sentencia SQL debe ser ejecutada individualmente por el servidor. Esto significa que la aplicación cliente debe enviar cada sentencia al servidor, esperar a que sea procesada, recibir y procesar los resultados, realizar algún cálculo y entonces enviar más sentencias al servidor. Todo esto incurre en comunicación entre procesos y de red si el cliente está en una máquina diferente del servidor de base de datos.</p><p>Con PL/pgSQL se puede crear un bloque de computación y una serie de sentencias SQL dentro del servidor de base de datos, tiendo el poder de un lenguaje procedural y la facilidad de SQL pero con un considerable ahorro de comunicación entre cliente y servidor. Las ventajas son evitar viajes entre el servidor y el cliente, resultados inmediatos que no son necesarios convertir y transferir entre el cliente y servidor y múltiples pasos de procesado de las sentencias son evitados. Todo esto resulta en algunos casos un incremento de rendimiento considerable comparado con una aplicación que no usa procedimientos almacenados.</p><ul><li><a href=https://www.postgresql.org/docs/current/static/plpgsql.html>PL/pgSQL - SQL Procedural Language</a></li></ul><h3 id=otras>Otras</h3><p>Otros elementos que soporta la base de datos PostgreSQL en el lenguaje SQL son <em>Grouping Sets</em>, <em>ROLLUP</em>, <em>CUBE</em>, <a href=https://www.postgresql.org/docs/current/static/functions-srf.html>Set Returning Functions</a>, <a href=https://www.postgresql.org/docs/current/static/tablefunc.html>tablefunc</a>, <a href=https://www.postgresql.org/docs/current/static/textsearch.html>búsquedas a texto completo</a> que para casos sencillos no hace falta recurrir a soluciones más especializadas como <a href=https://www.elastic.co/products/elasticsearch/>Elasticsearch</a>, selección y bloqueo de filas con la <a href=https://www.postgresql.org/docs/current/static/sql-select.html#SQL-FOR-UPDATE-SHARE>clásula <em>FOR UPDATE</em></a>, <a href=https://www.postgresql.org/docs/current/static/sql-createview.html>vistas</a> y <a href=https://www.postgresql.org/docs/current/static/sql-creatematerializedview.html>vistas materializadas</a> entre seguro otras muchas cosas de las que me olvido o desconozco.</p><p>Por todas estas características se considera a PostgreSQL una de las bases de datos relacionales más avanzadas existentes. Hay mucha literatura sobre las bases de datos relacionales desde el lenguage SQL en general, libros específicos sobre PostgreSQL o como evitar errores diseño al estructurar la información en tablas y columnas.</p><div class=media-amazon style=text-align:center><iframe style=width:120px;height:240px marginwidth=0 marginheight=0 scrolling=no frameborder=0 src="//rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=blobit-21&o=30&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=988840668X&linkId=9ba19b63e64c7454bc8051f394643d06"></iframe>
<iframe style=width:120px;height:240px marginwidth=0 marginheight=0 scrolling=no frameborder=0 src="//rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=blobit-21&o=30&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=1783989181&linkId=debb8456d091330663a1c10f654fd5b8"></iframe>
<iframe style=width:120px;height:240px marginwidth=0 marginheight=0 scrolling=no frameborder=0 src="//rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=blobit-21&o=30&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=1934356557&linkId=2f3d39f7290758074e90a66beda9e253"></iframe></div><p>En caso de optar por una base de datos NoSQL para persistir la información <a href=https://picodotdev.github.io/blog-bitix/2017/05/introduccion-a-la-base-de-datos-nosql-mongodb/>la base de datos NoSQL MongoDB</a> permite guardar los datos en forma de documentos y conseguir la escalabilidad que las bases de datos relacionales con sus propiedades ACID es difícil.</p><div class=reference>Referencia:<br><ul><li><a href=https://www.postgresql.org/docs/current/static/index.html>Documentación PostgreSQL</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/05/introduccion-a-la-base-de-datos-nosql-mongodb/>Introducción a la base de datos NoSQL MongoDB</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/06/usar-la-base-de-datos-nosql-mongodb-con-java/>Usar la base de datos NoSQL MongoDB con Java</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/06/introduccion-a-la-base-de-datos-nosql-redis/>Introducción a la base de datos NoSQL Redis</a></li><li><a href=https://picodotdev.github.io/blog-bitix/series/docker/>Serie de artículos sobre Docker</a></li></ul></div></div></article></div></div><div class="row related"><div class=col-md-12><h3>Artículos relacionados:</h3><ul><li><a href=/blog-bitix/2017/05/luces-navidenas-con-la-raspberry-pi-y-java/>Luces navideñas con la Raspberry Pi y Java</a></li><li><a href=/blog-bitix/2017/05/controlar-un-servomotor-con-la-raspberry-pi-y-java/>Controlar un servomotor con la Raspberry Pi y Java</a></li><li><a href=/blog-bitix/2017/04/ejemplo-sensor-de-golpes-y-detector-de-movimiento-en-la-raspberry-pi-con-java/>Ejemplo sensor de golpes y detector de movimiento en la Raspberry Pi con Java</a></li><li><a href=/blog-bitix/2017/04/como-usar-un-diodo-led-un-pulsador-y-un-zumbador-con-la-raspberry-pi-y-java/>Cómo usar un diodo LED, un pulsador y un zumbador con la Raspberry Pi y Java</a></li><li><a href=/blog-bitix/2017/03/obtener-la-temperatura-y-humedad-con-el-sensor-dht11-la-raspberry-pi-c-y-java/>Obtener la temperatura y humedad con el sensor DHT11, la Raspberry Pi, C y Java</a></li></ul></div></div><div class=row><div class=col-md-12><div class=sharethis-inline-share-buttons></div></div></div><div class=row><div class=col-12><ins class=adsbygoogle style=display:inline-block;width:728px;height:90px data-ad-client=ca-pub-3533636310991304 data-ad-slot=5966819782 data-type=leaderboard></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><a id=comments></a><div class=row><div class=col-md-12><div id=disqus_thread></div></div></div><script type=text/javascript async>var disqus_shortname='blog-bitix';var disqus_identifier='https:\/\/picodotdev.github.io\/blog-bitix\/2017\/05\/introduccion-a-la-base-de-datos-relacional-postgresql\/';var disqus_url='https:\/\/picodotdev.github.io\/blog-bitix\/2017\/05\/introduccion-a-la-base-de-datos-relacional-postgresql\/';var disqus_script='embed.js';(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.disqus.com/'+disqus_script;(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);}());</script></div><div class="col-12 col-lg-4"><div class=row><div class="col-md-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:300px;height:600px data-ad-client=ca-pub-3533636310991304 data-ad-slot=9559414587 data-type=large-skycraper></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class=row><div class="col-md-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:336px;height:280px data-ad-client=ca-pub-3533636310991304 data-ad-slot=2873752587 data-type=large-rectangle></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class="row text-center banner"><div class=col-12><a href=https://picodotdev.github.io/blog-bitix/2015/12/yo-apoyo-al-software-libre-tu-tambien/><img src=//static.fsf.org/nosvn/images/badges/badges_es/i-support-fs_red-bg-es.png alt="Yo apoyo al software libre"></a></div></div><div class=row><div class=col-md-12><hr></div></div><div class=row><div class=col-md-12><ul class="list-unstyled recents"><li><span class="glyphicon glyphicon-hand-right"></span><a href=archive/>Más artículos recientes en el archivo</a></li></ul></div></div></div></div><div class=row><div class=col-12><hr></div></div><footer><div class=row><div class="col-12 col-sm-4"><p><strong>Blog Bitix</strong></p><p>Blog dedicado a la distribución GNU/Linux que uso habitualmente, Arch Linux, a mis andanzas alrededor del software libre, la programación y a otros temas relacionados con la tecnología y la informática.</p><p>Publicando de uno a tres artículos únicos a la semana desde el año 2010.</p></div><div class="col-12 col-sm-4 text-center menu"><ul class=list-unstyled><li><a href=/blog-bitix/tags/java/>Java</a></li><li><a href=/blog-bitix/tags/gnu-linux/>GNU/Linux</a></li><li><a href=/blog-bitix/tags/javascript/>JavaScript</a></li><li><a href=/blog-bitix/tags/tapestry/>Tapestry</a></li><li><a href=/blog-bitix/archive/>Archivo y hemeroteca</a></li><li><a href=/blog-bitix/pages/links/>Enlaces</a></li><li><a href=/blog-bitix/pages/advertising/>Publicidad</a></li><li><a href=/blog-bitix/pages/donate/>Donaciones</a></li><li><a href=/blog-bitix/pages/about/>Acerca de...</a></li></ul></div><div class="col-12 col-sm-4 text-center links"><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class=row><div class=col-12>Copyleft <span class=copyleft>&copy;</span> 2019 - <a href=https://creativecommons.org/licenses/by-sa/4.0/ rel=nofollow rel=license><img alt="Licencia de Creative Commons" title="Licencia de Creative Commons" style=border-width:0 src=https://licensebuttons.net/l/by-sa/4.0/80x15.png class=licencia></a><br><a href=https://twitter.com/blogstackinfo rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/blog-stack.png alt="Blog Stack" title="Blog Stack"></a>
<a href=https://www.planetacodigo.com/ rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/planeta-codigo.png alt="Planeta código" title="Planeta código"></a><br><span xmlns:dct=http://purl.org/dc/terms/ property=dct:title><a href=https://picodotdev.github.io/blog-bitix/ rel=nofollow>Blog Bitix</a></span> by <a xmlns:cc=https://creativecommons.org/ns# href=https://picodotdev.github.io/blog-bitix/ property=cc:attributionName rel=cc:attributionurl>pico.dev</a> is licensed under a <a rel=license href=https://creativecommons.org/licenses/by-sa/4.0/>Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional License</a>.<br><span class=credit>Powered by <a href=https://gohugo.io/ rel=nofollow title="A fast and modern static website engine">Hugo</a> and <a href=https://pages.github.com/ title="Websites for you and your projects">GitHub Pages</a>.</span>
<span class=credit>Background patterns from <a href=https://www.toptal.com/designers/subtlepatterns/ rel=nofollow>Subtle Patterns</a>.</span></div></div></footer></div><div class=blueimp-gallery-container><div id=blueimp-gallery class="blueimp-gallery blueimp-gallery-controls" data-use-bootstrap-modal=false><div class=slides></div><h3 class=title></h3><a class=prev>‹</a>
<a class=next>›</a>
<a class=close>×</a>
<a class=play-pause></a><ol class=indicator></ol><div class="modal fade"><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close aria-hidden=true>&times;</button><h4 class=modal-title></h4></div><div class="modal-body next"></div><div class=modal-footer><button type=button class="btn btn-default pull-left prev">
<i class="glyphicon glyphicon-chevron-left"></i>Anterior</button>
<button type=button class="btn btn-primary next">
Siguiente
<i class="glyphicon glyphicon-chevron-right"></i></button></div></div></div></div></div></div><script type=text/javascript>window.cookieconsent_options={"message":"Esta bitácora te informa de la obviedad de que utiliza «cookies», propias y de servicios como Google Analytics y Google AdSense entre otros.","dismiss":"Aceptar","learnMore":"Más información","link":null,"theme":"dark-bottom"};</script><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js async></script></body></html>
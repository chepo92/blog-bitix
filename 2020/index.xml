<?xml version="1.0" encoding="utf-8"?>
<feed version="2.0" xmlns="http://www.w3.org/2005/Atom">
    <id>https://picodotdev.github.io/blog-bitix/2020/</id>
    <title type="text">Blog Bitix</title>
    <subtitle>Recent content on Blog Bitix</subtitle>
    <updated>2020-01-10T17:00:00+01:00</updated>
    <author><name>picodotdev</name></author>
    <generator>Hugo</generator>
    <icon>https://picodotdev.github.io/blog-bitix/assets/images/logotipos/hugo.png</icon>
    <logo>https://picodotdev.github.io/blog-bitix/assets/images/logotipos/hugo.png</logo>
    <rights>https://creativecommons.org/licenses/by-sa/4.0/</rights>
    
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/</id>
        <title>Tomar capturas de pantalla de páginas web desde la línea de comandos o desde la interfaz gráfica con Firefox</title>        
        <updated>2020-01-10T17:00:00+01:00</updated>
        <published>2020-01-10T17:00:00+01:00</published>
        <link rel="alternate" href="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
          <![CDATA[<p><strong>El navegador web Firefox tiene una opción con la que poder tomar una captura de pantalla de una página web desde la línea de comandos, que es útil como parte de un proceso automatizado. Firefox también permite tomar capturas de pantalla de una página web desde su interfaz gráfica o desde la consola web.</strong></p>]]>
        
        <![CDATA[<div class="logotypes" style="min-width: 200px;">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/firefox.svg" width="1.0609756097560976" height="1" alt="Firefox" title="Firefox" layout="responsive"  class="lozad"></p>
</div>
<p>Como norma general las pruebas de una aplicación deben estar automatizadas con una herramienta de <em>testing</em>. cccc<a href="https://picodotdev.github.io/blog-bitix/2019/06/teses-unitarios-parametrizados-con-junit/index-amp.html">Para el código Java una herramienta de pruebas es JUnit</a> y cccc<a href="https://picodotdev.github.io/blog-bitix/2018/07/pruebas-funcionales-con-geb-en-una-aplicacion-web-java/index-amp.html">para una aplicación web es Geb</a>. Sin embargo, algunas pruebas que no son de funcionalidad de la aplicación sino en una aplicación web por ejemplo de estilos y de visualización en la pantalla, que la página se muestre correctamente. Para estos casos no queda más que revisar, visualizar y comprobar la corrección visual de la misma, una posibilidad es entrar en la página manualmente mediante su dirección y realizar la comprobación.</p>
<p>Sin embargo, las acciones manuales hay que evitarlas en la medida de lo posible y que sean las menos posibles realizando su automatización ya que consumen muhco tiempo dedicable a tareas de valor. En este caso realizando la automatización se evita abrir el navegador, introducir la URL de la página o navegar hasta ella por cada URL a probar.</p>
<p>Aunque la revisión visual no esté automatizada y dependa de intervención humana al menos evitando las acciones manuales de introducir la URL o navegar hasta ella supone un ahorro de tiempo importante. La correcta visualización de una página puede consistir en revisar una captura de pantalla de la página y la automatización consiste en obtener esa captura de pantalla.</p>
<p>Esta automatización es interesante también ya que guardando los archivos de captura permiten tener un registro del estado de la visualización de una página a lo largo del tiempo y ver los cambios que se han ido realizando.</p>
<h3 id="captura-de-pantalla-desde-la-linea-de-comandos-con-firefox">Captura de pantalla desde la linea de comandos con Firefox</h3>
<p>Para obtener la captura de pantalla el navegador cccc<a href="https://www.mozilla.org/es-ES/firefox/new/">Firefox</a> permite desde la línea de comandos cargar una página a partir de su URL y obtener su captura de pantalla guardándola en un archivo <em>jpg</em> o <em>png</em>. Las capturas de pantalla también se pueden tomar en un servidor cccc<a href="https://www.gnu.org/">GNU</a>/cccc<a href="https://www.linux.com/">Linux</a> sin interfaz gráfica con un comando habiendo instalado Firefox previamente para este propósito.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre class="chroma"><code><span class="lnt">1&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre class="chroma"><code class="language-bash" data-lang="bash">$ firefox -P headless -headless --screenshot duckduckgo.png https://duckduckgo.com/</code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>firefox-screenshot.sh</span>
    </div>
</div>
<p>El parámetro <em>-P</em> indica el perfil a usar y hay que crear uno para tomar capturas de pantalla al mismo tiempo que está abierto el perfil personal en una ventana gráfica del navegador. Hay varias formas de crear un nuevo perfil en Firefox. Desde la página de configuración <em>about:profiles</em>, con el gestor de perfiles o desde la línea de comandos.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/firefox-about-profiles_hufa9635f8e1b0346f619225c53c18abe8_103349_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/firefox-about-profiles_hufa9635f8e1b0346f619225c53c18abe8_103349_300x200_fit_box_2.png" width="244" height="200" alt="Perfiles de usuario en Firefox" title="Perfiles de usuario en Firefox"  class="lozad"></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/firefox-gestor-perfiles_hu8ba69a7fa6fe46c9363aa0e5801916cc_33219_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/firefox-gestor-perfiles_hu8ba69a7fa6fe46c9363aa0e5801916cc_33219_300x200_fit_box_2.png" width="222" height="200" alt="Gestor de perfiles de Firefox" title="Gestor de perfiles de Firefox"  class="lozad"></a></p>
<figcaption>Perfiles de usuario y gestor de perfiles de Firefox</figcaption>
</figure>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre class="chroma"><code><span class="lnt">1&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre class="chroma"><code class="language-bash" data-lang="bash">$ firefox -p</code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>firefox-gestor-perfiles.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre class="chroma"><code><span class="lnt">1&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre class="chroma"><code class="language-bash" data-lang="bash">$ firefox -CreateProfile headless</code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>firefox-createprofile.sh</span>
    </div>
</div>
<p>Si hay necesidad de tomar varias capturas de pantalla de diferentes URLs de la aplicación o diferentes páginas web, con un script del intérprete de comandos cccc<a href="https://es.wikipedia.org/wiki/Bash">Bash</a> y dada una lista de URLs una por línea en un archivo se realiza el bucle. El parámetro <em>screenshot</em> contiene el nombre de la imagen en el que guardar la captura y a continuación la URL de la que tomar la captura, el parámetro <em>&ndash;window-size</em> especifica el ancho del navegador al tomar la captura, cambiar el ancho permite observar como se visualiza la página en diferentes resoluciones de ancho (1366, 1600, 1920, 2560, &hellip;).</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre class="chroma"><code class="language-plaintext" data-lang="plaintext">google,https://www.google.es&#10;duckduckgo,https://duckduckgo.com&#10;ubuntu,https://www.ubuntu.com&#10;redhat,https://www.redhat.com&#10;archlinux,https://www.archlinux.org</code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>links.txt</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/usr/bin/env bash&#10;</span><span class="cp"></span>cat links.txt <span class="p">|</span> <span class="k">while</span> <span class="nb">read</span> -r LINE&#10;<span class="k">do</span>&#10;  <span class="nv">NAME</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$LINE</span> <span class="p">|</span> cut -d <span class="se">\,</span> -f 1<span class="sb">`</span>&#10;  <span class="nv">URL</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$LINE</span> <span class="p">|</span> cut -d <span class="se">\,</span> -f 2<span class="sb">`</span>&#10;  firefox -P headless -headless --screenshot <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2">.png</span><span class="s2">&#34;</span> <span class="nv">$URL</span> --window-size<span class="o">=</span><span class="m">1920</span>&#10;<span class="k">done</span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>firefox-screenshot-links.sh</span>
    </div>
</div>
<p>El resultado son las siguientes capturas de pantalla.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/google_hu45b934e7544d9d05a8deffa10a627cd7_50467_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/google_hu45b934e7544d9d05a8deffa10a627cd7_50467_300x200_fit_box_2.png" width="300" height="120" alt="Google" title="Google"  class="lozad"></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/duckduckgo_hu34683831885d8be1d35773589bdb7690_439624_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/duckduckgo_hu34683831885d8be1d35773589bdb7690_439624_300x200_fit_box_2.png" width="100" height="200" alt="DuckDuckGo" title="DuckDuckGo"  class="lozad"></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/ubuntu_hu770ccb2a2fa4fc0af06b278df92dc312_431155_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/ubuntu_hu770ccb2a2fa4fc0af06b278df92dc312_431155_300x200_fit_box_2.png" width="84" height="200" alt="Ubuntu" title="Ubuntu"  class="lozad"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/redhat_hu7d9600702af10b4b100108c913311141_1482120_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/redhat_hu7d9600702af10b4b100108c913311141_1482120_300x200_fit_box_2.png" width="96" height="200" alt="RedHat" title="RedHat"  class="lozad"></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/archlinux_hu763c3287d0d16291e76f19c3febbdd9c_479946_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/archlinux_hu763c3287d0d16291e76f19c3febbdd9c_479946_300x200_fit_box_2.png" width="228" height="200" alt="Arch Linux" title="Arch Linux"  class="lozad"></a></p>
<figcaption>Capturas de pantalla realizadas con Firefox en modo headless</figcaption>
</figure>
</div>
<p>Con un gran número de páginas validar visualmente cada una de las páginas mediante una imagen aun con la automatización de tomar la captura consume una buena cantidad de tiempo, para reducir el número de capturas a validar el archivo puede limitarse a unas representativas de la aplicación o unas aleatorias de todo el conjunto, con los comandos <em>sort -R</em> y <em>head -3</em> se toman las 3 primeras líneas aleatorias del archivo, el comando <em>sort</em> las ordena de forma aleatoria y el comando <em>head</em> toma el número de líneas indicado.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/usr/bin/env bash&#10;</span><span class="cp"></span>cat links.txt <span class="p">|</span> sort -R <span class="p">|</span> head -3 <span class="p">|</span> <span class="k">while</span> <span class="nb">read</span> -r LINE&#10;<span class="k">do</span>&#10;  <span class="nv">NAME</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$LINE</span> <span class="p">|</span> cut -d <span class="se">\,</span> -f 1<span class="sb">`</span>&#10;  <span class="nv">URL</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$LINE</span> <span class="p">|</span> cut -d <span class="se">\,</span> -f 2<span class="sb">`</span>&#10;  firefox -P headless -headless --screenshot <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2">.png</span><span class="s2">&#34;</span> <span class="nv">$URL</span> --window-size<span class="o">=</span><span class="m">1920</span>&#10;<span class="k">done</span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>firefox-screenshot-links-random-firts.sh</span>
    </div>
</div>
<h3 id="captura-de-pantalla-desde-firefox">Captura de pantalla desde Firefox</h3>
<p>Firefox también permite tomar capturas de pantalla desde la interfaz gráfica, con el botón derecho y la opción del menú emergente <em>Hacer una captura de pantalla</em> de la pantalla completa o de la parte visible en ese momento o también desde el <em>Inspector</em> que se muestra con el botón derecho y la opción <em>Inspeccionar elemento</em> y habilitando la opción <em>Hacer una captura de pantalla de la página completa</em> y si se desea <em>Captura de pantalla al portapapeles</em> con las opciones de los ajustes.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/firefox-ajustes-inspector_hu8525e663c6d118f26df03b7c175e7e2e_175521_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/tomar-capturas-de-pantalla-de-paginas-web-desde-la-linea-de-comandos-o-desde-la-interfaz-grafica-con-firefox/images/firefox-ajustes-inspector_hu8525e663c6d118f26df03b7c175e7e2e_175521_300x200_fit_box_2.png" width="269" height="200" alt="Ajustes para mostrar botón de captura en las herramientas del inspector" title="Ajustes para mostrar botón de captura en las herramientas del inspector"  class="lozad"></a></p>
<figcaption>Ajustes para mostrar botón de captura en las herramientas del inspector</figcaption>
</figure>
</div>
<p>La consola web de Firefox también permite tomar capturas de pantalla escribiendo el comando <em>:screenshot</em>.</p>
<div class="reference">
    Referencia:<br>
    <ul>
<li>cccc<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Headless_mode#Taking_screenshots">Firefox Headless mode Taking screenshots</a></li>
<li>cccc<a href="https://developer.mozilla.org/en-US/docs/Tools/Taking_screenshots">Firefox Taking screenshots</a></li>
<li>cccc<a href="https://developer.mozilla.org/en-US/docs/Tools/Taking_screenshots#Taking_screenshots_with_the_web_console">Firefox Taking screenshots with the web console</a></li>
<li>cccc<a href="https://support.mozilla.org/en-US/kb/profile-manager-create-remove-switch-firefox-profiles?redirectlocale=en-US&amp;redirectslug=profile-manager-create-and-remove-firefox-profiles">Profile Manager - Create, remove, or switch Firefox profiles</a></li>
<li>cccc<a href="https://stackoverflow.com/questions/15396190/read-file-line-by-line-and-perform-action-for-each-in-bash">Read file line by line and perform action for each in bash</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="programacion"/>
            
        
    </entry>
    
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/</id>
        <title>Mejorar el tiempo de carga de una página web usando lazy load</title>        
        <updated>2020-01-04T14:30:00+01:00</updated>
        <published>2020-01-04T12:30:00+01:00</published>
        <link rel="alternate" href="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
          <![CDATA[<p><strong>Las páginas grandes y con muchos recursos como imágenes e <em>iframes</em> implementar la carga vaga o <em>lazy load</em> obtienen un gran beneficio, necesitando realizar menos peticiones en la carga inicial, con menos tamaño y cargándose en menos tiempo. Los navegadores han añadido soporte para desde JavaScript proporciona este soporte.</strong></p>]]>
        
        <![CDATA[<div class="logotypes" style="min-width: 200px;">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/firefox.svg" width="1.0609756097560976" height="1" alt="Firefox" title="Firefox" layout="responsive"  class="lozad"></p>
</div>
<div class="logotypes" style="min-width: 200px;">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/chromium.svg" width="1" height="1" alt="Chromium" title="Chromium" layout="responsive"  class="lozad"></p>
</div>
<p>El tiempo de carga de una página web es una métrica importante para una buena experiencia de usuario, es una métrica evaluada por <em>PageSpeed</em> y también de cara al posicionamiento en los buscadores o SEO ya que influye en la fórmula que usa Google para clasificar y posicionar las páginas en la página de resultados de búsqueda, un buen posicionamiento en los buscadores es importante porque significa más visitas a una web que en muchos casos es la mayor fuente de usuarios. Un tiempo de carga alto hace que los usuarios abandonen la página antes de que esté cargada completamente, influyendo en el porcentaje de rebote y el tiempo de visita que se puede medir con cccc<a href="https://www.google.es/intl/es/analytics/">Google Analytics</a>.</p>
<p>Una de las variables que influyen en el tiempo de carga es el número de peticiones y el tamaño de los recursos de esas peticiones que se hacen al servidor para descargar los elementos de la página completa, estos son imágenes, hojas de estilo, archivos de JavaScript, <em>iframes</em>, &hellip; Sin embargo, los navegadores cargan todos los elementos de una página incluso aquellos que están en la parte baja e inicialmente no se ven hasta que el usuario se desplaza hasta visualizarlos. Cargar elementos que no se visualizan es innecesario e ineficiente en el navegador pero también para el servidor que ha de atender a más peticiones.</p>
<p>Los artículos de mi blog como cccc<a href="https://picodotdev.github.io/blog-bitix/2019/09/desempaquetado-de-playstation-4-slim-de-1-tb/index-amp.html">Desempaquetado de PlayStation 4 Slim de 1 TB</a> o cccc<a href="https://picodotdev.github.io/blog-bitix/2018/11/desempaquetado-intel-nuc-nuc8i5bek-bean-canyon-hyperx-impact-ram-y-samsung-970-evo-nvme-ssd/index-amp.html">Desempaquetado Intel NUC8i5BEK (Bean Canyon), HyperX Impact (RAM) y Samsung 970 EVO NVMe (SSD)</a>, incluyen numerosas imágenes e <em>iframes</em> de vídeos de cccc<a href="https://www.youtube.com/">Youtube</a> y publicidad de cccc<a href="https://amzn.to/2flFhHA">Amazon</a>, en todas se carga los comentarios de cccc<a href="https://disqus.com/">Disqus</a> y para compartir los artículos con cccc<a href="https://www.sharethis.com/">ShareThis</a> que están al final de la página y hasta que el usuario no ha leido el artículo son innecesarios. Disqus además en concreto para cargarse realiza numerosas peticiones adicionales. Estás páginas son de las más complejas por número de recursos y extensión del artículo que tengo en el blog por lo que he analizado una de ellas antes y después aplicando <em>lazy loading</em> para cargar inicialmente solo los elementos que se visualizan que son aquellos que están en la parte superior de la página.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/playstation-1_hu77a4ff0b97c11f6c29e41756e7cbcd45_1044902_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/playstation-1_hu77a4ff0b97c11f6c29e41756e7cbcd45_1044902_300x200_fit_box_2.png" width="229" height="200" alt="Página PlayStation" title="Página PlayStation"  class="lozad"></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/playstation-2_hu75ad2004fc115c1067d362c617ff81b7_647357_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/playstation-2_hu75ad2004fc115c1067d362c617ff81b7_647357_300x200_fit_box_2.png" width="229" height="200" alt="Página PlayStation" title="Página PlayStation"  class="lozad"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/intel-nuc-1_hu5156e66a4a552c7d437254e895810ac0_1101855_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/intel-nuc-1_hu5156e66a4a552c7d437254e895810ac0_1101855_300x200_fit_box_2.png" width="229" height="200" alt="Página Intel NUC" title="Página Intel NUC"  class="lozad"></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/intel-nuc-2_hu9ceb9a4fbca9f78810fd77b4e7f3ee9c_525020_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/intel-nuc-2_hu9ceb9a4fbca9f78810fd77b4e7f3ee9c_525020_300x200_fit_box_2.png" width="229" height="200" alt="Página Intel NUC" title="Página Intel NUC"  class="lozad"></a></p>
<figcaption>Páginas representativas de Blog Bitix</figcaption>
</figure>
</div>
<p>Analizando el número de peticiones, tamaño y tiempo de carga en la página de la PlayStation realizaban 343 peticiones inicialmente, con un tamaño de descarga de 5 MiB en un tiempo de carga según Firefox de 15 segundos. Evaluando esta página con cccc<a href="https://developers.google.com/speed/pagespeed/insights/">PageSpeed</a> un aspecto importante que indica a mejora reducir el número de elementos descargados, además de reducir peticiones y tamaño de la página se descarguen inicialmente los elementos importantes y omitiendo recursos de JavaScript hace que el desempeño sea mejor. El resultado es un menor tiempo de carga.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/metricas-pagespeed-playstation-antes_huc588673ba030b79df5ba318272f09e80_380841_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/metricas-pagespeed-playstation-antes_huc588673ba030b79df5ba318272f09e80_380841_300x200_fit_box_2.png" width="122" height="200" alt="Métricas de carga en PageSpeed página PlayStation antes" title="Métricas de carga en PageSpeed página PlayStation antes"  class="lozad"></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/metricas-pagespeed-intel-nuc-antes_hu8d651fc4c2a812418c81e4df5b05586b_391200_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/metricas-pagespeed-intel-nuc-antes_hu8d651fc4c2a812418c81e4df5b05586b_391200_300x200_fit_box_2.png" width="118" height="200" alt="Métricas de carga de PageSpeed página Intel NUC antes" title="Métricas de carga de PageSpeed página Intel NUC antes"  class="lozad"></a></p>
<figcaption>Métricas de carga en PageSpeed antes</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/metricas-firefox-antes_hu260c66b7ee5f53d44e96a6bc82086d89_9873_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/metricas-firefox-antes_hu260c66b7ee5f53d44e96a6bc82086d89_9873_300x200_fit_box_2.png" width="300" height="12" alt="Métricas de carga de Firefox página PlayStation antes" title="Métricas de carga de Firefox página PlayStation antes"  class="lozad"></a></p>
<figcaption>Métricas de carga en Firefox</figcaption>
</figure>
</div>
<p>La solución es cargar los elementos imágenes, <em>iframes</em>, vídeos y comentarios de Disqus cuando se vayan a visualizar al desplazarse el usuario hasta ellos. Esto reduce notablemente el número de peticiones realizadas inicialmente, el tamaño de descarga y el tiempo de carga. Una librería de JavaScript que permite realizar esta funcionalidad es cccc<a href="https://apoorv.pro/lozad.js/">Lozad</a>, no tiene dependencias, es muy pequeña, es soprendentemente fácil de utilizar en relación con el beneficio que aporta. Aprovecha el soporte de la interfaz cccc<a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver">IntersectionObserver</a> precisamente proporcionada por los navegadores para realizar la carga vaga o <em>lazy load</em> de forma eficiente.</p>
<p>Para las imágenes e <em>iframes</em> hay que añadir una clase a los elementos de HTML y cambiar el atributo <em>src</em> a <em>data-src</em>. Los comentarios de Disqus se cargan con un archivo de JavaScript por lo que hay que retrasar la carga hasta que el elemento HTML que los contiene se visualice y con una función de <em>callback</em> se inicia la inserción de su recurso de JavaScript utilizando cccc<a href="https://jquery.com/">jQuery</a> para cargar insertar en la página dinámicamente recursos JavaScript.</p>
<p>Este es una plantilla que utilizo para generar de forma estática el contenido del blog con cccc<a href="https://gohugo.io/">Hugo</a> en el que las imágenes ilustrativas de los artículos usan el atributo <em>data-src</em> e incluyen la clase de CSS <em>lozad</em>, en el código fuente o utilizando la función Inspeccionar se comprueba el HTML resultado. El otro archivo parte del JavaScript de este blog que implementa la carga vaga de las imágenes, <em>iframes</em> y <em>scritps</em> de Disqus y ShareThis. Para el caso de insertar JavaScript dinámicamente se observa un elemento con una expresión de jQuery y mediante una función <em>callback</em> que Lozad invoca cuando su elemento se visualiza momento en que se realiza la acción de insertar el recurso de JavaScript.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span><span class="lnt">8&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;media&#34;</span><span class="p"></span><span class="p">&gt;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">figure</span><span class="p"></span><span class="p">&gt;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{ $imagescaled1.RelPermalink }&#34;</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;{ .Params.title1 }&#34;</span> <span class="na">data-gallery</span><span class="o">=</span><span class="s">&#34;data-gallery&#34;</span><span class="p"></span><span class="p">&gt;</span><span class="p">&lt;</span><span class="nt">img</span> <span class="na">data-src</span><span class="o">=</span><span class="s">&#34;{ $imagescaledthumb1.RelPermalink }&#34;</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;{ $imagescaledthumb1.Width }&#34;</span> <span class="na">height</span><span class="o">=</span><span class="s">&#34;{ $imagescaledthumb1.Height }&#34;</span> <span class="na">layout</span><span class="o">=</span><span class="s">&#34;responsive&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;lozad&#34;</span><span class="p"></span><span class="p">&gt;</span><span class="p">&lt;</span><span class="p">/</span><span class="nt">a</span><span class="p">&gt;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{ $imagescaled2.RelPermalink }&#34;</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;{ .Params.title2 }&#34;</span> <span class="na">data-gallery</span><span class="o">=</span><span class="s">&#34;data-gallery&#34;</span><span class="p"></span><span class="p">&gt;</span><span class="p">&lt;</span><span class="nt">img</span> <span class="na">data-src</span><span class="o">=</span><span class="s">&#34;{ $imagescaledthumb2.RelPermalink }&#34;</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;{ $imagescaledthumb2.Width }&#34;</span> <span class="na">height</span><span class="o">=</span><span class="s">&#34;{ $imagescaledthumb2.Height }&#34;</span> <span class="na">layout</span><span class="o">=</span><span class="s">&#34;responsive&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;lozad&#34;</span><span class="p"></span><span class="p">&gt;</span><span class="p">&lt;</span><span class="p">/</span><span class="nt">a</span><span class="p">&gt;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{ $imagescaled3.RelPermalink }&#34;</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;{ .Params.title3 }&#34;</span> <span class="na">data-gallery</span><span class="o">=</span><span class="s">&#34;data-gallery&#34;</span><span class="p"></span><span class="p">&gt;</span><span class="p">&lt;</span><span class="nt">img</span> <span class="na">data-src</span><span class="o">=</span><span class="s">&#34;{ $imagescaledthumb3.RelPermalink }&#34;</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;{ $imagescaledthumb3.Width }&#34;</span> <span class="na">height</span><span class="o">=</span><span class="s">&#34;{ $imagescaledthumb3.Height }&#34;</span> <span class="na">layout</span><span class="o">=</span><span class="s">&#34;responsive&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;lozad&#34;</span><span class="p"></span><span class="p">&gt;</span><span class="p">&lt;</span><span class="p">/</span><span class="nt">a</span><span class="p">&gt;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">figcaption</span><span class="p"></span><span class="p">&gt;</span>{ .Params.caption }{ if .Params.source }<span class="p">&lt;</span><span class="nt">br</span><span class="p">/</span><span class="p">&gt;</span><span class="p">&lt;</span><span class="nt">small</span><span class="p"></span><span class="p">&gt;</span>{ i18n &#34;source&#34; }: { .Params.source }<span class="p">&lt;</span><span class="p">/</span><span class="nt">small</span><span class="p">&gt;</span>{ end }<span class="p">&lt;</span><span class="p">/</span><span class="nt">figcaption</span><span class="p">&gt;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="p">/</span><span class="nt">figure</span><span class="p">&gt;</span>&#10;<span class="p">&lt;</span><span class="p">/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>figureproc.html</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">require</span><span class="p">(</span><span class="p">[</span><span class="s1">&#39;jquery&#39;</span><span class="p">,</span> <span class="s1">&#39;lozad&#39;</span><span class="p">,</span> <span class="s1">&#39;jquery-blueimp-gallery&#39;</span><span class="p">]</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">lozad</span><span class="p">,</span> <span class="nx">blueimp</span><span class="p">)</span> <span class="p">{</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">...</span>&#10;&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">function</span> <span class="nx">initLazyload</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">var</span> <span class="nx">observer</span> <span class="o">=</span> <span class="nx">lozad</span><span class="p">(</span><span class="s1">&#39;.lozad&#39;</span><span class="p">,</span> <span class="p">{</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">rootMargin</span><span class="o">:</span> <span class="s1">&#39;50px 0px&#39;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span><span class="p">)</span><span class="p">;</span>&#10;&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">var</span> <span class="nx">disqusObserver</span> <span class="o">=</span> <span class="nx">lozad</span><span class="p">(</span><span class="s1">&#39;#disqus_thread&#39;</span><span class="p">,</span> <span class="p">{</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">rootMargin</span><span class="o">:</span> <span class="s1">&#39;50px 0px&#39;</span><span class="p">,</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">load</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="p">{</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;//&#39;</span> <span class="o">+</span> <span class="nx">disqus_shortname</span> <span class="o">+</span> <span class="s1">&#39;.disqus.com/&#39;</span> <span class="o">+</span> <span class="nx">disqus_script</span><span class="p">,</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">async</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">cache</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;script&#39;</span><span class="p">,</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span><span class="p">}</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span><span class="p">)</span><span class="p">;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span><span class="p">)</span><span class="p">;</span>&#10;&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">var</span> <span class="nx">shareThisObserver</span> <span class="o">=</span> <span class="nx">lozad</span><span class="p">(</span><span class="s1">&#39;div.sharethis-inline-share-buttons&#39;</span><span class="p">,</span> <span class="p">{</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">rootMargin</span><span class="o">:</span> <span class="s1">&#39;50px 0px&#39;</span><span class="p">,</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">load</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="p">{</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;//platform-api.sharethis.com/js/sharethis.js#property=5920c4ce1bd0670011e06acd&amp;product=inline-share-buttons&#39;</span><span class="p">,</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">async</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">cache</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">dataType</span><span class="o">:</span> <span class="s1">&#39;script&#39;</span><span class="p">,</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span><span class="p">}</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span><span class="p">)</span><span class="p">;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span><span class="p">)</span><span class="p">;</span>&#10;&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">disqusObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">shareThisObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">...</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">initLazyload</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>&#10;<span class="p">}</span><span class="p">)</span><span class="p">;</span>&#10;&#10;</code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>main.js</span>
    </div>
</div>
<p>Con simplemente esta mejora, que no es complicada de realizar, añadiendo el código anterior y realizando los sencillos cambios en los atributos de imágenes e <em>iframes</em> las métricas en la comparación con página anterior mejoran notablemente pasando apróximadamente de 15 segungos a menos de 4 en un tiempo de carga hasta que el navegador dejan de hacer peticiones.</p>
<table class="table">
    <thead class="thead-light">
        <tr>
            <th class="thead-light" width="140px">Página</th>
            <th class="thead-light" width="140px">Prueba</th>
            <th>Antes</th>
            <th>Después</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>PlayStation</td>
            <td>Firefox</td>
            <td>343 peticiones, 5 MiB, 15s</td>
            <td>104 peticiones, 1.5 MiB, 3.5s</td>
        </tr>
        <tr>
            <td>PlayStation</td>
            <td>PageSpeed</td>
            <td>23</td>
            <td>44</td>
        </tr>
        <tr>
            <td>Intel NUC</td>
            <td>PageSpeed</td>
            <td>9</td>
            <td>38</td>
        </tr>
    </tbody>
</table>
<p>La métrica de PageSpeed mejoran notablemente, es una cifra sobre 100 que aún dista de ser alta debido a que Analytics y AdSense imponen una fuerte penalización por utilizarlos e incluirlos en las páginas. La página cccc<a href="https://webpagetest.org">WebPageTest</a> proporciona algunos datos adicionales y complementarios a los proporcinados por PageSpeed, también es recomendable usarla para medir la variación en los resultados con los cambios realizados con el objetivo de mejorar una página.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/metricas-pagespeed-playstation-despues_hub973e372c1d61b2c7366348e15d773e2_317580_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/metricas-pagespeed-playstation-despues_hub973e372c1d61b2c7366348e15d773e2_317580_300x200_fit_box_2.png" width="143" height="200" alt="Métricas de carga en PageSpeed página PlayStation después" title="Métricas de carga en PageSpeed página PlayStation después"  class="lozad"></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/metricas-pagespeed-intel-nuc-despues_hu48a435e40748cea35dc46412f417e0c3_362243_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/metricas-pagespeed-intel-nuc-despues_hu48a435e40748cea35dc46412f417e0c3_362243_300x200_fit_box_2.png" width="125" height="200" alt="Métricas de carga de PageSpeed página Intel NUC después" title="Métricas de carga de PageSpeed página Intel NUC después"  class="lozad"></a></p>
<figcaption>Métricas de carga en PageSpeed después</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/metricas-firefox-despues_huc3a78d2ed04602fa241101809a555e40_10225_2560x1440_fit_box_2.png" data-gallery="data-gallery"><img src="https://picodotdev.github.io/blog-bitix/2020/01/mejorar-el-tiempo-de-carga-de-una-pagina-web-usando-lazy-load/images/metricas-firefox-despues_huc3a78d2ed04602fa241101809a555e40_10225_300x200_fit_box_2.png" width="300" height="12" alt="Métricas de carga de Firefox página PlayStation después" title="Métricas de carga de Firefox página PlayStation después"  class="lozad"></a></p>
<figcaption>Métricas de carga en Firefox</figcaption>
</figure>
</div>
<p>Los navegadores van a añadir el soporte de carga vaga directamente en las imágenes e <em>iframes</em> con un el cccc<a href="https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading">atributo loading</a> mediante el cual el JavaScript anterior será innecesario para estos elementos.</p>
<p>En definitiva es un pequeño cambio sencillo de realizar y que mejora notablemente la experiencia de usuario, la carga del servidor, es recomendable para el SEO incluso desde el punto de vista de la privacidad de los usuarios.</p>
<p>Otro uso distinto para la carga vaga es lanzar eventos de Analytics, esto lo he empleado para saber si los usuarios llegan al final de los artículos. Con esto es posible obtener datos interesantes sobre cuales son las mejoras páginas o artículos, por ejemplo, para diferencia entre página muy visitada por que esté bien posicionada pero ni interesante para los uauarios porque no llegan al final del artículo o por el contrario páginas con pocas visitas pero que los usuarios las leen hasta el final.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">require</span><span class="p">(</span><span class="p">[</span><span class="s1">&#39;jquery&#39;</span><span class="p">,</span> <span class="s1">&#39;lozad&#39;</span><span class="p">]</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">lozad</span><span class="p">)</span> <span class="p">{</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">function</span> <span class="nx">initAnalytics</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">...</span>&#10;&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">var</span> <span class="nx">pageBottomObserver</span> <span class="o">=</span> <span class="nx">lozad</span><span class="p">(</span><span class="s1">&#39;#pageBottom&#39;</span><span class="p">,</span> <span class="p">{</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">rootMargin</span><span class="o">:</span> <span class="s1">&#39;50px 0px&#39;</span><span class="p">,</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">load</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">ga</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">,</span> <span class="s1">&#39;event&#39;</span><span class="p">,</span> <span class="s1">&#39;page&#39;</span><span class="p">,</span> <span class="s1">&#39;show&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;nonInteraction&#39;</span><span class="o">:</span> <span class="mi">1</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span><span class="p">)</span><span class="p">;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">pageBottomObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">...</span>&#10;&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">initAnalytics</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>&#10;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">...</span>&#10;<span class="p">}</span><span class="p">)</span><span class="p">;</span>&#10;</code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>app.js</span>
    </div>
</div>
<div class="reference">
    Referencia:<br>
    <ul>
<li>cccc<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Img">&lt;img&gt;: The Image Embed element</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="programacion"/>
            
                <category term="web"/>
            
        
    </entry>
    
</feed>
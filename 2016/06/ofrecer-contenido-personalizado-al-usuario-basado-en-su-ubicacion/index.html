<!doctype html><html lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=picodotdev><meta name=keywords content="java,programacion,software,hardware,tapestry,software libre,gnu,linux,gnu/linux,unix,arch,arch linux,html,css,javascript"><meta name=description content="Cuando navegamos por internet el navegador envía mútiple información sobre nosotros y algunas páginas web recopilan esa información y la procesan para ofrecer contenido personalizado que creen nos resultaría de interés. Contenido con mayor relevancia para el usuario mejora la experiencia de usuario y la páginas web mejorarán su ratio de conversión y facturación. La información que proporcionamos sin ser conscientes son las cookies, la dirección IP, el navegador que usamos, el sistema operativo, nuestra resolución de pantalla, la hora a la que accedemos a la página, &hellip; en base a ella y aunque la información está impersonalizada sirve para identificarnos como inequivocamente usuarios. Con la dirección IP y usando una base de datos es posible obtener al menos el país desde el que se accede a una web y muy posiblemente la ciudad. &hellip;"><base href=https://picodotdev.github.io/blog-bitix/><title>Ofrecer contenido personalizado al usuario basado en su ubicación</title><link rel=author type=text/plain href=humans.txt><link rel="shortcut icon" href=assets/favicon.ico><link rel=apple-touch-icon-precomposed sizes=144x144 href=assets/apple-touch-icon-144-precomposed.png><link rel=canonical href=https://picodotdev.github.io/blog-bitix/2016/06/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion/><link href=index.xml rel=alternate type=application/rss+xml title="Blog Bitix"><link rel=stylesheet type=text/css href="//fonts.googleapis.com/css?family=PT+Serif:400,400i,700"><link rel=stylesheet type=text/css href=assets/libs/bootstrap-4.3.1/css/bootstrap.min.css><link rel=stylesheet type=text/css href=assets/libs/Gallery-2.33.0/css/blueimp-gallery.min.css><link rel=stylesheet type=text/css href=assets/css/syntax.css><link rel=stylesheet type=text/css href=assets/css/main.css><script type=text/javascript src=assets/js/require-config.js data-main=js/main defer></script><script type=text/javascript src=assets/libs/require.js data-main=js/main defer></script><script src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js defer></script><script type=text/javascript defer>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:'ca-pub-3533636310991304',enable_page_level_ads:true});</script><script type=text/javascript defer>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-12874075-4','picodotdev.github.io');ga('send','pageview');</script><script type=text/javascript src="//platform-api.sharethis.com/js/sharethis.js#property=5920c4ce1bd0670011e06acd&product=inline-share-buttons" defer></script><script type=text/javascript src=assets/js/app.js defer></script></head><body><div class=container><div class=row><div class=col-12><header><div class=row><div class="col-12 col-lg-4"></div><div class="col-12 col-lg-4"><h2 class=title><a href=https://picodotdev.github.io/blog-bitix/>Blog Bitix</a></h2><div class=links><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class="col-12 col-lg-4 text-center"><form name=query class="form-inline search" onsubmit="return false;"><div class=input-group><input type=text name=q class=form-control placeholder="Buscar en Blog Bitix">
<span class=input-group-btn><button class="btn btn-secondary" type=submit>Buscar</button></span></div></form><form name=search action=https://duckduckgo.com/ method=get class=hidden data-site=https://picodotdev.github.io/blog-bitix/><input type=hidden name=q></form></div></div><div class=row><div class=col-12><nav class="nav nav-pills nav-fill"><a href=/blog-bitix/tags/java/ class="nav-item nav-link">Java</a>
<a href=/blog-bitix/tags/gnu-linux/ class="nav-item nav-link">GNU/Linux</a>
<a href=/blog-bitix/tags/javascript/ class="nav-item nav-link">JavaScript</a>
<a href=/blog-bitix/tags/tapestry/ class="nav-item nav-link">Tapestry</a>
<a href=/blog-bitix/archive/ class="nav-item nav-link">Archivo y hemeroteca</a>
<a href=/blog-bitix/pages/links/ class="nav-item nav-link">Enlaces</a>
<a href=/blog-bitix/pages/about/ class="nav-item nav-link">Acerca de...</a></nav></div></div></header></div></div><div class=row><div class="col-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:970px;height:250px data-ad-client=ca-pub-3533636310991304 data-ad-slot=2975854584 data-type=billboard></ins></div></div><div class=row><div class=col-12><div class="adblock-sidebar adblock-sidebar-right"><ins class="adsbygoogle adblock-sidebar-skycraper" style=display:block data-ad-client=ca-pub-3533636310991304 data-ad-slot=9933840986 data-ad-format=auto data-type=auto></ins><ins class="adsbygoogle adblock-sidebar-rectangle" style=display:block data-ad-client=ca-pub-3533636310991304 data-ad-slot=9933840986 data-ad-format=auto data-type=auto></ins></div><article itemprop=mainEntity itemscope itemtype=http://schema.org/BlogPosting><meta itemprop=inLanguage content=es><meta itemprop=keywords content="blog-stack, planeta-codigo, planeta-linux, programacion, software, software-libre"><h1 itemprop=name>Ofrecer contenido personalizado al usuario basado en su ubicación</h1><p class=information>Escrito por
<span itemprop=author itemscope itemtype=http://schema.org/Person><span itemprop=name>picodotdev</span></span> el <time itemprop=datePublished datetime=2016-06-03>03/06/2016</time>, actualizado el <time itemprop=dateModified datetime=2016-06-06>06/06/2016</time>.<br><a href=tags/blog-stack/>blog-stack</a> <a href=tags/planeta-codigo/>planeta-codigo</a> <a href=tags/planeta-linux/>planeta-linux</a> <a href=tags/programacion/>programacion</a> <a href=tags/software/>software</a> <a href=tags/software-libre/>software-libre</a><br><a href=/blog-bitix/2016/06/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion/ itemprop=url>Enlace permanente</a>
<a href=/blog-bitix/2016/06/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion/#comments>Comentarios</a></p><p class=summary itemprop=about>Cuando navegamos por internet el navegador envía mútiple información sobre nosotros y algunas páginas web recopilan esa información y la procesan para ofrecer contenido personalizado que creen nos resultaría de interés. Contenido con mayor relevancia para el usuario mejora la experiencia de usuario y la páginas web mejorarán su ratio de conversión y facturación. La información que proporcionamos sin ser conscientes son las <em>cookies</em>, la dirección IP, el navegador que usamos, el sistema operativo, nuestra resolución de pantalla, la hora a la que accedemos a la página, &hellip; en base a ella y aunque la información está impersonalizada sirve para identificarnos como inequivocamente usuarios. Con la dirección IP y usando una base de datos es posible obtener al menos el país desde el que se accede a una web y muy posiblemente la ciudad.</p><div class=content itemprop=articleBody><meta itemprop=wordCount content=1241><div class=logotypes style=float:right><img src=assets/images/logotipos/linux.svg class=right width=200 alt=Linux title=Linux></div><div class=logotypes style=float:right;clear:right><img src=assets/images/logotipos/gnu.svg class=right width=200 alt=GNU title=GNU></div><div class=logotypes style=float:right;clear:right><img src=assets/images/logotipos/java.svg class=right width=200 alt=Java title=Java></div><p>Un usuario cuando navega por internet proporciona diversa información que las páginas web pueden utilizar para personalizar el contenido que le muestran. La información que el usuario proporciona es el navegador que utiliza, sistema operativo y dirección IP. Con las <em>cookies</em> las páginas web pueden almacenar información en su navegador que persista en varias sesiones. Amazon por ejemplo personaliza el contenido que ve el usuario cuando accede a la página de inicio mostrando diferentes categorías de productos en los que puede estar más interesado, por ejemplo, productos visitados en anteriores sesiones, relacionados o similares. Si el usuario ha visitado un producto con anterioridad es muy posible que esté interesado en comprar ese producto con lo que Amazon se lo muestra de nuevo en la siguiente sesión o le envía un correo electrónico al día siguiente como recordatorio. Una página de eventos, viajes, hoteles, restaurantes, museos, el tiempo, &hellip; puede mostrar información basada en la localización, por ejemplo, si alguien está en Madrid quizá esté interesando dependiendo de la búsqueda que haga en eventos, hoteles o museos en esa ciudad.</p><p>En <a href=https://www.archlinux.org/>Arch Linux</a> al igual que en muchas otras distribuciones <a href=https://www.gnu.org/>GNU</a>/<a href=https://www.linux.com/>Linux</a> hay unos comandos y unos paquetes que contienen una base de datos que en base a la dirección IP proporciona el país, ciudad, código postal y coordenadas geográficas de latitud y longitud, son <a href=https://www.archlinux.org/packages/extra/x86_64/geoip/>geoip</a> con información del país y <a href=https://www.archlinux.org/packages/extra/any/geoip-database-extra/>geoip-database-extra</a> para obtener información de la ciudad. La localización de un usuario también puede obtenerse usando una consulta que implique red de datos hacia algún servicio y si el usuario en su navegador lo permite proporcionar la información de su geoposicionamiento, la diferencia es que la petición que haga uso de red añade algo de latencia a la respuesta de la aplicación tampoco requieren pedir permisos al usuario para activar su geoposicionamiento. La información proporcionada por <em>geoip</em> quizá no sea tan exacta en todos los casos que los anteriores métodos pero más que suficiente en la mayoría. En caso de querer la mejor precisión se puede optar primeramente pedir al usuario que comparta su localizacion mediante el navegador, luego o en la primera petición hasta que el usuario comparta su posición por usar la base de datos de <em>geoip</em>, si esta no es exacta aunque seguramente proporcione al menos el país pero no proporciona la ciudad se puede optar por usar algún servicio que implique red.</p><p>Instalados los paquetes con las bases de datos de geoposicionamiento en la distribución GNU/Linux su uso desde la línea de comandos es el siguiente, indicando la dirección IP o nombre de dominio de la que queramos conocer su ubicación:</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash>$ geoiplookup <span class=m>85</span>.84.77.93
GeoIP Country Edition: ES, Spain
GeoIP City Edition, Rev <span class=m>1</span>: ES, N/A, N/A, N/A, N/A, <span class=m>40</span>.400002, -3.683300, <span class=m>0</span>, <span class=m>0</span>
GeoIP ASNum Edition: AS12338 Euskaltel S.A.</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2016/06/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion/code/geoiplookup-85.84.77.93.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2016/06/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion/code/geoiplookup-85.84.77.93.sh target=_blank>geoiplookup-85.84.77.93.sh</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash>$ geoiplookup <span class=m>8</span>.8.8.8
GeoIP Country Edition: US, United States
GeoIP City Edition, Rev <span class=m>1</span>: US, CA, California, Mountain View, <span class=m>94040</span>, <span class=m>37</span>.384499, -122.088097, <span class=m>807</span>, <span class=m>650</span>
GeoIP ASNum Edition: AS15169 Google Inc.</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2016/06/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion/code/geoiplookup-8.8.8.8.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2016/06/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion/code/geoiplookup-8.8.8.8.sh target=_blank>geoiplookup-8.8.8.8.sh</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash>$ geoiplookup marca.es
GeoIP Country Edition: ES, Spain
GeoIP City Edition, Rev <span class=m>1</span>: ES, <span class=m>29</span>, Madrid, Madrid, <span class=m>28001</span>, <span class=m>40</span>.416500, -3.702600, <span class=m>0</span>, <span class=m>0</span>
GeoIP ASNum Edition: AS9052 Unidad Editorial S.A.</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2016/06/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion/code/geoiplookup-marca.es.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2016/06/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion/code/geoiplookup-marca.es.sh target=_blank>geoiplookup-marca.es.sh</a></div></div><div class=media style=text-align:center><figure><a href=assets/images/posts/2016/147/geoiplookup.png title="Comando para obtener información de geoposicionamiento en base a la dirección IP" data-gallery><img src=assets/images/posts/2016/147/geoiplookup-thumb.png></a><figcaption>Comando para obtener información de geoposicionamiento en base a la dirección IP</figcaption></figure></div><p>Otra opción es usar otra base de datos de geolocalización para direcciones IP, en vez de instalar un paquete en el sistema y usar el comando <code>geoiplookup</code> y procesar su salida con las bases de datos de <a href=http://geolite.maxmind.com/download/geoip/database/GeoLite2-Country.mmdb.gz>MaxMind GeoLite2 para paises</a> y <a href=http://geolite.maxmind.com/download/geoip/database/GeoLite2-City.mmdb.gz>ciudades</a> dispondremos de una API accessible desde el lenguaje de programación que prefiramos. En este ejemplo usaré Java pero hay <em>bindings</em> para los lenguajes más populares.</p><p>Este sería el código para obtener la información de forma más sencilla que lanzar un proceso del sistema y <em>parsear</em> su resultado, además con GeoLite2 la aplicación no necesitará que el sistema tenga un paquete instalado y será más autocontenida. La base de datos de geolocalización se proporciona en un archivo que es posible distribuir con la aplicación.</p><p>En el siguiente ejemplo no incluyo la base de datos en el código fuente del proyecto ya que ocupa casi 65MiB. Descargada, descomprimida y ubicada en el directorio <em>src/main/resources</em> la aplicación se iniciar con el comando <code>./gradlew run</code>.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>io.github.picodotdev.blogbitix.javageolocation</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>java.io.InputStream</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.net.InetAddress</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>com.maxmind.geoip2.DatabaseReader</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>com.maxmind.geoip2.model.CityResponse</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>com.maxmind.geoip2.record.City</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>com.maxmind.geoip2.record.Country</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>com.maxmind.geoip2.record.Location</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>com.maxmind.geoip2.record.Postal</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>com.maxmind.geoip2.record.Subdivision</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>

    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=o>{</span>
        <span class=c1>// Acceder a la base de datos
</span><span class=c1></span>        <span class=n>InputStream</span> <span class=n>database</span> <span class=o>=</span> <span class=n>Main</span><span class=o>.</span><span class=na>class</span><span class=o>.</span><span class=na>getResourceAsStream</span><span class=o>(</span><span class=s>&#34;/GeoLite2-City.mmdb&#34;</span><span class=o>);</span>
        <span class=n>DatabaseReader</span> <span class=n>reader</span> <span class=o>=</span> <span class=k>new</span> <span class=n>DatabaseReader</span><span class=o>.</span><span class=na>Builder</span><span class=o>(</span><span class=n>database</span><span class=o>).</span><span class=na>build</span><span class=o>();</span>

        <span class=n>InetAddress</span> <span class=n>ip</span> <span class=o>=</span> <span class=n>InetAddress</span><span class=o>.</span><span class=na>getByName</span><span class=o>(</span><span class=s>&#34;85.84.77.93&#34;</span><span class=o>);</span>

        <span class=c1>// Hacer la búsqueda
</span><span class=c1></span>        <span class=n>CityResponse</span> <span class=n>response</span> <span class=o>=</span> <span class=n>reader</span><span class=o>.</span><span class=na>city</span><span class=o>(</span><span class=n>ip</span><span class=o>);</span>

        <span class=c1>// País
</span><span class=c1></span>        <span class=n>Country</span> <span class=n>country</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=na>getCountry</span><span class=o>();</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>printf</span><span class=o>(</span><span class=s>&#34;ISO Code: %s%n&#34;</span><span class=o>,</span> <span class=n>country</span><span class=o>.</span><span class=na>getIsoCode</span><span class=o>());</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>printf</span><span class=o>(</span><span class=s>&#34;Country: %s%n&#34;</span><span class=o>,</span> <span class=n>country</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>printf</span><span class=o>(</span><span class=s>&#34;Country (zh-CN): %s%n&#34;</span><span class=o>,</span> <span class=n>country</span><span class=o>.</span><span class=na>getNames</span><span class=o>().</span><span class=na>get</span><span class=o>(</span><span class=s>&#34;zh-CN&#34;</span><span class=o>));</span>

        <span class=n>Subdivision</span> <span class=n>subdivision</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=na>getMostSpecificSubdivision</span><span class=o>();</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>printf</span><span class=o>(</span><span class=s>&#34;Subdivision Name: %s%n&#34;</span><span class=o>,</span> <span class=n>subdivision</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>printf</span><span class=o>(</span><span class=s>&#34;Subdivision ISO Code: %s%n&#34;</span><span class=o>,</span> <span class=n>subdivision</span><span class=o>.</span><span class=na>getIsoCode</span><span class=o>());</span>

        <span class=c1>// Ciudad
</span><span class=c1></span>        <span class=n>City</span> <span class=n>city</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=na>getCity</span><span class=o>();</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>printf</span><span class=o>(</span><span class=s>&#34;City: %s%n&#34;</span><span class=o>,</span> <span class=n>city</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span>

        <span class=c1>// Código postal
</span><span class=c1></span>        <span class=n>Postal</span> <span class=n>postal</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=na>getPostal</span><span class=o>();</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>printf</span><span class=o>(</span><span class=s>&#34;Postal Code: %s%n&#34;</span><span class=o>,</span> <span class=n>postal</span><span class=o>.</span><span class=na>getCode</span><span class=o>());</span>

        <span class=c1>// Geolocalizacion
</span><span class=c1></span>        <span class=n>Location</span> <span class=n>location</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=na>getLocation</span><span class=o>();</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>printf</span><span class=o>(</span><span class=s>&#34;Latitude: %s%n&#34;</span><span class=o>,</span> <span class=n>location</span><span class=o>.</span><span class=na>getLatitude</span><span class=o>());</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>printf</span><span class=o>(</span><span class=s>&#34;Longitude: %s%n&#34;</span><span class=o>,</span> <span class=n>location</span><span class=o>.</span><span class=na>getLongitude</span><span class=o>());</span>
    <span class=o>}</span>
<span class=o>}</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2016/06/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion/code/Main.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2016/06/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion/code/Main.java target=_blank>Main.java</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Groovy data-lang=Groovy><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Groovy data-lang=Groovy><span class=n>description</span> <span class=o>=</span> <span class=s1>&#39;JavaGeolocation&#39;</span>
<span class=n>version</span> <span class=o>=</span> <span class=s1>&#39;0.1&#39;</span>

<span class=n>apply</span> <span class=nl>plugin:</span> <span class=s1>&#39;eclipse&#39;</span>
<span class=n>apply</span> <span class=nl>plugin:</span> <span class=s1>&#39;idea&#39;</span>
<span class=n>apply</span> <span class=nl>plugin:</span> <span class=s1>&#39;java&#39;</span>
<span class=n>apply</span> <span class=nl>plugin:</span> <span class=s1>&#39;application&#39;</span>

<span class=n>mainClassName</span> <span class=o>=</span> <span class=s1>&#39;io.github.picodotdev.blogbitix.javageolocation.Main&#39;</span>

<span class=n>repositories</span> <span class=o>{</span>
    <span class=n>mavenCentral</span><span class=o>()</span>
<span class=o>}</span>

<span class=n>dependencies</span> <span class=o>{</span>
    <span class=n>compile</span> <span class=s1>&#39;com.maxmind.geoip2:geoip2:2.7.0&#39;</span>

    <span class=n>compile</span> <span class=s1>&#39;org.slf4j:slf4j-api:1.7.21&#39;</span>
    <span class=n>runtime</span> <span class=s1>&#39;org.apache.logging.log4j:log4j-api:2.5&#39;</span>
    <span class=n>compile</span> <span class=s1>&#39;org.apache.logging.log4j:log4j-slf4j-impl:2.5&#39;</span>
    <span class=n>runtime</span> <span class=s1>&#39;org.apache.logging.log4j:log4j-core:2.5&#39;</span>
<span class=o>}</span>

<span class=n>task</span> <span class=nf>wrapper</span><span class=o>(</span><span class=nl>type:</span> <span class=n>Wrapper</span><span class=o>)</span> <span class=o>{</span>
    <span class=n>gradleVersion</span> <span class=o>=</span> <span class=s1>&#39;2.13&#39;</span>
<span class=o>}</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2016/06/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion/code/build.gradle target=_blank>view raw</a></span>
<a href=/blog-bitix/2016/06/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion/code/build.gradle target=_blank>build.gradle</a></div></div><div class=media style=text-align:center><figure><a href=assets/images/posts/2016/147/geolite2.png title="Información de geoposicionamiento en base a la dirección IP con GeoLite2" data-gallery><img src=assets/images/posts/2016/147/geolite2-thumb.png></a><figcaption>Información de geoposicionamiento en base a la dirección IP con GeoLite2</figcaption></figure></div><p>GeoLite2 tiene una <a href=https://creativecommons.org/licenses/by-sa/4.0/>licencia Creative Commons Attribution-ShareAlike</a> y no tiene coste, MaxMind proporciona además otras bases de datos más completas pero con un coste, 50$ para la base de datos de paises más 24$ para las actualizaciones y 370$ para la base de datos de ciudades más 100$ para las actualizaciones.</p><p>En una aplicación web Java en la interfaz <a href=https://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html>ServletResquest</a> y con el método <a href=http:s//docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getRemoteAddr-->getRemoteAddr()</a> obtenemos la dirección IP del usuario, ya solo nos queda <a href=https://picodotdev.github.io/blog-bitix/2016/03/como-ejecutar-un-proceso-del-sistema-con-java/>lanzar un proceso del sistema desde Java</a> que invoque al comando <code>geoiplookup</code> con la dirección IP obtenida o usar la API Java u de otro lenguaje de MaxMind GeoLite2, obtener la salida del proceso, interpretarla y hacer con ella lo que queramos hacer en la aplicación. En una aplicación web adicionalmente somos libres de usar la <a href=https://en.wikipedia.org/wiki/W3C_Geolocation_API>API de geoposicionamiento</a> implementada en los navegadores.</p><p>Proporcionar contenido personalizado al usuario probablemente ayuda a mejorar la conversión de un sitio de comercio electrónico y la experiencia del usuario ofreciéndole productos o servicios en los que de alguna forma esté interesado ya sea como en este caso basado en su ubicación, pero como en el caso de Amazon según las visitas anteriores y en otros podría ser en base al sistema operativo o navegador como hace Google cuando accedemos a su buscador indicándonos que nos instalemos <a href=https://www.google.es/chrome/browser/desktop/>Chrome</a> si usamos <a href=https://www.mozilla.org/es-ES/firefox/new/>Firefox</a>.</p><p>El <a href=https://github.com/picodotdev/blog-ejemplos/tree/master/JavaGeolocation/>código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en <a href=https://github.com/>GitHub</a> y probarlo en tu equipo ejecutando el comando <code>./gradlew run</code>.</p><div class=reference>Referencia:<br><ul><li><a href=https://picodotdev.github.io/blog-bitix/2016/03/como-ejecutar-un-proceso-del-sistema-con-java/>Lanzar proceso del sistema con Java</a></li><li><a href=https://en.wikipedia.org/wiki/Geolocation_software>Geolocation software</a></li><li><a href=https://en.wikipedia.org/wiki/W3C_Geolocation_API>W3C Geolocation API</a></li></ul></div></div></article><div class="row related"><div class=col-md-12>Artículos relacionados:<ul><li><a href=/blog-bitix/2016/01/hemeroteca-8/>Hemeroteca #8</a></li><li><a href=/blog-bitix/2015/06/hemeroteca-7/>Hemeroteca #7</a></li><li><a href=/blog-bitix/2014/06/hemeroteca-5/>Hemeroteca #5</a></li><li><a href=/blog-bitix/2014/05/arquitectura-y-hospedaje-de-blog-stack/>Arquitectura y hospedaje de Blog Stack</a></li><li><a href=/blog-bitix/2014/05/presentacion-blog-stack/>Presentación de Blog Stack</a></li></ul></div></div><div class=row><div class=col-md-12><div class=sharethis-inline-share-buttons></div></div></div><div class=row><div class=col-12><ins class=adsbygoogle style=display:inline-block;width:970px;height:250px data-ad-client=ca-pub-3533636310991304 data-ad-slot=2975854584 data-type=billboard></ins></div></div><a id=comments></a><div class=row><div class=col-md-12><div id=disqus_thread></div></div></div><script type=text/javascript async>var disqus_shortname='blog-bitix';var disqus_identifier='https:\/\/picodotdev.github.io\/blog-bitix\/2016\/06\/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion\/';var disqus_url='https:\/\/picodotdev.github.io\/blog-bitix\/2016\/06\/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion\/';var disqus_script='embed.js';(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.disqus.com/'+disqus_script;(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);}());</script></div></div><div class=row><div class=col-12><hr></div></div><footer><div class=row><div class="col-12 col-sm-4"><p><strong>Blog Bitix</strong></p><p>Blog dedicado a la distribución GNU/Linux que uso habitualmente, Arch Linux, a mis andanzas alrededor del software libre, la programación y a otros temas relacionados con la tecnología y la informática.</p><p>Publicando de uno a tres artículos únicos a la semana desde el año 2010.</p></div><div class="col-12 col-sm-4 text-center menu"><ul class=list-unstyled><li><a href=/blog-bitix/tags/java/>Java</a></li><li><a href=/blog-bitix/tags/gnu-linux/>GNU/Linux</a></li><li><a href=/blog-bitix/tags/javascript/>JavaScript</a></li><li><a href=/blog-bitix/tags/tapestry/>Tapestry</a></li><li><a href=/blog-bitix/archive/>Archivo y hemeroteca</a></li><li><a href=/blog-bitix/pages/links/>Enlaces</a></li><li><a href=/blog-bitix/pages/advertising/>Publicidad</a></li><li><a href=/blog-bitix/pages/donate/>Donaciones</a></li><li><a href=/blog-bitix/pages/about/>Acerca de...</a></li></ul></div><div class="col-12 col-sm-4 text-center links"><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class=row><div class=col-12>Copyleft <span class=copyleft>&copy;</span> 2019 - <a href=https://creativecommons.org/licenses/by-sa/4.0/ rel=nofollow rel=license><img alt="Licencia de Creative Commons" title="Licencia de Creative Commons" style=border-width:0 src=https://licensebuttons.net/l/by-sa/4.0/80x15.png class=licencia></a><br><a href=https://twitter.com/blogstackinfo rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/blog-stack.png alt="Blog Stack" title="Blog Stack"></a>
<a href=https://www.planetacodigo.com/ rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/planeta-codigo.png alt="Planeta código" title="Planeta código"></a><br><span xmlns:dct=http://purl.org/dc/terms/ property=dct:title><a href=https://picodotdev.github.io/blog-bitix/ rel=nofollow>Blog Bitix</a></span> by <a xmlns:cc=https://creativecommons.org/ns# href=https://picodotdev.github.io/blog-bitix/ property=cc:attributionName rel=cc:attributionurl>pico.dev</a> is licensed under a <a rel=license href=https://creativecommons.org/licenses/by-sa/4.0/>Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional License</a>.<br><span class=credit>Powered by <a href=https://gohugo.io/ rel=nofollow title="A fast and modern static website engine">Hugo</a> and <a href=https://pages.github.com/ title="Websites for you and your projects">GitHub Pages</a>.</span>
<span class=credit>Background patterns from <a href=https://www.toptal.com/designers/subtlepatterns/ rel=nofollow>Subtle Patterns</a>.</span></div></div></footer></div><div class=blueimp-gallery-container><div id=blueimp-gallery class="blueimp-gallery blueimp-gallery-controls" data-use-bootstrap-modal=false><div class=slides></div><h3 class=title></h3><a class=prev>‹</a>
<a class=next>›</a>
<a class=close>×</a>
<a class=play-pause></a><ol class=indicator></ol><div class="modal fade"><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close aria-hidden=true>&times;</button><h4 class=modal-title></h4></div><div class="modal-body next"></div><div class=modal-footer><button type=button class="btn btn-default pull-left prev">
<i class="glyphicon glyphicon-chevron-left"></i>Anterior</button>
<button type=button class="btn btn-primary next">
Siguiente
<i class="glyphicon glyphicon-chevron-right"></i></button></div></div></div></div></div></div><script type=text/javascript>window.cookieconsent_options={"message":"Esta bitácora te informa de la obviedad de que utiliza «cookies», propias y de servicios como Google Analytics y Google AdSense entre otros.","dismiss":"Aceptar","learnMore":"Más información","link":null,"theme":"dark-bottom"};</script><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js async></script></body></html>
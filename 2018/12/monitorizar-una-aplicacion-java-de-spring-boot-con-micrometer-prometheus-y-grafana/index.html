<!doctype html><html lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=picodotdev><meta name=keywords content="java,programacion,software,hardware,tapestry,software libre,gnu,linux,gnu/linux,unix,arch,arch linux,html,css,javascript"><meta name=description content="Los proyectos de Spring no son tan conservadores como Java EE o ahora Jakata EE y se desarrollan a una velocidad mayor cubriendo de forma más temprana las necesidades de los programadores según evolucionan las tecnologías y se adoptan nuevos modelos de arquitectura.
Con el advenimiento de los microservicios, contenedores, la nube y aplicaciones autocontenidas Spring se ha adaptado con proyectos como Spring Boot y Spring Cloud. En el asunto que ocupa este artículo de métricas con la versión 2 de Spring Boot se ha adoptado Micrometer como librería para proporcionar las métricas. &hellip;"><base href=https://picodotdev.github.io/blog-bitix/><title>Monitorizar una aplicación Java de Spring Boot con Micrometer, Prometheus y Grafana</title><link rel=author type=text/plain href=humans.txt><link rel="shortcut icon" href=assets/favicon.ico><link rel=apple-touch-icon-precomposed sizes=144x144 href=assets/apple-touch-icon-144-precomposed.png><link rel=canonical href=https://picodotdev.github.io/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/><link href=index.xml rel=alternate type=application/rss+xml title="Blog Bitix"><link rel=stylesheet type=text/css href="//fonts.googleapis.com/css?family=PT+Serif:400,700italic,700,400italic"><link rel=stylesheet type=text/css href=assets/libs/bootstrap-4.2.1/css/bootstrap.min.css><link rel=stylesheet type=text/css href=assets/libs/Gallery-2.33.0/css/blueimp-gallery.min.css><link rel=stylesheet type=text/css href=assets/css/syntax.css><link rel=stylesheet type=text/css href=assets/css/main.css><script src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js defer></script><script type=text/javascript defer>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:'ca-pub-3533636310991304',enable_page_level_ads:true});</script><script type=text/javascript defer>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-12874075-4','picodotdev.github.io');ga('send','pageview');</script><script type=text/javascript defer>var require={baseUrl:'assets',paths:{'jquery':'libs/jquery.slim.min','bootstrap':'libs/bootstrap-4.2.1/js/bootstrap.min','blueimp-helper':'libs/Gallery-2.33.0/js/blueimp-helper','blueimp-gallery':'libs/Gallery-2.33.0/js/blueimp-gallery','blueimp-gallery-indicator':'libs/Gallery-2.33.0/js/blueimp-gallery-indicator','blueimp-gallery-video':'libs/Gallery-2.33.0/js/blueimp-gallery-video','blueimp-gallery-vimeo':'libs/Gallery-2.33.0/js/blueimp-gallery-vimeo','blueimp-gallery-youtube':'libs/Gallery-2.33.0/js/blueimp-gallery-youtube','jquery-blueimp-gallery':'libs/Gallery-2.33.0/js/jquery.blueimp-gallery'},shim:{'jquery':{exports:'jquery'},'blueimp-gallery':{exports:'blueimp'}}};</script><script type=text/javascript src=assets/libs/require.js data-main=js/main defer></script><script type=text/javascript src="//platform-api.sharethis.com/js/sharethis.js#property=5920c4ce1bd0670011e06acd&product=inline-share-buttons" defer></script></head><body><div class=container><div class=row><div class=col><header><div class=row><div class="col-12 col-lg-4"></div><div class="col-12 col-lg-4"><h2 class=title><a href=https://picodotdev.github.io/blog-bitix/>Blog Bitix</a></h2><div class=links><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class="col-12 col-lg-4 text-center"><form name=query class="form-inline search" onsubmit="return false;"><div class=input-group><input type=text name=q class=form-control placeholder="Buscar en Blog Bitix">
<span class=input-group-btn><button class="btn btn-secondary" type=submit>Buscar</button></span></div></form><form name=search action=https://duckduckgo.com/ method=get class=hidden data-site=https://picodotdev.github.io/blog-bitix/><input type=hidden name=q></form></div></div><div class=row><div class=col-12><nav class="nav nav-pills nav-fill"><a href=/blog-bitix/tags/java/ class="nav-item nav-link">Java</a>
<a href=/blog-bitix/tags/gnu-linux/ class="nav-item nav-link">GNU/Linux</a>
<a href=/blog-bitix/tags/javascript/ class="nav-item nav-link">JavaScript</a>
<a href=/blog-bitix/tags/tapestry/ class="nav-item nav-link">Tapestry</a>
<a href=/blog-bitix/archive/ class="nav-item nav-link">Archivo y hemeroteca</a>
<a href=/blog-bitix/pages/links/ class="nav-item nav-link">Enlaces</a>
<a href=/blog-bitix/pages/about/ class="nav-item nav-link">Acerca de...</a></nav></div></div></header></div></div><div class=row><div class="col-12 col-lg-8"><div class=row><div class=col-12><article itemscope itemtype=http://schema.org/BlogPosting><meta itemprop=inLanguage content=es><meta itemprop=keywords content="java, planeta-codigo, programacion, software, spring"><h1 itemprop=name>Monitorizar una aplicación Java de Spring Boot con Micrometer, Prometheus y Grafana</h1><p class=information>Escrito por
<span itemscope itemtype=http://schema.org/Person><span itemprop=name>picodotdev</span></span> el <time itemprop=datePublished datetime=2018-12-14>14/12/2018</time>.<br><a href=tags/java/>java</a> <a href=tags/planeta-codigo/>planeta-codigo</a> <a href=tags/programacion/>programacion</a> <a href=tags/software/>software</a> <a href=tags/spring/>spring</a><br><a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/ itemprop=url>Enlace permanente</a>
<a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/#comments>Comentarios</a></p><ins class=adsbygoogle style=display:inline-block;width:728px;height:90px data-ad-client=ca-pub-3533636310991304 data-ad-slot=5966819782 data-type=leaderboard></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><div class=content itemprop=articleBody><meta itemprop=wordCount content=2795><div class=logotypes style=float:right><img src=assets/images/logotipos/java.svg class=right width=200 alt=Java title=Java></div><div class=logotypes style=float:right;clear:right><img src=assets/images/logotipos/prometheus.svg class=right width=200 alt=Promehteus title=Promehteus></div><div class=logotypes style=float:right;clear:right><img src=assets/images/logotipos/grafana.svg class=right width=200 alt=Grafana title=Grafana></div><p>Los <a href=https://spring.io/projects>proyectos de Spring</a> no son tan conservadores como Java EE o ahora Jakata EE y se desarrollan a una velocidad mayor cubriendo de forma más temprana las necesidades de los programadores según evolucionan las tecnologías y se adoptan nuevos modelos de arquitectura.</p><p>Con el advenimiento de los microservicios, contenedores, la nube y aplicaciones autocontenidas Spring se ha adaptado con proyectos como <a href=https://projects.spring.io/spring-boot/>Spring Boot</a> y <a href=https://projects.spring.io/spring-cloud/>Spring Cloud</a>. En el asunto que ocupa este artículo de métricas con la versión 2 de Spring Boot se ha adoptado <a href=https://micrometer.io/>Micrometer</a> como librería para proporcionar las métricas.</p><p>Micrometer permite exportar a cualquiera de los más populares sistemas de monitorización los datos de las métricas. Usando Micrometer la aplicación se abstrae del sistema de métricas empleado pudiendo cambiar en un futuro si se desea. Uno de los sistemas más populares de monitorización es <a href=https://prometheus.io/>Prometheus</a> que se encarga de recoger y almacenar los datos de las métricas expuestas por las aplicaciones y ofrece un lenguaje de consulta de los datos con el que otras aplicaciones pueden visualizarlos en gráficas y paneles de control. <a href=https://grafana.com/>Grafana</a> es una de estas herramientas que permite visualizar los datos proporcionados por Prometheus. Estos sistemas de monitorización ofrecen un sistema de alertas que se integran entre otros con <a href=https://slack.com/>Slack</a>.</p><p>En el artículo <a href=https://picodotdev.github.io/blog-bitix/2015/12/informacion-y-metricas-de-la-aplicacion-con-spring-boot-actuator/>Información y métricas de la aplicación con Spring Boot Actuator</a> mostraba como configurar Spring Boot y <a href=https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#production-ready>Spring Boot Actuator</a> para exponer métricas en el <em>endpoint</em> <em>/actuator/metrics</em>, con estas herramientas solo se exponen la clave y valor de cada métrica y solo en un momento dado. Pueden ser métricas del servicio como cantidad de CPU usada, memoria consumida y libre, espacio en almacenamiento, etc&hellip; o métricas de aplicación como número de peticiones realizadas al servicio, tiempo de respuesta, etc&hellip; Una de las funcionalidades de Prometheus es recolectar cada cierto tiempo los valores de estas métricas que da lugar a una colección de datos que varía en el tiempo y que Grafana puede visualizar en gráficas para una mucha mayor facilidad de comprensión que la enorme cantidad de datos en crudo.</p><p>Usando Spring Boot 2 exportar los datos para Prometheus es realmente sencillo, basta con incluir la dependencia <em>io.micrometer:micrometer-registry-prometheus</em> mediante la herramienta de construcción, por ejemplo <a href=https://gradle.org/>Gradle</a>, y automáticamente se expone en el <em>endpoint</em> <em>/actuator/prometheus</em> con la información de las métricas en el formato que espera Prometheus para recolectarla.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Groovy data-lang=Groovy><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Groovy data-lang=Groovy><span class=n>plugins</span> <span class=o>{</span>
    <span class=n>id</span> <span class=s1>&#39;application&#39;</span>
    <span class=n>id</span> <span class=s1>&#39;org.springframework.boot&#39;</span> <span class=n>version</span> <span class=s1>&#39;2.0.7.RELEASE&#39;</span>
    <span class=n>id</span> <span class=s1>&#39;io.spring.dependency-management&#39;</span> <span class=n>version</span> <span class=s1>&#39;1.0.6.RELEASE&#39;</span>
<span class=o>}</span>

<span class=n>mainClassName</span> <span class=o>=</span> <span class=s1>&#39;io.github.picodotdev.blogbitix.springcloud.service.Main&#39;</span>

<span class=n>dependencyManagement</span> <span class=o>{</span>
    <span class=n>imports</span> <span class=o>{</span>
        <span class=n>mavenBom</span> <span class=s1>&#39;org.springframework.cloud:spring-cloud-dependencies:Finchley.SR2&#39;</span>
    <span class=o>}</span>
<span class=o>}</span>

<span class=n>dependencies</span> <span class=o>{</span>
    <span class=c1>// Spring
</span><span class=c1></span> <span class=kt>def</span> <span class=n>excludeSpringBootStarterLogging</span> <span class=o>=</span> <span class=o>{</span> <span class=n>exclude</span><span class=o>(</span><span class=nl>group:</span> <span class=s1>&#39;org.springframework.boot&#39;</span><span class=o>,</span> <span class=nl>module:</span> <span class=s1>&#39;spring-boot-starter-logging&#39;</span><span class=o>)</span> <span class=o>}</span>
    <span class=n>compile</span><span class=o>(</span><span class=s1>&#39;org.springframework.boot:spring-boot-starter&#39;</span><span class=o>,</span> <span class=n>excludeSpringBootStarterLogging</span><span class=o>)</span>
    <span class=n>compile</span><span class=o>(</span><span class=s2>&#34;org.springframework.boot:spring-boot-starter-web&#34;</span><span class=o>,</span> <span class=n>excludeSpringBootStarterLogging</span><span class=o>)</span>
    <span class=n>compile</span><span class=o>(</span><span class=s1>&#39;org.springframework.boot:spring-boot-starter-log4j2&#39;</span><span class=o>,</span> <span class=n>excludeSpringBootStarterLogging</span><span class=o>)</span>
    <span class=n>compile</span><span class=o>(</span><span class=s2>&#34;org.springframework.boot:spring-boot-starter-actuator&#34;</span><span class=o>,</span> <span class=n>excludeSpringBootStarterLogging</span><span class=o>)</span>
    <span class=n>compile</span><span class=o>(</span><span class=s1>&#39;org.springframework.cloud:spring-cloud-starter-config&#39;</span><span class=o>,</span> <span class=n>excludeSpringBootStarterLogging</span><span class=o>)</span>
    <span class=n>compile</span><span class=o>(</span><span class=s1>&#39;org.springframework.cloud:spring-cloud-starter-bus-amqp&#39;</span><span class=o>,</span> <span class=n>excludeSpringBootStarterLogging</span><span class=o>)</span>
    <span class=n>compile</span><span class=o>(</span><span class=s1>&#39;org.springframework.cloud:spring-cloud-starter-netflix-eureka-client&#39;</span><span class=o>,</span> <span class=n>excludeSpringBootStarterLogging</span><span class=o>)</span>
    <span class=n>compile</span><span class=o>(</span><span class=s1>&#39;io.micrometer:micrometer-registry-prometheus:1.0.8&#39;</span><span class=o>)</span>
    
    <span class=n>runtime</span><span class=o>(</span><span class=s1>&#39;com.google.code.gson:gson:2.8.5&#39;</span><span class=o>)</span>
    <span class=n>runtime</span><span class=o>(</span><span class=s1>&#39;com.fasterxml.jackson.core:jackson-databind:2.9.6&#39;</span><span class=o>)</span>
    <span class=n>runtime</span><span class=o>(</span><span class=s1>&#39;com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.9.6&#39;</span><span class=o>)</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/build.gradle target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/build.gradle target=_blank>build.gradle</a></div></div><p>Micrometer y Prometheus ofrecen varios tipos de métricas:</p><ul><li><em>Counter</em>: representa un valor que se va incrementando a lo largo del tiempo. Puede ser el número de invocaciones recibidas por servicio.</li><li><em>Gauge</em>: representa un valor que arbitrariamente puede subir o bajar. Puede ser la cantidad de memoria usada.</li><li><em>Timer</em>: mide periodos de tiempo. Puede ser el tiempo de respuesta empleado para atender una petición de un servicio.</li><li><em>Distribution summaries</em>: recolecta la distribución de una serie de datos con los que se pueden obtener percentiles.</li></ul><p>Utilizando el ejemplo que hice para la <a href=https://picodotdev.github.io/blog-bitix/series/spring-cloud/>serie de artículos sobre Spring Cloud</a> he añadido al micro servicio <em>service</em> un contador con el número de invocaciones que se le ha realizado. Este dato se expone en el <em>endpoint</em> con la clave <em>service.invocations</em> como se ha definido al registrar el contador en Micrometer con la clase <em>MeterRegistry</em>. Además de esta métrica propia del servicio Spring Boot Actuator añade otras muchas más del uso de la CPU, memoria, &hellip;</p><p>Una clase de una aplicación de Spring Boot que utiliza un <em>Counter</em>.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>io.github.picodotdev.blogbitix.springcloud.service</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>io.micrometer.core.instrument.Counter</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>io.micrometer.core.instrument.MeterRegistry</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.beans.factory.annotation.Autowired</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.web.bind.annotation.RequestMapping</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.web.bind.annotation.RestController</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>javax.servlet.http.HttpServletRequest</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.util.Random</span><span class=o>;</span>

<span class=nd>@RestController</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>DefaultController</span> <span class=o>{</span>

    <span class=nd>@Autowired</span>
    <span class=kd>private</span> <span class=n>DefaultConfiguration</span> <span class=n>configuration</span><span class=o>;</span>

    <span class=kd>private</span> <span class=n>Random</span> <span class=n>random</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>Counter</span> <span class=n>counter</span><span class=o>;</span>

    <span class=kd>public</span> <span class=nf>DefaultController</span><span class=o>(</span><span class=n>MeterRegistry</span> <span class=n>registry</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>random</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Random</span><span class=o>();</span>
        <span class=k>this</span><span class=o>.</span><span class=na>counter</span> <span class=o>=</span> <span class=n>Counter</span><span class=o>.</span><span class=na>builder</span><span class=o>(</span><span class=s>&#34;service.invocations&#34;</span><span class=o>).</span><span class=na>description</span><span class=o>(</span><span class=s>&#34;Total service invocations&#34;</span><span class=o>).</span><span class=na>register</span><span class=o>(</span><span class=n>registry</span><span class=o>);</span>
    <span class=o>}</span>

    <span class=nd>@RequestMapping</span><span class=o>(</span><span class=s>&#34;/&#34;</span><span class=o>)</span>
    <span class=kd>public</span> <span class=n>String</span> <span class=nf>home</span><span class=o>(</span><span class=n>HttpServletRequest</span> <span class=n>request</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=o>{</span>
        <span class=n>counter</span><span class=o>.</span><span class=na>increment</span><span class=o>();</span>

        <span class=c1>// Timeout simulation
</span><span class=c1></span>     <span class=c1>//Thread.sleep(random.nextInt(2000));
</span><span class=c1></span>
        <span class=k>return</span> <span class=n>String</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=s>&#34;Hello world (%s, %s)&#34;</span><span class=o>,</span> <span class=n>request</span><span class=o>.</span><span class=na>getRequestURL</span><span class=o>(),</span> <span class=n>configuration</span><span class=o>.</span><span class=na>getKey</span><span class=o>());</span>
    <span class=o>}</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/DefaultController.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/DefaultController.java target=_blank>DefaultController.java</a></div></div><p>Las claves de las métricas por defecto exportadas por Spring Boot Actuator.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-JSON data-lang=JSON><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-JSON data-lang=JSON><span class=p>{</span>
   <span class=nt>&#34;names&#34;</span><span class=p>:[</span>
      <span class=s2>&#34;jvm.memory.max&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.threads.states&#34;</span><span class=p>,</span>
      <span class=s2>&#34;http.server.requests&#34;</span><span class=p>,</span>
      <span class=s2>&#34;process.files.max&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.gc.memory.promoted&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.cache.hit&#34;</span><span class=p>,</span>
      <span class=s2>&#34;rabbitmq.channels&#34;</span><span class=p>,</span>
      <span class=s2>&#34;system.load.average.1m&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.cache.access&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.memory.used&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.gc.max.data.size&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.gc.pause&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.memory.committed&#34;</span><span class=p>,</span>
      <span class=s2>&#34;system.cpu.count&#34;</span><span class=p>,</span>
      <span class=s2>&#34;spring.integration.channels&#34;</span><span class=p>,</span>
      <span class=s2>&#34;rabbitmq.connections&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.global.sent&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.buffer.memory.used&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.sessions.created&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.threads.daemon&#34;</span><span class=p>,</span>
      <span class=s2>&#34;system.cpu.usage&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.gc.memory.allocated&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.global.request.max&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.global.request&#34;</span><span class=p>,</span>
      <span class=s2>&#34;rabbitmq.rejected&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.sessions.expired&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.threads.live&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.threads.peak&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.global.received&#34;</span><span class=p>,</span>
      <span class=s2>&#34;process.uptime&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.sessions.rejected&#34;</span><span class=p>,</span>
      <span class=s2>&#34;process.cpu.usage&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.threads.config.max&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.classes.loaded&#34;</span><span class=p>,</span>
      <span class=s2>&#34;rabbitmq.consumed&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.classes.unloaded&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.global.error&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.sessions.active.current&#34;</span><span class=p>,</span>
      <span class=s2>&#34;service.invocations&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.sessions.alive.max&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.gc.live.data.size&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.servlet.request.max&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.threads.current&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.servlet.request&#34;</span><span class=p>,</span>
      <span class=s2>&#34;process.files.open&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.buffer.count&#34;</span><span class=p>,</span>
      <span class=s2>&#34;jvm.buffer.total.capacity&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.sessions.active.max&#34;</span><span class=p>,</span>
      <span class=s2>&#34;spring.integration.handlers&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.threads.busy&#34;</span><span class=p>,</span>
      <span class=s2>&#34;rabbitmq.published&#34;</span><span class=p>,</span>
      <span class=s2>&#34;process.start.time&#34;</span><span class=p>,</span>
      <span class=s2>&#34;tomcat.servlet.error&#34;</span><span class=p>,</span>
      <span class=s2>&#34;spring.integration.sources&#34;</span><span class=p>,</span>
      <span class=s2>&#34;rabbitmq.acknowledged&#34;</span>
   <span class=p>]</span>
<span class=p>}</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/actuator-metrics.json target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/actuator-metrics.json target=_blank>actuator-metrics.json</a></div></div><p>Los datos de una métrica en el <em>enpoint</em> <em>/actuator/metrics/service.invocations</em>.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-JSON data-lang=JSON><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-JSON data-lang=JSON><span class=p>{</span>
   <span class=nt>&#34;name&#34;</span><span class=p>:</span><span class=s2>&#34;service.invocations&#34;</span><span class=p>,</span>
   <span class=nt>&#34;description&#34;</span><span class=p>:</span><span class=s2>&#34;Total service invocations&#34;</span><span class=p>,</span>
   <span class=nt>&#34;baseUnit&#34;</span><span class=p>:</span><span class=kc>null</span><span class=p>,</span>
   <span class=nt>&#34;measurements&#34;</span><span class=p>:[</span>
      <span class=p>{</span>
         <span class=nt>&#34;statistic&#34;</span><span class=p>:</span><span class=s2>&#34;COUNT&#34;</span><span class=p>,</span>
         <span class=nt>&#34;value&#34;</span><span class=p>:</span><span class=mf>1.0</span>
      <span class=p>}</span>
   <span class=p>],</span>
   <span class=nt>&#34;availableTags&#34;</span><span class=p>:[</span>

   <span class=p>]</span>
<span class=p>}</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/actuator-metrics-service-invocations.json target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/actuator-metrics-service-invocations.json target=_blank>actuator-metrics-service-invocations.json</a></div></div><p>Y las mismas métricas en el formato que espera Prometheus.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Plaintext data-lang=Plaintext><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span><span class=lnt>206
</span><span class=lnt>207
</span><span class=lnt>208
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Plaintext data-lang=Plaintext># HELP jvm_buffer_total_capacity_bytes An estimate of the total capacity of the buffers in this pool
# TYPE jvm_buffer_total_capacity_bytes gauge
jvm_buffer_total_capacity_bytes{id=&#34;direct&#34;,} 40960.0
jvm_buffer_total_capacity_bytes{id=&#34;mapped&#34;,} 0.0
# HELP process_files_max_files The maximum file descriptor count
# TYPE process_files_max_files gauge
process_files_max_files 4096.0
# HELP system_cpu_count The number of processors available to the Java virtual machine
# TYPE system_cpu_count gauge
system_cpu_count 8.0
# HELP tomcat_global_request_seconds  
# TYPE tomcat_global_request_seconds summary
tomcat_global_request_seconds_count{name=&#34;http-nio-8080&#34;,} 2.0
tomcat_global_request_seconds_sum{name=&#34;http-nio-8080&#34;,} 0.111
# HELP jvm_threads_states_threads The current number of threads having NEW state
# TYPE jvm_threads_states_threads gauge
jvm_threads_states_threads{state=&#34;runnable&#34;,} 7.0
jvm_threads_states_threads{state=&#34;blocked&#34;,} 0.0
jvm_threads_states_threads{state=&#34;waiting&#34;,} 16.0
jvm_threads_states_threads{state=&#34;timed-waiting&#34;,} 9.0
jvm_threads_states_threads{state=&#34;new&#34;,} 0.0
jvm_threads_states_threads{state=&#34;terminated&#34;,} 0.0
# HELP tomcat_cache_access_total  
# TYPE tomcat_cache_access_total counter
tomcat_cache_access_total 0.0
# HELP rabbitmq_acknowledged_total  
# TYPE rabbitmq_acknowledged_total counter
rabbitmq_acknowledged_total{name=&#34;rabbit&#34;,} 0.0
# HELP process_uptime_seconds The uptime of the Java virtual machine
# TYPE process_uptime_seconds gauge
process_uptime_seconds 46.087
# HELP jvm_gc_memory_allocated_bytes_total Incremented for an increase in the size of the young generation memory pool after one GC to before the next
# TYPE jvm_gc_memory_allocated_bytes_total counter
jvm_gc_memory_allocated_bytes_total 8.47628712E8
# HELP rabbitmq_consumed_total  
# TYPE rabbitmq_consumed_total counter
rabbitmq_consumed_total{name=&#34;rabbit&#34;,} 0.0
# HELP tomcat_global_error_total  
# TYPE tomcat_global_error_total counter
tomcat_global_error_total{name=&#34;http-nio-8080&#34;,} 0.0
# HELP jvm_threads_peak_threads The peak live thread count since the Java virtual machine started or peak was reset
# TYPE jvm_threads_peak_threads gauge
jvm_threads_peak_threads 34.0
# HELP jvm_gc_pause_seconds Time spent in GC pause
# TYPE jvm_gc_pause_seconds summary
jvm_gc_pause_seconds_count{action=&#34;end of major GC&#34;,cause=&#34;Metadata GC Threshold&#34;,} 1.0
jvm_gc_pause_seconds_sum{action=&#34;end of major GC&#34;,cause=&#34;Metadata GC Threshold&#34;,} 0.137
jvm_gc_pause_seconds_count{action=&#34;end of minor GC&#34;,cause=&#34;Metadata GC Threshold&#34;,} 1.0
jvm_gc_pause_seconds_sum{action=&#34;end of minor GC&#34;,cause=&#34;Metadata GC Threshold&#34;,} 0.014
jvm_gc_pause_seconds_count{action=&#34;end of minor GC&#34;,cause=&#34;Allocation Failure&#34;,} 2.0
jvm_gc_pause_seconds_sum{action=&#34;end of minor GC&#34;,cause=&#34;Allocation Failure&#34;,} 0.052
# HELP jvm_gc_pause_seconds_max Time spent in GC pause
# TYPE jvm_gc_pause_seconds_max gauge
jvm_gc_pause_seconds_max{action=&#34;end of major GC&#34;,cause=&#34;Metadata GC Threshold&#34;,} 0.137
jvm_gc_pause_seconds_max{action=&#34;end of minor GC&#34;,cause=&#34;Metadata GC Threshold&#34;,} 0.014
jvm_gc_pause_seconds_max{action=&#34;end of minor GC&#34;,cause=&#34;Allocation Failure&#34;,} 0.033
# HELP http_server_requests_seconds  
# TYPE http_server_requests_seconds summary
http_server_requests_seconds_count{exception=&#34;None&#34;,method=&#34;GET&#34;,status=&#34;200&#34;,uri=&#34;/&#34;,} 1.0
http_server_requests_seconds_sum{exception=&#34;None&#34;,method=&#34;GET&#34;,status=&#34;200&#34;,uri=&#34;/&#34;,} 0.038397291
http_server_requests_seconds_count{exception=&#34;None&#34;,method=&#34;GET&#34;,status=&#34;200&#34;,uri=&#34;/**/favicon.ico&#34;,} 1.0
http_server_requests_seconds_sum{exception=&#34;None&#34;,method=&#34;GET&#34;,status=&#34;200&#34;,uri=&#34;/**/favicon.ico&#34;,} 0.010500544
# HELP http_server_requests_seconds_max  
# TYPE http_server_requests_seconds_max gauge
http_server_requests_seconds_max{exception=&#34;None&#34;,method=&#34;GET&#34;,status=&#34;200&#34;,uri=&#34;/&#34;,} 0.038397291
http_server_requests_seconds_max{exception=&#34;None&#34;,method=&#34;GET&#34;,status=&#34;200&#34;,uri=&#34;/**/favicon.ico&#34;,} 0.010500544
# HELP tomcat_sessions_created_sessions_total  
# TYPE tomcat_sessions_created_sessions_total counter
tomcat_sessions_created_sessions_total 0.0
# HELP rabbitmq_published_total  
# TYPE rabbitmq_published_total counter
rabbitmq_published_total{name=&#34;rabbit&#34;,} 0.0
# HELP spring_integration_handlers The number of message handlers
# TYPE spring_integration_handlers gauge
spring_integration_handlers 2.0
# HELP jvm_memory_used_bytes The amount of used memory
# TYPE jvm_memory_used_bytes gauge
jvm_memory_used_bytes{area=&#34;heap&#34;,id=&#34;PS Survivor Space&#34;,} 0.0
jvm_memory_used_bytes{area=&#34;heap&#34;,id=&#34;PS Old Gen&#34;,} 4.2640064E7
jvm_memory_used_bytes{area=&#34;heap&#34;,id=&#34;PS Eden Space&#34;,} 2.21190608E8
jvm_memory_used_bytes{area=&#34;nonheap&#34;,id=&#34;Metaspace&#34;,} 6.2586488E7
jvm_memory_used_bytes{area=&#34;nonheap&#34;,id=&#34;Code Cache&#34;,} 1.9553024E7
jvm_memory_used_bytes{area=&#34;nonheap&#34;,id=&#34;Compressed Class Space&#34;,} 8220544.0
# HELP tomcat_servlet_error_total  
# TYPE tomcat_servlet_error_total counter
tomcat_servlet_error_total{name=&#34;default&#34;,} 0.0
# HELP rabbitmq_connections  
# TYPE rabbitmq_connections gauge
rabbitmq_connections{name=&#34;rabbit&#34;,} 0.0
# HELP spring_integration_sources The number of message sources
# TYPE spring_integration_sources gauge
spring_integration_sources 0.0
# HELP tomcat_sessions_active_max_sessions  
# TYPE tomcat_sessions_active_max_sessions gauge
tomcat_sessions_active_max_sessions 0.0
# HELP tomcat_global_received_bytes_total  
# TYPE tomcat_global_received_bytes_total counter
tomcat_global_received_bytes_total{name=&#34;http-nio-8080&#34;,} 0.0
# HELP tomcat_threads_current_threads  
# TYPE tomcat_threads_current_threads gauge
tomcat_threads_current_threads{name=&#34;http-nio-8080&#34;,} 10.0
# HELP tomcat_sessions_active_current_sessions  
# TYPE tomcat_sessions_active_current_sessions gauge
tomcat_sessions_active_current_sessions 0.0
# HELP tomcat_global_request_max_seconds  
# TYPE tomcat_global_request_max_seconds gauge
tomcat_global_request_max_seconds{name=&#34;http-nio-8080&#34;,} 0.1
# HELP tomcat_sessions_expired_sessions_total  
# TYPE tomcat_sessions_expired_sessions_total counter
tomcat_sessions_expired_sessions_total 0.0
# HELP jvm_memory_committed_bytes The amount of memory in bytes that is committed for the Java virtual machine to use
# TYPE jvm_memory_committed_bytes gauge
jvm_memory_committed_bytes{area=&#34;heap&#34;,id=&#34;PS Survivor Space&#34;,} 3.2505856E7
jvm_memory_committed_bytes{area=&#34;heap&#34;,id=&#34;PS Old Gen&#34;,} 3.00941312E8
jvm_memory_committed_bytes{area=&#34;heap&#34;,id=&#34;PS Eden Space&#34;,} 6.17086976E8
jvm_memory_committed_bytes{area=&#34;nonheap&#34;,id=&#34;Metaspace&#34;,} 6.6060288E7
jvm_memory_committed_bytes{area=&#34;nonheap&#34;,id=&#34;Code Cache&#34;,} 2.0512768E7
jvm_memory_committed_bytes{area=&#34;nonheap&#34;,id=&#34;Compressed Class Space&#34;,} 8912896.0
# HELP jvm_gc_memory_promoted_bytes_total Count of positive increases in the size of the old generation memory pool before GC to after GC
# TYPE jvm_gc_memory_promoted_bytes_total counter
jvm_gc_memory_promoted_bytes_total 2.5852976E7
# HELP system_load_average_1m The sum of the number of runnable entities queued to available processors and the number of runnable entities running on the available processors averaged over a period of time
# TYPE system_load_average_1m gauge
system_load_average_1m 1.23
# HELP system_cpu_usage The &#34;recent cpu usage&#34; for the whole system
# TYPE system_cpu_usage gauge
system_cpu_usage 0.09841353781068218
# HELP jvm_buffer_count_buffers An estimate of the number of buffers in the pool
# TYPE jvm_buffer_count_buffers gauge
jvm_buffer_count_buffers{id=&#34;direct&#34;,} 5.0
jvm_buffer_count_buffers{id=&#34;mapped&#34;,} 0.0
# HELP jvm_memory_max_bytes The maximum amount of memory in bytes that can be used for memory management
# TYPE jvm_memory_max_bytes gauge
jvm_memory_max_bytes{area=&#34;heap&#34;,id=&#34;PS Survivor Space&#34;,} 3.2505856E7
jvm_memory_max_bytes{area=&#34;heap&#34;,id=&#34;PS Old Gen&#34;,} 5.59939584E9
jvm_memory_max_bytes{area=&#34;heap&#34;,id=&#34;PS Eden Space&#34;,} 2.735210496E9
jvm_memory_max_bytes{area=&#34;nonheap&#34;,id=&#34;Metaspace&#34;,} -1.0
jvm_memory_max_bytes{area=&#34;nonheap&#34;,id=&#34;Code Cache&#34;,} 2.5165824E8
jvm_memory_max_bytes{area=&#34;nonheap&#34;,id=&#34;Compressed Class Space&#34;,} 1.073741824E9
# HELP jvm_threads_live_threads The current number of live threads including both daemon and non-daemon threads
# TYPE jvm_threads_live_threads gauge
jvm_threads_live_threads 32.0
# HELP service_invocations_total  
# TYPE service_invocations_total counter
service_invocations_total 1.0
# HELP tomcat_threads_config_max_threads  
# TYPE tomcat_threads_config_max_threads gauge
tomcat_threads_config_max_threads{name=&#34;http-nio-8080&#34;,} 200.0
# HELP jvm_threads_daemon_threads The current number of live daemon threads
# TYPE jvm_threads_daemon_threads gauge
jvm_threads_daemon_threads 29.0
# HELP process_start_time_seconds Start time of the process since unix epoch.
# TYPE process_start_time_seconds gauge
process_start_time_seconds 1.544815302414E9
# HELP rabbitmq_rejected_total  
# TYPE rabbitmq_rejected_total counter
rabbitmq_rejected_total{name=&#34;rabbit&#34;,} 0.0
# HELP tomcat_servlet_request_max_seconds  
# TYPE tomcat_servlet_request_max_seconds gauge
tomcat_servlet_request_max_seconds{name=&#34;default&#34;,} 0.0
# HELP process_files_open_files The open file descriptor count
# TYPE process_files_open_files gauge
process_files_open_files 189.0
# HELP jvm_buffer_memory_used_bytes An estimate of the memory that the Java virtual machine is using for this buffer pool
# TYPE jvm_buffer_memory_used_bytes gauge
jvm_buffer_memory_used_bytes{id=&#34;direct&#34;,} 40960.0
jvm_buffer_memory_used_bytes{id=&#34;mapped&#34;,} 0.0
# HELP tomcat_threads_busy_threads  
# TYPE tomcat_threads_busy_threads gauge
tomcat_threads_busy_threads{name=&#34;http-nio-8080&#34;,} 1.0
# HELP jvm_gc_live_data_size_bytes Size of old generation memory pool after a full GC
# TYPE jvm_gc_live_data_size_bytes gauge
jvm_gc_live_data_size_bytes 4.2640064E7
# HELP tomcat_servlet_request_seconds  
# TYPE tomcat_servlet_request_seconds summary
tomcat_servlet_request_seconds_count{name=&#34;default&#34;,} 0.0
tomcat_servlet_request_seconds_sum{name=&#34;default&#34;,} 0.0
# HELP jvm_gc_max_data_size_bytes Max size of old generation memory pool
# TYPE jvm_gc_max_data_size_bytes gauge
jvm_gc_max_data_size_bytes 5.59939584E9
# HELP tomcat_sessions_alive_max_seconds  
# TYPE tomcat_sessions_alive_max_seconds gauge
tomcat_sessions_alive_max_seconds 0.0
# HELP tomcat_global_sent_bytes_total  
# TYPE tomcat_global_sent_bytes_total counter
tomcat_global_sent_bytes_total{name=&#34;http-nio-8080&#34;,} 1004.0
# HELP rabbitmq_channels  
# TYPE rabbitmq_channels gauge
rabbitmq_channels{name=&#34;rabbit&#34;,} 0.0
# HELP tomcat_sessions_rejected_sessions_total  
# TYPE tomcat_sessions_rejected_sessions_total counter
tomcat_sessions_rejected_sessions_total 0.0
# HELP spring_integration_channels The number of message channels
# TYPE spring_integration_channels gauge
spring_integration_channels 4.0
# HELP jvm_classes_unloaded_classes_total The total number of classes unloaded since the Java virtual machine has started execution
# TYPE jvm_classes_unloaded_classes_total counter
jvm_classes_unloaded_classes_total 0.0
# HELP process_cpu_usage The &#34;recent cpu usage&#34; for the Java Virtual Machine process
# TYPE process_cpu_usage gauge
process_cpu_usage 0.0012776292616022062
# HELP tomcat_cache_hit_total  
# TYPE tomcat_cache_hit_total counter
tomcat_cache_hit_total 0.0
# HELP jvm_classes_loaded_classes The number of classes that are currently loaded in the Java virtual machine
# TYPE jvm_classes_loaded_classes gauge
jvm_classes_loaded_classes 12793.0
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/actuator-metrics-prometheus.txt target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/actuator-metrics-prometheus.txt target=_blank>actuator-metrics-prometheus.txt</a></div></div><p>Para iniciar el ejemplo de Spring Cloud que consta de un servicio de registro y descubrimiento, un servicio de configuración, un servicio del que se pueden iniciar varias instancias y un cliente que hace peticiones hay que utilizar la siguiente serie de comandos.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash>$ ./gradlew discoveryserver:run --args<span class=o>=</span><span class=s2>&#34;--port=8761&#34;</span>
$ ./gradlew configserver:run --args<span class=o>=</span><span class=s2>&#34;--port=8090&#34;</span>
$ ./gradlew service:run --args<span class=o>=</span><span class=s2>&#34;--port=8080&#34;</span>
$ ./gradlew client:run</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/gradlew-run.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/gradlew-run.sh target=_blank>gradlew-run.sh</a></div></div><p>Una vez expuestas las métricas en el formato que espera Prometheus este ya puede recolectarlas. Para usar Prometheus y posteriormente Grafana de forma fácil evitando tener que instalar y configurar nada se puede usar <a href=https://www.docker.com/>Docker</a>, en este caso con <a href=https://docs.docker.com/compose/>Docker Compose</a>. En la <a href=https://picodotdev.github.io/blog-bitix/series/docker/>serie de artículos sobre Docker</a> explico que proporciona Docker y como usar las varias herramientas que ofrece.</p><p>El archivo de Docker Compose contiene dos contenedores uno para Prometheus y otro para Grafana, con sus archivos de configuración. En la configuración de Prometheus se crean un <em>job</em> que recolecta las métricas cada pocos segundos del servicio a través del <em>endpoint</em> de métricas. En la configuración de Grafana se añade como una fuente de datos Prometheus, se puede añadir otras varias.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Bash data-lang=Bash>$ docker-compose up
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/docker-compose.sh target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/docker-compose.sh target=_blank>docker-compose.sh</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-YAML data-lang=YAML><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-YAML data-lang=YAML>version<span class=p>:</span><span class=w> </span><span class=s1>&#39;3&#39;</span><span class=w>
</span><span class=w></span>services<span class=p>:</span><span class=w>
</span><span class=w>  </span>prometheus<span class=p>:</span><span class=w>
</span><span class=w>    </span>image<span class=p>:</span><span class=w> </span>prom/prometheus<span class=w>
</span><span class=w>    </span>ports<span class=p>:</span><span class=w>
</span><span class=w>    </span>-<span class=w> </span><span class=s2>&#34;9090:9090&#34;</span><span class=w>
</span><span class=w>    </span>volumes<span class=p>:</span><span class=w>
</span><span class=w>    </span>-<span class=w> </span>./prometheus.yml<span class=p>:</span>/etc/prometheus/prometheus.yml<span class=w>
</span><span class=w>    </span>network_mode<span class=p>:</span><span class=w> </span><span class=s2>&#34;host&#34;</span><span class=w>
</span><span class=w>  </span>grafana<span class=p>:</span><span class=w>
</span><span class=w>    </span>image<span class=p>:</span><span class=w> </span>grafana/grafana<span class=w>
</span><span class=w>    </span>ports<span class=p>:</span><span class=w>
</span><span class=w>    </span>-<span class=w> </span><span class=s2>&#34;3000:3000&#34;</span><span class=w>
</span><span class=w>    </span>volumes<span class=p>:</span><span class=w>
</span><span class=w>    </span>-<span class=w> </span>./grafana-datasources.yml<span class=p>:</span>/etc/grafana/provisioning/datasources/grafana-datasources.yml<span class=w>
</span><span class=w>    </span>network_mode<span class=p>:</span><span class=w> </span><span class=s2>&#34;host&#34;</span><span class=w>
</span><span class=w>    </span>depends_on<span class=p>:</span><span class=w>
</span><span class=w>    </span>-<span class=w> </span>prometheus<span class=w>
</span><span class=w></span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/docker-compose.yml target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/docker-compose.yml target=_blank>docker-compose.yml</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-YAML data-lang=YAML><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-YAML data-lang=YAML>scrape_configs<span class=p>:</span><span class=w>
</span><span class=w>  </span>-<span class=w> </span>job_name<span class=p>:</span><span class=w> </span><span class=s1>&#39;spring-actuator&#39;</span><span class=w>
</span><span class=w>    </span>metrics_path<span class=p>:</span><span class=w> </span><span class=s1>&#39;/actuator/prometheus&#39;</span><span class=w>
</span><span class=w>    </span>scrape_interval<span class=p>:</span><span class=w> </span>5s<span class=w>
</span><span class=w>    </span>static_configs<span class=p>:</span><span class=w>
</span><span class=w>    </span>-<span class=w> </span>targets<span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;service.127.0.0.1.xip.io:8080&#39;</span><span class=p>]</span><span class=w>
</span><span class=w>    </span>tls_config<span class=p>:</span><span class=w>
</span><span class=w>      </span>insecure_skip_verify<span class=p>:</span><span class=w> </span><span class=kc>true</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/prometheus.yml target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/prometheus.yml target=_blank>prometheus.yml</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-YAML data-lang=YAML><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-YAML data-lang=YAML>datasources<span class=p>:</span><span class=w>
</span><span class=w></span>-<span class=w> </span>name<span class=p>:</span><span class=w> </span>Prometheus<span class=w>
</span><span class=w>  </span>type<span class=p>:</span><span class=w> </span>prometheus<span class=w>
</span><span class=w>  </span>access<span class=p>:</span><span class=w> </span>direct<span class=w>
</span><span class=w>  </span>url<span class=p>:</span><span class=w> </span>http<span class=p>:</span>//prometheus.<span class=m>127.0</span>.<span class=m>0.1</span>.xip.io<span class=p>:</span><span class=m>9090</span><span class=w>
</span><span class=w>  </span>basic_auth<span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span><span class=w>  </span>with_credentials<span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span><span class=w>  </span>is_default<span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>  </span>version<span class=p>:</span><span class=w> </span><span class=m>1</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/grafana-datasources.yml target=_blank>view raw</a></span>
<a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/code/grafana-datasources.yml target=_blank>grafana-datasources.yml</a></div></div><p>Prometheus posee la funcionalidad básica de crear gŕaficas con las métricas recogidas pero no tiene la habilidad de crear paneles que recogen una colección de gráficas relacionadas o un editor de consultas más avanzado como tiene Grafana.</p><div class=media style=text-align:center><figure><a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/images/prometheus-graph_hudb4fb1b3b4c5fc9bfe9195d2743ad9f9_62771_2560x1440_fit_box_2.png title="Métrica de la aplicación en Prometheus" data-gallery><img src=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/images/prometheus-graph_hudb4fb1b3b4c5fc9bfe9195d2743ad9f9_62771_300x200_fit_box_2.png width=179></a>
<a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/images/grafana-graph_hu70e557534c16596229235e47193c737c_53439_2560x1440_fit_box_2.png title="Métrica de la aplicación en Grafana" data-gallery><img src=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/images/grafana-graph_hu70e557534c16596229235e47193c737c_53439_300x200_fit_box_2.png width=300></a><figcaption>Métrica de la aplicación en Prometheus y Grafana</figcaption></figure></div><p>Una vez que Prometheus recolecta los datos de las métricas al introducir las expresiones se proporciona asistencia de código. Por otro lado, en la sección <em>Status &gt; Targets</em> de
Prometheus se puede ver el estado de los servicios de los que recolecta métricas.</p><div class=media style=text-align:center><figure><a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/images/prometheus-targets_hufff0caf060b535c26e9dd0ca59058429_51904_2560x1440_fit_box_2.png title="Estado de servicios en Prometheus" data-gallery><img src=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/images/prometheus-targets_hufff0caf060b535c26e9dd0ca59058429_51904_300x200_fit_box_2.png width=283></a><figcaption>Estado de los servicios rastreados por Prometheus</figcaption></figure></div><p>Como Spring Boot Actuator exporta muchas métricas del funcionamiento del servicio Grafana puede crear gráficas de todas ellas. No hace falta crear un <em>dashboard</em> desde cero, se pueden descargar e importar <em>dashboards</em>. Este <a href=https://grafana.com/dashboards/4701>ejemplo para Micrometer</a> recoge la memoria de la JVM (<em>heap</em> y no <em>heap</em>), uso de CPU, carga, hilos, estado de hilos, descriptores de archivos, recolector de basura, <em>classloader</em> y entrada/salida básica.</p><div class=media style=text-align:center><figure><a href=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/images/grafana-spring-boot-micrometer-dashboard_hu1e421ff25cd5fbc7f190e3d824bd4790_201078_2560x1440_fit_box_2.png title="Estado de servicios en Prometheus" data-gallery><img src=/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/images/grafana-spring-boot-micrometer-dashboard_hu1e421ff25cd5fbc7f190e3d824bd4790_201078_600x450_fit_box_2.png width=600></a><figcaption>Dashboard de una aplicación Spring Boot en Grafana</figcaption></figure></div><p><a href=https://grafana.com/plugins>Grafana tiene <em>plugins</em></a> para añadir como fuentes de datos bases de datos relacionales para extraer mediante sentencias SQL y visualizar datos almacenados en <a href=https://www.mysql.com/>MySQL</a>, <a href=https://www.postgresql.org/>PostgreSQL</a> u <a href=https://www.oracle.com/>Oracle</a>.</p><p>Con la información de las métricas se conoce más en detalle cual es el comportamiento normal de una aplicación y observar de forma rápida cuando se introducen cambios como afectan al comportamiento de la misma tanto de forma negativa como de forma positiva. En cualquier aplicación que ofrece un servicio es importante conocer su estado y actuar incluso antes de que ofrezca un mal comportamiento e incluso deje de prestar su servicio. La monitorización no sustituye sino que complementa un sistema de trazas que en una aplicación Java es común que se realice con <a href=https://www.slf4j.org/>SLF4J</a> o <a href=https://logging.apache.org/log4j/2.x/>Log4j</a>.</p><p>Aún quedan algunas preguntas por responder ¿como agregar los datos de múltiples instancias? ¿si se crean nuevas instancias del servicio como puede conocer Prometheus los nuevos <em>targets</em> que se han creado? En el ejemplo solo hay una instancia del servicio y la configuración de Prometheus es proporcionada por un archivo estático. Aún desconozco las respuestas, no lo he investigado en detalle, hay alguna <a href=https://stackoverflow.com/questions/46910839/is-it-possible-to-setup-prometheus-with-eureka-sd-without-file-sd-configs>pregunta sobre este tema en StackOverflow</a> y por la respuesta Prometheus no tiene un adaptador para Eureka entre los <a href=https://prometheus.io/docs/prometheus/latest/configuration/configuration/>varios servicios de descubrimiento que sí soporta en su configuración</a>.</p><p>El <a href=https://github.com/picodotdev/blog-ejemplos/tree/master/SpringCloud>código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en <a href=https://github.com/>GitHub</a> y probarlo en tu equipo ejecutando el comando <code>./gradlew-run.sh, docker-compose up</code>.</p><div class=reference>Referencia:<br><ul><li><a href=https://njalnordmark.wordpress.com/2017/05/08/using-prometheus-with-spring-boot/>Using Prometheus with Spring Boot</a></li><li><a href=https://raymondhlee.wordpress.com/2016/09/24/monitoring-spring-boot-applications-with-prometheus/>Monitoring Spring Boot Applications with Prometheus – Part 1</a></li><li><a href=https://raymondhlee.wordpress.com/2016/10/03/monitoring-spring-boot-applications-with-prometheus-part-2/>Monitoring Spring Boot Applications with Prometheus – Part 2</a></li><li><a href=https://blog.sebastian-daschner.com/entries/prometheus-java-ee>Prometheus with Java EE</a></li><li><a href=https://github.com/prometheus/prometheus/pull/3369>Add Eureka Service Discovery</a></li></ul></div></div></article></div></div><div class="row serie"><div class=col-md-12><h3>Este artículo forma parte de la serie <strong>spring-cloud</strong>:</h3><ol class=serie-articles><li><a href=https://picodotdev.github.io/blog-bitix/2015/03/datos-de-sesion-externalizados-con-spring-session/>Datos de sesión externalizados con Spring Session</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2015/10/aplicacion-java-autocontenida-con-spring-boot/>Aplicación Java autocontenida con Spring Boot</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2015/11/configuracion-de-una-aplicacion-en-diferentes-entornos-con-spring-cloud-config/>Configuración de una aplicación en diferentes entornos con Spring Cloud Config</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2015/12/informacion-y-metricas-de-la-aplicacion-con-spring-boot-actuator/>Información y métricas de la aplicación con Spring Boot Actuator</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2017/01/registro-y-descubrimiento-de-servicios-con-spring-cloud-y-consul/>Registro y descubrimiento de servicios con Spring Cloud y Consul</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/08/aplicaciones-basadas-en-microservicios/>Aplicaciones basadas en microservicios</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/09/registro-y-descubrimiento-de-servicios-con-spring-cloud-netflix/>Registro y descubrimiento de servicios con Spring Cloud Netflix</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/09/servicio-de-configuracion-para-microservicios-con-spring-cloud-config/>Servicio de configuración para microservicios con Spring Cloud Config</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/09/recargar-sin-reiniciar-la-configuracion-de-una-aplicacion-spring-boot-con-spring-cloud-config/>Recargar sin reiniciar la configuración de una aplicación Spring Boot con Spring Cloud Config</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/09/almacenar-cifrados-los-valores-de-configuracion-sensibles-en-spring-cloud-config/>Almacenar cifrados los valores de configuración sensibles en Spring Cloud Config</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/10/tolerancia-a-fallos-en-un-cliente-de-microservicio-con-spring-cloud-netflix-y-hystrix/>Tolerancia a fallos en un cliente de microservicio con Spring Cloud Netflix y Hystrix</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/10/balanceo-de-carga-y-resilencia-en-un-microservicio-con-spring-cloud-netflix-y-ribbon/>Balanceo de carga y resilencia en un microservicio con Spring Cloud Netflix y Ribbon</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/10/proxy-para-microservicios-con-spring-cloud-netflix-y-zuul/>Proxy para microservicios con Spring Cloud Netflix y Zuul</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/>Monitorizar una aplicación Java de Spring Boot con Micrometer, Prometheus y Grafana</a></li><li><a href=https://picodotdev.github.io/blog-bitix/2018/12/exponer-las-metricas-de-hystrix-en-grafana-con-prometheus-de-una-aplicaci%C3%B3n-spring-boot/>Exponer las métricas de Hystrix en Grafana con Prometheus de una aplicación Spring Boot</a></li></ol></div></div><div class=row><div class=col-md-12><div class=sharethis-inline-share-buttons></div></div></div><div class=row><div class=col-12><ins class=adsbygoogle style=display:inline-block;width:728px;height:90px data-ad-client=ca-pub-3533636310991304 data-ad-slot=5966819782 data-type=leaderboard></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><a id=comments></a><div class=row><div class=col-md-12><div id=disqus_thread></div></div></div><script type=text/javascript async>var disqus_shortname='blog-bitix';var disqus_identifier='https:\/\/picodotdev.github.io\/blog-bitix\/2018\/12\/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana\/';var disqus_url='https:\/\/picodotdev.github.io\/blog-bitix\/2018\/12\/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana\/';var disqus_script='embed.js';(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.disqus.com/'+disqus_script;(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);}());</script></div><div class="col-12 col-lg-4"><div class=row><div class="col-md-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:300px;height:600px data-ad-client=ca-pub-3533636310991304 data-ad-slot=9559414587 data-type=large-skycraper></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class=row><div class="col-md-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:336px;height:280px data-ad-client=ca-pub-3533636310991304 data-ad-slot=2873752587 data-type=large-rectangle></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class="row text-center banner"><div class=col-12><a href=https://picodotdev.github.io/blog-bitix/2015/12/yo-apoyo-al-software-libre-tu-tambien/><img src=assets/images/i-support-fs_red-bg-es.png alt="Yo apoyo al software libre"></a></div></div><div class=row><div class=col-md-12><hr></div></div><div class=row><div class=col-md-12><ul class="list-unstyled recents"><li><span class="glyphicon glyphicon-hand-right"></span><a href=archive/>Más artículos recientes en el archivo</a></li></ul></div></div></div></div><div class=row><div class=col-12><hr></div></div><footer><div class=row><div class="col-12 col-sm-4"><p><strong>Blog Bitix</strong></p><p>Blog dedicado a la distribución GNU/Linux que uso habitualmente, Arch Linux, a mis andanzas alrededor del software libre, la programación y a otros temas relacionados con la tecnología y la informática.</p><p>Publicando de uno a tres artículos únicos a la semana desde el año 2010.</p></div><div class="col-12 col-sm-4 text-center menu"><ul class=list-unstyled><li><a href=/blog-bitix/tags/java/>Java</a></li><li><a href=/blog-bitix/tags/gnu-linux/>GNU/Linux</a></li><li><a href=/blog-bitix/tags/javascript/>JavaScript</a></li><li><a href=/blog-bitix/tags/tapestry/>Tapestry</a></li><li><a href=/blog-bitix/archive/>Archivo y hemeroteca</a></li><li><a href=/blog-bitix/pages/links/>Enlaces</a></li><li><a href=/blog-bitix/pages/advertising/>Publicidad</a></li><li><a href=/blog-bitix/pages/donate/>Donaciones</a></li><li><a href=/blog-bitix/pages/about/>Acerca de...</a></li></ul></div><div class="col-12 col-sm-4 text-center links"><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class=row><div class=col-12>Copyleft <span class=copyleft>&copy;</span> 2019 - <a href=https://creativecommons.org/licenses/by-sa/4.0/ rel=nofollow rel=license><img alt="Licencia de Creative Commons" title="Licencia de Creative Commons" style=border-width:0 src=https://licensebuttons.net/l/by-sa/4.0/80x15.png class=licencia></a><br><a href=https://twitter.com/blogstackinfo rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/blog-stack.png alt="Blog Stack" title="Blog Stack"></a>
<a href=https://www.planetacodigo.com/ rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/planeta-codigo.png alt="Planeta código" title="Planeta código"></a><br><span xmlns:dct=http://purl.org/dc/terms/ property=dct:title><a href=https://picodotdev.github.io/blog-bitix/ rel=nofollow>Blog Bitix</a></span> by <a xmlns:cc=https://creativecommons.org/ns# href=https://picodotdev.github.io/blog-bitix/ property=cc:attributionName rel=cc:attributionurl>pico.dev</a> is licensed under a <a rel=license href=https://creativecommons.org/licenses/by-sa/4.0/>Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional License</a>.<br><span class=credit>Powered by <a href=https://gohugo.io/ rel=nofollow title="A fast and modern static website engine">Hugo</a> and <a href=https://pages.github.com/ title="Websites for you and your projects">GitHub Pages</a>.</span>
<span class=credit>Background patterns from <a href=https://www.toptal.com/designers/subtlepatterns/ rel=nofollow>Subtle Patterns</a>.</span></div></div></footer></div><div class=blueimp-gallery-container><div id=blueimp-gallery class="blueimp-gallery blueimp-gallery-controls" data-use-bootstrap-modal=false><div class=slides></div><h3 class=title></h3><a class=prev>‹</a>
<a class=next>›</a>
<a class=close>×</a>
<a class=play-pause></a><ol class=indicator></ol><div class="modal fade"><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close aria-hidden=true>&times;</button><h4 class=modal-title></h4></div><div class="modal-body next"></div><div class=modal-footer><button type=button class="btn btn-default pull-left prev">
<i class="glyphicon glyphicon-chevron-left"></i>Anterior</button>
<button type=button class="btn btn-primary next">
Siguiente
<i class="glyphicon glyphicon-chevron-right"></i></button></div></div></div></div></div></div><script type=text/javascript>window.cookieconsent_options={"message":"Esta bitácora te informa de la obviedad de que utiliza «cookies», propias y de servicios como Google Analytics y Google AdSense entre otros.","dismiss":"Aceptar","learnMore":"Más información","link":null,"theme":"dark-bottom"};</script><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js async></script></body></html>
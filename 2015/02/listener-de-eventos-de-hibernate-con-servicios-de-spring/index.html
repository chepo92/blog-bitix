<!doctype html><html lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=picodotdev><meta name=keywords content="java,programacion,software,hardware,tapestry,software libre,gnu,linux,gnu/linux,unix,arch,arch linux,html,css,javascript"><meta name=description content="En el anterior artículo explicaba como crear un listener que reciba eventos de Hibernate pero quizá necesitemos en el listener hacer uso de un servicio de Spring si el proceso de la acción necesita aprovecharse de la funcionalidad proporcionada en los servicios. En este artículo mostraré como crear un listener de Hibernate que use un servicio de Spring, es decir, un listener de Hibernate con la posibilidad de inyectar servicios de Spring. &hellip;"><base href=https://picodotdev.github.io/blog-bitix/><title>Listener de eventos de Hibernate con servicios de Spring</title><link rel=author type=text/plain href=humans.txt><link rel="shortcut icon" href=assets/favicon.ico><link rel=apple-touch-icon-precomposed sizes=144x144 href=assets/apple-touch-icon-144-precomposed.png><link rel=canonical href=https://picodotdev.github.io/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/><link href=index.xml rel=alternate type=application/rss+xml title="Blog Bitix"><link rel=stylesheet type=text/css href="//fonts.googleapis.com/css?family=PT+Serif:400,700italic,700,400italic"><link rel=stylesheet type=text/css href=assets/libs/bootstrap-4.0.0/css/bootstrap.min.css><link rel=stylesheet type=text/css href=assets/libs/Gallery-2.30.0/css/blueimp-gallery.min.css><link rel=stylesheet type=text/css href=assets/css/syntax.css><link rel=stylesheet type=text/css href=assets/css/main.css><script src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js async></script><script type=text/javascript>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:'ca-pub-3533636310991304',enable_page_level_ads:true});</script><script type=text/javascript async>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-12874075-4','picodotdev.github.io');ga('send','pageview');</script><script type=text/javascript src=assets/libs/require.js></script><script type=text/javascript src=assets/js/main.js></script><script type=text/javascript src=assets/js/theme.js async></script><script type=text/javascript src="//platform-api.sharethis.com/js/sharethis.js#property=5920c4ce1bd0670011e06acd&product=inline-share-buttons" async></script><script type=text/javascript src=assets/js/app.js async></script></head><body><div class=container><div class=row><div class=col><header><div class=row><div class="col-12 col-lg-4"></div><div class="col-12 col-lg-4"><h2 class=title><a href=https://picodotdev.github.io/blog-bitix/>Blog Bitix</a></h2><div class=links><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class="col-12 col-lg-4 text-center"><form name=query class="form-inline search" onsubmit="return false;"><div class=input-group><input type=text name=q class=form-control placeholder="Buscar en Blog Bitix">
<span class=input-group-btn><button class="btn btn-secondary" type=submit>Buscar</button></span></div></form><form name=search action=https://duckduckgo.com/ method=get class=hidden data-site=https://picodotdev.github.io/blog-bitix/><input type=hidden name=q></form></div></div><div class=row><div class=col-12><nav class="nav nav-pills nav-fill"><a href=/blog-bitix/tags/java/ class="nav-item nav-link">Java</a>
<a href=/blog-bitix/tags/gnu-linux/ class="nav-item nav-link">GNU/Linux</a>
<a href=/blog-bitix/tags/javascript/ class="nav-item nav-link">JavaScript</a>
<a href=/blog-bitix/tags/tapestry/ class="nav-item nav-link">Tapestry</a>
<a href=/blog-bitix/archive/ class="nav-item nav-link">Archivo y hemeroteca</a>
<a href=/blog-bitix/pages/links/ class="nav-item nav-link">Enlaces</a>
<a href=/blog-bitix/pages/about/ class="nav-item nav-link">Acerca de...</a></nav></div></div></header></div></div><div class=row><div class="col-12 col-lg-8"><div class=row><div class=col-12><article itemscope itemtype=http://schema.org/BlogPosting><meta itemprop=inLanguage content=es><meta itemprop=keywords content="blog-stack, java, planeta-codigo, programacion"><h1 itemprop=name>Listener de eventos de Hibernate con servicios de Spring</h1><p class=information>Escrito por <span itemscope itemtype=http://schema.org/Person><span itemprop=name>picodotdev</span></span> el <time itemprop=datePublished datetime=2015-02-28>28/02/2015</time>.<br><a href=tags/blog-stack/>blog-stack</a> <a href=tags/java/>java</a> <a href=tags/planeta-codigo/>planeta-codigo</a> <a href=tags/programacion/>programacion</a><br><a href=/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/ itemprop=url>Enlace permanente</a>
<a href=/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/#comments>Comentarios</a></p><ins class=adsbygoogle style=display:inline-block;width:728px;height:90px data-ad-client=ca-pub-3533636310991304 data-ad-slot=5966819782 data-type=leaderboard></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><div class=content itemprop=articleBody><meta itemprop=wordCount content=1062><div class=logotypes style=float:right><img src=assets/images/logotipos/java.svg class=right width=200 alt=Java title=Java></div><p>En el anterior artículo explicaba como <a href=https://picodotdev.github.io/blog-bitix/2015/02/ejemplo-de-listener-de-eventos-de-hibernate/>crear un <em>listener</em> que reciba eventos de Hibernate</a> pero quizá necesitemos en el <em>listener</em> hacer uso de un servicio de <a href=https://spring.io/>Spring</a> si el proceso de la acción necesita aprovecharse de la funcionalidad proporcionada en los servicios. En este artículo mostraré como crear un <em>listener</em> de <a href=https://hibernate.org/>Hibernate</a> que use un servicio de Spring, es decir, un <em>listener</em> de Hibernate con la posibilidad de inyectar servicios de Spring.</p><p>Para hacer la integración de los <em>listeners</em> con Spring debemos sustituir el <em>Interceptor</em> por un servicio que haga lo mismo pero al inicio del contenedor de Spring con la anotación <em>@PostConstruct</em>. Para ello creamos una clase con el siguiente contenido:</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>es.com.blogspot.elblogdepicodev.plugintapestry.services.hibernate</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>javax.annotation.PostConstruct</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>org.hibernate.SessionFactory</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.service.spi.EventListenerRegistry</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.EventType</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.internal.SessionFactoryImpl</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.beans.factory.annotation.Autowired</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.stereotype.Component</span><span class=o>;</span>

<span class=nd>@Component</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>HibernateConfigurer</span> <span class=o>{</span>

    <span class=nd>@Autowired</span>
    <span class=kd>private</span> <span class=n>SessionFactory</span> <span class=n>sessionFactory</span><span class=o>;</span>

    <span class=nd>@Autowired</span>
    <span class=kd>private</span> <span class=n>ProductoEventAdapter</span> <span class=n>productoEventAdapter</span><span class=o>;</span>
    
    <span class=nd>@PostConstruct</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>registerListeners</span><span class=o>()</span> <span class=o>{</span>
        <span class=n>SessionFactoryImpl</span> <span class=n>sfi</span> <span class=o>=</span> <span class=o>(</span><span class=n>SessionFactoryImpl</span><span class=o>)</span> <span class=n>sessionFactory</span><span class=o>;</span>
        <span class=n>EventListenerRegistry</span> <span class=n>elr</span> <span class=o>=</span> <span class=n>sfi</span><span class=o>.</span><span class=na>getServiceRegistry</span><span class=o>().</span><span class=na>getService</span><span class=o>(</span><span class=n>EventListenerRegistry</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>

        <span class=n>elr</span><span class=o>.</span><span class=na>setListeners</span><span class=o>(</span><span class=n>EventType</span><span class=o>.</span><span class=na>PRE_INSERT</span><span class=o>,</span> <span class=n>productoEventAdapter</span><span class=o>);</span>
        <span class=n>elr</span><span class=o>.</span><span class=na>setListeners</span><span class=o>(</span><span class=n>EventType</span><span class=o>.</span><span class=na>PRE_UPDATE</span><span class=o>,</span> <span class=n>productoEventAdapter</span><span class=o>);</span>
        <span class=n>elr</span><span class=o>.</span><span class=na>setListeners</span><span class=o>(</span><span class=n>EventType</span><span class=o>.</span><span class=na>PRE_DELETE</span><span class=o>,</span> <span class=n>productoEventAdapter</span><span class=o>);</span>
        <span class=n>elr</span><span class=o>.</span><span class=na>setListeners</span><span class=o>(</span><span class=n>EventType</span><span class=o>.</span><span class=na>POST_INSERT</span><span class=o>,</span> <span class=n>productoEventAdapter</span><span class=o>);</span>
        <span class=n>elr</span><span class=o>.</span><span class=na>setListeners</span><span class=o>(</span><span class=n>EventType</span><span class=o>.</span><span class=na>POST_UPDATE</span><span class=o>,</span> <span class=n>productoEventAdapter</span><span class=o>);</span>
        <span class=n>elr</span><span class=o>.</span><span class=na>setListeners</span><span class=o>(</span><span class=n>EventType</span><span class=o>.</span><span class=na>POST_DELETE</span><span class=o>,</span> <span class=n>productoEventAdapter</span><span class=o>);</span>
    <span class=o>}</span>
<span class=o>}</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/code/HibernateConfigurer.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/code/HibernateConfigurer.java target=_blank>HibernateConfigurer.java</a></div></div><p>Configurando Spring con anotaciones y código Java, como es recomendable en vez de xml, la configuración del ejemplo es la siguiente y un archivo xml casi testimonial de Spring. En esta configuraicón vemos el servicio <em>ProductoEventAdapter</em> que usaremos para recibir los eventos y el servicio <em>DummyService</em> que se inyectará en el anterior:</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>es.com.blogspot.elblogdepicodev.plugintapestry.services.spring</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>java.util.HashMap</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.util.Map</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.util.Properties</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>javax.sql.DataSource</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>org.apache.commons.dbcp.BasicDataSource</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.SessionFactory</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.context.annotation.Bean</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.context.annotation.ComponentScan</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.context.annotation.Configuration</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.orm.hibernate4.HibernateTransactionManager</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.orm.hibernate4.LocalSessionFactoryBean</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.transaction.annotation.EnableTransactionManagement</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.transaction.support.ResourceTransactionManager</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>es.com.blogspot.elblogdepicodev.plugintapestry.services.dao.ProductoDAO</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>es.com.blogspot.elblogdepicodev.plugintapestry.services.dao.ProductoDAOImpl</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>es.com.blogspot.elblogdepicodev.plugintapestry.services.hibernate.ProductoEventAdapter</span><span class=o>;</span>

<span class=nd>@Configuration</span>
<span class=nd>@ComponentScan</span><span class=o>({</span> <span class=s>&#34;es.com.blogspot.elblogdepicodev.plugintapestry&#34;</span> <span class=o>})</span>
<span class=nd>@EnableTransactionManagement</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>AppConfiguration</span> <span class=o>{</span>

    <span class=nd>@Bean</span><span class=o>(</span><span class=n>destroyMethod</span> <span class=o>=</span> <span class=s>&#34;close&#34;</span><span class=o>)</span>
    <span class=kd>public</span> <span class=n>DataSource</span> <span class=nf>dataSource</span><span class=o>()</span> <span class=o>{</span>
        <span class=n>BasicDataSource</span> <span class=n>ds</span> <span class=o>=</span> <span class=k>new</span> <span class=n>BasicDataSource</span><span class=o>();</span>
        <span class=n>ds</span><span class=o>.</span><span class=na>setDriverClassName</span><span class=o>(</span><span class=s>&#34;org.h2.Driver&#34;</span><span class=o>);</span>
        <span class=n>ds</span><span class=o>.</span><span class=na>setUrl</span><span class=o>(</span><span class=s>&#34;jdbc:h2:mem:test&#34;</span><span class=o>);</span>
        <span class=n>ds</span><span class=o>.</span><span class=na>setUsername</span><span class=o>(</span><span class=s>&#34;sa&#34;</span><span class=o>);</span>
        <span class=n>ds</span><span class=o>.</span><span class=na>setPassword</span><span class=o>(</span><span class=s>&#34;sa&#34;</span><span class=o>);</span>
        <span class=k>return</span> <span class=n>ds</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=nd>@Bean</span>
    <span class=kd>public</span> <span class=n>LocalSessionFactoryBean</span> <span class=nf>sessionFactory</span><span class=o>(</span><span class=n>DataSource</span> <span class=n>dataSource</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>LocalSessionFactoryBean</span> <span class=n>sf</span> <span class=o>=</span> <span class=k>new</span> <span class=n>LocalSessionFactoryBean</span><span class=o>();</span>
        <span class=n>sf</span><span class=o>.</span><span class=na>setDataSource</span><span class=o>(</span><span class=n>dataSource</span><span class=o>);</span>
        <span class=n>sf</span><span class=o>.</span><span class=na>setPackagesToScan</span><span class=o>(</span><span class=s>&#34;es.com.blogspot.elblogdepicodev.plugintapestry.entities&#34;</span><span class=o>);</span>
        <span class=n>sf</span><span class=o>.</span><span class=na>setHibernateProperties</span><span class=o>(</span><span class=n>getHibernateProperties</span><span class=o>());</span>
        <span class=k>return</span> <span class=n>sf</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=nd>@Bean</span>
    <span class=kd>public</span> <span class=n>ResourceTransactionManager</span> <span class=nf>transactionManager</span><span class=o>(</span><span class=n>SessionFactory</span> <span class=n>sessionFactory</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>HibernateTransactionManager</span> <span class=n>tm</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HibernateTransactionManager</span><span class=o>();</span>
        <span class=n>tm</span><span class=o>.</span><span class=na>setSessionFactory</span><span class=o>(</span><span class=n>sessionFactory</span><span class=o>);</span>
        <span class=k>return</span> <span class=n>tm</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=nd>@Bean</span>
    <span class=kd>public</span> <span class=n>ProductoEventAdapter</span> <span class=nf>productoEventAdapter</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=k>new</span> <span class=n>ProductoEventAdapter</span><span class=o>();</span>
    <span class=o>}</span>

    <span class=nd>@Bean</span>
    <span class=kd>public</span> <span class=n>ProductoDAO</span> <span class=nf>productoDAO</span><span class=o>(</span><span class=n>SessionFactory</span> <span class=n>sessionFactory</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=k>new</span> <span class=n>ProductoDAOImpl</span><span class=o>(</span><span class=n>sessionFactory</span><span class=o>);</span>
    <span class=o>}</span>

    <span class=nd>@Bean</span>
    <span class=kd>public</span> <span class=n>DummyService</span> <span class=nf>dummyService</span><span class=o>()</span> <span class=o>{</span>
        <span class=k>return</span> <span class=k>new</span> <span class=n>DummyService</span><span class=o>();</span>
    <span class=o>}</span>

    <span class=kd>private</span> <span class=n>Properties</span> <span class=nf>getHibernateProperties</span><span class=o>()</span> <span class=o>{</span>
        <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Object</span><span class=o>&gt;</span> <span class=n>m</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
        <span class=n>m</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;hibernate.dialect&#34;</span><span class=o>,</span> <span class=s>&#34;org.hibernate.dialect.HSQLDialect&#34;</span><span class=o>);</span>
        <span class=c1>//m.put(&#34;hibernate.dialect&#34;, &#34;org.hibernate.dialect.MySQLDialect&#34;);
</span><span class=c1></span>     <span class=n>m</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;hibernate.hbm2ddl.auto&#34;</span><span class=o>,</span> <span class=s>&#34;create&#34;</span><span class=o>);</span>
        <span class=c1>// Debug
</span><span class=c1></span>     <span class=n>m</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;hibernate.generate_statistics&#34;</span><span class=o>,</span> <span class=kc>true</span><span class=o>);</span>
        <span class=n>m</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;hibernate.show_sql&#34;</span><span class=o>,</span> <span class=kc>true</span><span class=o>);</span>

        <span class=n>Properties</span> <span class=n>properties</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Properties</span><span class=o>();</span>
        <span class=n>properties</span><span class=o>.</span><span class=na>putAll</span><span class=o>(</span><span class=n>m</span><span class=o>);</span>
        <span class=k>return</span> <span class=n>properties</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/code/AppConfiguration.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/code/AppConfiguration.java target=_blank>AppConfiguration.java</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-XML data-lang=XML><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-XML data-lang=XML><span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span class=nt>&lt;beans</span> <span class=na>xmlns=</span><span class=s>&#34;http://www.springframework.org/schema/beans&#34;</span> <span class=na>xmlns:xsi=</span><span class=s>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> <span class=na>xmlns:context=</span><span class=s>&#34;http://www.springframework.org/schema/context&#34;</span> <span class=na>xmlns:tx=</span><span class=s>&#34;http://www.springframework.org/schema/tx&#34;</span>
    <span class=na>xmlns:aop=</span><span class=s>&#34;http://www.springframework.org/schema/aop&#34;</span>
    <span class=na>xsi:schemaLocation=</span><span class=s>&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
</span><span class=s>        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
</span><span class=s>        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
</span><span class=s>        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd&#34;</span><span class=nt>&gt;</span>
    <span class=nt>&lt;context:component-scan</span> <span class=na>base-package=</span><span class=s>&#34;es.com.blogspot.elblogdepicodev.plugintapestry&#34;</span> <span class=nt>/&gt;</span>
<span class=nt>&lt;/beans&gt;</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/code/applicationContext.xml target=_blank>view raw</a></span>
<a href=/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/code/applicationContext.xml target=_blank>applicationContext.xml</a></div></div><p>En el <em>listener</em> haremos uso de un servicio de Spring que podemos inyectar usando la anotación <em>@Autorwire</em> tal y como hacemos normalmente usando el contenedor de depednecias de Spring. La implementación con respecto a usar un <em>listener</em> con solo Hibernate varía ligeramente para adaptarse a los cambios de usar un servicio.</p><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>es.com.blogspot.elblogdepicodev.plugintapestry.services.hibernate</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PostDeleteEvent</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PostDeleteEventListener</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PostInsertEvent</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PostInsertEventListener</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PostUpdateEvent</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PostUpdateEventListener</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PreDeleteEvent</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PreDeleteEventListener</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PreInsertEvent</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PreInsertEventListener</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PreUpdateEvent</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PreUpdateEventListener</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.persister.entity.EntityPersister</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>HibernateEventAdapter</span> <span class=kd>implements</span> <span class=n>PreInsertEventListener</span><span class=o>,</span> <span class=n>PostInsertEventListener</span><span class=o>,</span> <span class=n>PreUpdateEventListener</span><span class=o>,</span> <span class=n>PostUpdateEventListener</span><span class=o>,</span> <span class=n>PreDeleteEventListener</span><span class=o>,</span>
        <span class=n>PostDeleteEventListener</span> <span class=o>{</span>

    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>long</span> <span class=n>serialVersionUID</span> <span class=o>=</span> <span class=n>1L</span><span class=o>;</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>requiresPostCommitHanding</span><span class=o>(</span><span class=n>EntityPersister</span> <span class=n>persister</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>onPostDelete</span><span class=o>(</span><span class=n>PostDeleteEvent</span> <span class=n>event</span><span class=o>)</span> <span class=o>{</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>onPreDelete</span><span class=o>(</span><span class=n>PreDeleteEvent</span> <span class=n>event</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>onPostUpdate</span><span class=o>(</span><span class=n>PostUpdateEvent</span> <span class=n>event</span><span class=o>)</span> <span class=o>{</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>onPreUpdate</span><span class=o>(</span><span class=n>PreUpdateEvent</span> <span class=n>event</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>onPostInsert</span><span class=o>(</span><span class=n>PostInsertEvent</span> <span class=n>event</span><span class=o>)</span> <span class=o>{</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>onPreInsert</span><span class=o>(</span><span class=n>PreInsertEvent</span> <span class=n>event</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/code/HibernateEventAdapter.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/code/HibernateEventAdapter.java target=_blank>HibernateEventAdapter.java</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>es.com.blogspot.elblogdepicodev.plugintapestry.services.hibernate</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PostDeleteEvent</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PostInsertEvent</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PostUpdateEvent</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PreDeleteEvent</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PreInsertEvent</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.hibernate.event.spi.PreUpdateEvent</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>org.springframework.beans.factory.annotation.Autowired</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>es.com.blogspot.elblogdepicodev.plugintapestry.services.spring.DummyService</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>ProductoEventAdapter</span> <span class=kd>extends</span> <span class=n>HibernateEventAdapter</span> <span class=o>{</span>

    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>long</span> <span class=n>serialVersionUID</span> <span class=o>=</span> <span class=n>1L</span><span class=o>;</span>

    <span class=nd>@Autowired</span>
    <span class=kd>private</span> <span class=n>DummyService</span> <span class=n>dummy</span><span class=o>;</span>
    
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setDummy</span><span class=o>(</span><span class=n>DummyService</span> <span class=n>dummy</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>this</span><span class=o>.</span><span class=na>dummy</span> <span class=o>=</span> <span class=n>dummy</span><span class=o>;</span>      
    <span class=o>}</span>
    
    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>onPostDelete</span><span class=o>(</span><span class=n>PostDeleteEvent</span> <span class=n>event</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>dummy</span><span class=o>.</span><span class=na>process</span><span class=o>(</span><span class=s>&#34;postDelete&#34;</span><span class=o>,</span> <span class=n>event</span><span class=o>.</span><span class=na>getEntity</span><span class=o>());</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>onPreDelete</span><span class=o>(</span><span class=n>PreDeleteEvent</span> <span class=n>event</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>dummy</span><span class=o>.</span><span class=na>process</span><span class=o>(</span><span class=s>&#34;preDelete&#34;</span><span class=o>,</span> <span class=n>event</span><span class=o>.</span><span class=na>getEntity</span><span class=o>());</span>
        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>onPostUpdate</span><span class=o>(</span><span class=n>PostUpdateEvent</span> <span class=n>event</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>dummy</span><span class=o>.</span><span class=na>process</span><span class=o>(</span><span class=s>&#34;postUpdate&#34;</span><span class=o>,</span> <span class=n>event</span><span class=o>.</span><span class=na>getEntity</span><span class=o>());</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>onPreUpdate</span><span class=o>(</span><span class=n>PreUpdateEvent</span> <span class=n>event</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>dummy</span><span class=o>.</span><span class=na>process</span><span class=o>(</span><span class=s>&#34;preUpdate&#34;</span><span class=o>,</span> <span class=n>event</span><span class=o>.</span><span class=na>getEntity</span><span class=o>());</span>
        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>onPostInsert</span><span class=o>(</span><span class=n>PostInsertEvent</span> <span class=n>event</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>dummy</span><span class=o>.</span><span class=na>process</span><span class=o>(</span><span class=s>&#34;postInsert&#34;</span><span class=o>,</span> <span class=n>event</span><span class=o>.</span><span class=na>getEntity</span><span class=o>());</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>onPreInsert</span><span class=o>(</span><span class=n>PreInsertEvent</span> <span class=n>event</span><span class=o>)</span> <span class=o>{</span>
        <span class=n>dummy</span><span class=o>.</span><span class=na>process</span><span class=o>(</span><span class=s>&#34;preInsert&#34;</span><span class=o>,</span> <span class=n>event</span><span class=o>.</span><span class=na>getEntity</span><span class=o>());</span>
        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/code/ProductoEventAdapter.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/code/ProductoEventAdapter.java target=_blank>ProductoEventAdapter.java</a></div></div><div class=code><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-Java data-lang=Java><span class=kn>package</span> <span class=nn>es.com.blogspot.elblogdepicodev.plugintapestry.services.spring</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>es.com.blogspot.elblogdepicodev.plugintapestry.entities.Producto</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>DummyService</span> <span class=o>{</span>

    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>process</span><span class=o>(</span><span class=n>String</span> <span class=n>action</span><span class=o>,</span> <span class=n>Object</span> <span class=n>entity</span><span class=o>)</span> <span class=o>{</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>entity</span> <span class=k>instanceof</span> <span class=n>Producto</span><span class=o>)</span> <span class=o>{</span>
            <span class=n>Producto</span> <span class=n>p</span> <span class=o>=</span> <span class=o>(</span><span class=n>Producto</span><span class=o>)</span> <span class=n>entity</span><span class=o>;</span>
            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>String</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=s>&#34;Action: %s, Id: %d&#34;</span><span class=o>,</span> <span class=n>action</span><span class=o>,</span> <span class=n>p</span><span class=o>.</span><span class=na>getId</span><span class=o>()));</span>
        <span class=o>}</span>
    <span class=o>}</span>
<span class=o>}</span></code></pre></td></tr></table></div></div><div class=highlight-meta><span class=raw><a href=/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/code/DummyService.java target=_blank>view raw</a></span>
<a href=/blog-bitix/2015/02/listener-de-eventos-de-hibernate-con-servicios-de-spring/code/DummyService.java target=_blank>DummyService.java</a></div></div><p>En este ejemplo el resultado que veríamos en la consola sería el siguiente con las trazas <em>Action: preInsert, Id: null</em> y <em>Action: postInsert, Id: 1</em> antes y después de ejecutarse la sentencia SQL:</p><div class=media style=text-align:center><figure><a href=assets/images/posts/2015/69/consola.png title="Trazas de ejecución del listener con servicios de Spring" data-gallery><img src=assets/images/posts/2015/69/consola-thumb.png></a></figure></div><p>Usando los <em>listeners</em> de Hibernate con Spring no necesitamos el archivo que creábamos antes en <em>/META-INF/services/org.hibernate.integrator.spi.Integrator</em>. Esto es un ejemplo de prueba de concepto pero perfectamente podría ser aplicado a una necesidad real. En el ejemplo <a href=https://github.com/picodotdev/elblogdepicodev/tree/master/PlugInTapestry>PlugIn Tapestry</a> que hice para un <a href=https://picodotdev.github.io/blog-bitix/2014/02/libro-sobre-desarrollo-de-aplicaciones-con-apache-tapestry/>libro sobre el <em>framework</em> de desarrollo web Apache Tapestry</a> puede verse el código completo y funcional de esta implementación.</p><div class=reference>Referencia:<br><ul><li><a href=http://guylabs.ch/2014/02/22/autowiring-pring-beans-in-hibernate-jpa-entity-listeners/>Autowiring Spring beans in Hibernate/JPA entity listeners</a></li><li><a href=http://invariantproperties.com/2013/09/29/spring-injected-beans-in-jpa-entitylisteners/>Spring-injected Beans in JPA EntityListeners</a></li></ul></div></div></article></div></div><div class="row related"><div class=col-md-12><h3>Artículos relacionados:</h3><ul><li><a href=/blog-bitix/2015/02/ejemplo-de-listener-de-eventos-de-hibernate/>Ejemplo de listener de eventos de Hibernate</a></li><li><a href=/blog-bitix/2015/02/la-palabra-clave-assert-de-java-y-un-ejemplo/>La palabra clave assert de Java y un ejemplo</a></li><li><a href=/blog-bitix/2015/01/convertir-fechas-y-husos-horarios-en-java/>Convertir fechas y husos horarios en Java</a></li><li><a href=/blog-bitix/2015/01/como-hacer-un-substring-de-una-cadena-html/>Cómo hacer un substring de una cadena HTML</a></li><li><a href=/blog-bitix/2014/12/ejercicios-katas-para-mejorar-habilidades-de-programacion-practicando/>Ejercicios (katas) para mejorar habilidades de programación practicando</a></li></ul></div></div><div class=row><div class=col-md-12><div class=sharethis-inline-share-buttons></div></div></div><div class=row><div class=col-12><ins class=adsbygoogle style=display:inline-block;width:728px;height:90px data-ad-client=ca-pub-3533636310991304 data-ad-slot=5966819782 data-type=leaderboard></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><a id=comments></a><div class=row><div class=col-md-12><div id=disqus_thread></div></div></div><script type=text/javascript async>var disqus_shortname='blog-bitix';var disqus_identifier='https:\/\/picodotdev.github.io\/blog-bitix\/2015\/02\/listener-de-eventos-de-hibernate-con-servicios-de-spring\/';var disqus_url='https:\/\/picodotdev.github.io\/blog-bitix\/2015\/02\/listener-de-eventos-de-hibernate-con-servicios-de-spring\/';var disqus_script='embed.js';(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.disqus.com/'+disqus_script;(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);}());</script></div><div class="col-12 col-lg-4"><div class=row><div class="col-md-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:300px;height:600px data-ad-client=ca-pub-3533636310991304 data-ad-slot=9559414587 data-type=large-skycraper></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class=row><div class="col-md-12 text-center"><ins class=adsbygoogle style=display:inline-block;width:336px;height:280px data-ad-client=ca-pub-3533636310991304 data-ad-slot=2873752587 data-type=large-rectangle></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div class="row text-center banner"><div class=col-12><a href=https://picodotdev.github.io/blog-bitix/2015/12/yo-apoyo-al-software-libre-tu-tambien/><img src=//static.fsf.org/nosvn/images/badges/badges_es/i-support-fs_red-bg-es.png alt="Yo apoyo al software libre"></a></div></div><div class=row><div class=col-md-12><hr></div></div><div class=row><div class=col-md-12><ul class="list-unstyled recents"><li><span class="glyphicon glyphicon-hand-right"></span><a href=archive/>Más artículos recientes en el archivo</a></li></ul></div></div></div></div><div class=row><div class=col-12><hr></div></div><footer><div class=row><div class="col-12 col-sm-4"><p><strong>Blog Bitix</strong></p><p>Blog dedicado a la distribución GNU/Linux que uso habitualmente, Arch Linux, a mis andanzas alrededor del software libre, la programación y a otros temas relacionados con la tecnología y la informática.</p><p>Publicando de uno a tres artículos únicos a la semana desde el año 2010.</p></div><div class="col-12 col-sm-4 text-center menu"><ul class=list-unstyled><li><a href=/blog-bitix/tags/java/>Java</a></li><li><a href=/blog-bitix/tags/gnu-linux/>GNU/Linux</a></li><li><a href=/blog-bitix/tags/javascript/>JavaScript</a></li><li><a href=/blog-bitix/tags/tapestry/>Tapestry</a></li><li><a href=/blog-bitix/archive/>Archivo y hemeroteca</a></li><li><a href=/blog-bitix/pages/links/>Enlaces</a></li><li><a href=/blog-bitix/pages/advertising/>Publicidad</a></li><li><a href=/blog-bitix/pages/donate/>Donaciones</a></li><li><a href=/blog-bitix/pages/about/>Acerca de...</a></li></ul></div><div class="col-12 col-sm-4 text-center links"><a href=index.xml title="¡Suscríbete a Blog Bitix!"><img src=assets/images/rss.png class=icon></a>
<a href=https://twitter.com/picodotdev/ title="¡Sígueme en twitter!"><img src=assets/images/twitter.svg class=icon></a>
<a href=https://github.com/picodotdev/blog-ejemplos/ title="¡Obtén el código fuente de los ejemplos!"><img src=assets/images/github.svg class=icon></a></div></div><div class=row><div class=col-12>Copyleft <span class=copyleft>&copy;</span> 2019 - <a href=https://creativecommons.org/licenses/by-sa/4.0/ rel=nofollow rel=license><img alt="Licencia de Creative Commons" title="Licencia de Creative Commons" style=border-width:0 src=https://licensebuttons.net/l/by-sa/4.0/80x15.png class=licencia></a><br><a href=https://twitter.com/blogstackinfo rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/blog-stack.png alt="Blog Stack" title="Blog Stack"></a>
<a href=https://www.planetacodigo.com/ rel=nofollow><img src=https://picodotdev.github.io/blog-bitix/assets/images/planeta-codigo.png alt="Planeta código" title="Planeta código"></a><br><span xmlns:dct=http://purl.org/dc/terms/ property=dct:title><a href=https://picodotdev.github.io/blog-bitix/ rel=nofollow>Blog Bitix</a></span> by <a xmlns:cc=https://creativecommons.org/ns# href=https://picodotdev.github.io/blog-bitix/ property=cc:attributionName rel=cc:attributionurl>pico.dev</a> is licensed under a <a rel=license href=https://creativecommons.org/licenses/by-sa/4.0/>Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional License</a>.<br><span class=credit>Powered by <a href=https://gohugo.io/ rel=nofollow title="A fast and modern static website engine">Hugo</a> and <a href=https://pages.github.com/ title="Websites for you and your projects">GitHub Pages</a>.</span>
<span class=credit>Background patterns from <a href=https://www.toptal.com/designers/subtlepatterns rel=nofollow>Subtle Patterns</a>.</span></div></div></footer></div><div class=blueimp-gallery-container><div id=blueimp-gallery class="blueimp-gallery blueimp-gallery-controls" data-use-bootstrap-modal=false><div class=slides></div><h3 class=title></h3><a class=prev>‹</a>
<a class=next>›</a>
<a class=close>×</a>
<a class=play-pause></a><ol class=indicator></ol><div class="modal fade"><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close aria-hidden=true>&times;</button><h4 class=modal-title></h4></div><div class="modal-body next"></div><div class=modal-footer><button type=button class="btn btn-default pull-left prev">
<i class="glyphicon glyphicon-chevron-left"></i>Anterior</button>
<button type=button class="btn btn-primary next">
Siguiente
<i class="glyphicon glyphicon-chevron-right"></i></button></div></div></div></div></div></div><script type=text/javascript>window.cookieconsent_options={"message":"Esta bitácora te informa de la obviedad de que utiliza «cookies», propias y de servicios como Google Analytics y Google AdSense entre otros.","dismiss":"Aceptar","learnMore":"Más información","link":null,"theme":"dark-bottom"};</script><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js async></script></body></html>